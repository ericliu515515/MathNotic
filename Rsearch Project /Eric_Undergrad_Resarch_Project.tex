\documentclass{report}
\input{preamble}
\input{macros}
\input{letterfonts}

\title{\Huge{A deep and
comprehensive study of equivalent
characterizations of basic notions in
Analysis}\\
}
\author{\huge{Eric Liu \\
NCKU Department of Mathematics, F74102276}}
\date{}
\begin{document}
\pagenumbering{Roman}
\maketitle
\newpage% or \cleardoublepage
% \pdfbookmark[<level>]{<title>}{<dest>}
\pdfbookmark[section]{\contentsname}{toc}

\tableofcontents
\pagebreak
\section{Preface}
\begin{mdframed}
The first part of this project aims to give the following concepts many more definitions than one mainly learned in the respective class.
\begin{enumerate}[label=(\alph*)]
  \item Interior 
  \item Closed
  \item Closure
\item Boundary
\item  Basis
\item  Subbase
\item  Continuity
\item  Subspace Topology
\item  Product Topology
\item  Connectedness
\item  Compactness
\end{enumerate}
In particular, we prove the \customref{AST}{Alexander Subbase Theorem} and use it to prove \customref{TTT}{Tychonoff's Theorem}. The second part of this project aims to construct Lebesgue measure using  \customref{caratheodory_extension_theorem}{Carath√©odory's Extension Theorem}. The third part of project study the following counterexamples 
\begin{enumerate}[label=(\alph*)]
  \item \customref{Topologist's Sine Curve}{Topologist's Since Curve} 
  \item  \customref{Long Line}{Long Line}  
  \item \customref{Weierstrass Function}{Weierstrass Function}
\end{enumerate}
\end{mdframed}
\chapter{General Topology}
\section{Equivalent Characterizations of Basic Notions}
\pagenumbering{arabic}
\begin{abstract}
This section give a compact and comprehensive development of some of the most basic notions in the study of topology. In this section, $(X,\mathscr{T })$ is a topological space. 
\end{abstract}
\begin{mdframed}
Given a collection $\mathcal{B}\subseteq \mathscr{T }$ of open sets, we say $\mathcal{B}$ is a  
\begin{enumerate}[label=(\alph*)]
  \item  \textbf{basis} if for each $O\in \mathscr{T }$ there exists a subcollection $\mathcal{B}_0$ such that $O= \bigcup \mathcal{B}_0$.
  \item \textbf{subbase} if  $\mathscr{T }$ is the collection of unions of finite intersections of $\mathcal{B}$. In a more formal language, $\mathcal{B}$ has to satisfy 
\begin{align*}
\mathscr{T }=\bset{\bigcup \mathcal{A}_0:\mathcal{A}_0\subseteq \mathcal{A}}
\end{align*}
where
\begin{align*}
  \mathcal{A}= \bset{\bigcap \mathcal{B}_0 : \mathcal{B}_0\subseteq \mathcal{B} \text{ is finite.}}
\end{align*}
\end{enumerate}
\end{mdframed}
\begin{theorem}
  \textbf{(Equivalent Definition of Basis)} The following statements are equivalent.
\begin{enumerate}[label=(\alph*)]
  \item $\mathcal{B}$ is a basis.
  \item For all $O\in \mathscr{T }$ and $x\in O$, there exists $B \in \mathcal{B}$ such that $x \in B \subseteq O$.
\end{enumerate}
\end{theorem}
\begin{proof}
From (a) to (b) is obvious. To see (b) implies (a), for each $O\in \mathscr{T }$,  collect $B_x$ for all $x\in O$, where $B_x \in \mathcal{B}$ satisfy $x\in B_x \subseteq O$, and observe 
\begin{align*}
O= \bigcup_{x\in O}B_x
\end{align*}
\end{proof}
\begin{theorem}
\textbf{(Equivalent Definition of Subbase)} The following statements are equivalent. 
\begin{enumerate}[label=(\alph*)]
  \item $\mathcal{B}$ is a subbase of $\mathscr{T }$. 
  \item $\mathcal{B}$ cover $X$ and $\mathscr{T }$ is the smallest topology containing $\mathcal{B}$. 
\end{enumerate}
\end{theorem}
\begin{proof}
Let $\mathcal{B}$ be a subbase of $\mathscr{T }$, and 
\begin{align}
\label{At}
\mathcal{A}\triangleq  \bset{\bigcap \mathcal{B}_0 : \mathcal{B}_0\subseteq \mathcal{B} \text{ is finite.}}
\end{align}
Let $\mathscr{T }'$ be an arbitrary topology on $X$ containing  $\mathcal{B}$. Because open sets are closed under finite intersection, we know $\mathscr{T }'$ contain $\mathcal{A}$. Moreover, because open sets are closed under arbitrary union, we know $\mathscr{T }'$ contain $\mathscr{T }$. We have shown that $\mathscr{T }$ is indeed the smallest topology containing $\mathcal{B}$. Now, note that all element $A$ of $\mathcal{A}$ satisfy 
\begin{align*}
A\subseteq \bigcup \mathcal{B}
\end{align*}
It then follows from that $X$ is a union of some collection of elements of  $\mathcal{A}$ that 
\begin{align*}
X\subseteq \bigcup \mathcal{B}
\end{align*}
That is, $\mathcal{B}$ covers $X$. We have shown (a) implies (b). Now, let $\mathcal{B}$ cover $X$ and  $\mathscr{T }$ be the smallest topology containing $\mathcal{B}$. Again define $\mathcal{A}$ as in \myref{Equation}{At}. Because $\mathcal{B}$ cover $X$, it is clear that $\mathscr{T }'$ defined by  
\begin{align*}
\mathscr{T }'\triangleq \bset{\bigcup \mathcal{A}_0 :\mathcal{A}_0 \subseteq \mathcal{A}}
\end{align*}
forms a topology on $X$ and has $\mathcal{B}$ as subbase. With argument similar to the first part of the proof, we now see that $\mathscr{T }'$ is in fact the smallest topology containing  $\mathcal{B}$, i.e., $\mathscr{T }=\mathscr{T }'$. We have shown (b) implies (a). 
\end{proof}
\begin{mdframed}
Immediately, with the equivalent definitions, one should check
\begin{enumerate}[label=(\alph*)]
    \item Given any cover $\mathcal{B}$ of $X$, there always exists a unique topology $\mathscr{T}$ containing $\mathcal{B}$ as a subbase. We say $\mathscr{T}$ is the \textbf{topology generated by} $\mathcal{B}$.
    \item The set $\mathcal{A} \triangleq \set{ \bigcap S : S \subseteq \mathcal{B}, \text{ card }S \in \mathbb{N} }$ of finite intersections of cover $\mathcal{B}$ is a basis of the topology generated by $\mathcal{B}$.
    \item Not every cover $\mathcal{B}$ of $X$ has some topology $\mathscr{T}$ containing $\mathcal{B}$ as a basis. Consider $\mathcal{B} \triangleq \set{ (-\infty, a) : a \in \mathbb{R} } \cup \set{ (b, \infty) : b \in \mathbb{R} }$. Even the smallest topology containing $\mathcal{B}$, i.e. the standard topology, does not have $\mathcal{B}$ as a basis.
    \item However, cover $\mathcal{B}$ is the basis of the topology $\mathscr{T}$ generated by itself if for all $B_1, B_2 \in \mathcal{B}$ and $x \in B_1 \cap B_2$, there exists $B_3$ such that $x \in B_3 \subseteq B_1 \cap B_2$.
    \item If $\mathcal{B}$ is a basis of $\mathscr{T}$, then $\mathcal{B}$ is also a subbase of $\mathscr{T}$.
    \item Basis is not necessarily closed under finite intersection. Consider the basis $\set{(a, a + \frac{1}{n}) : a \in \mathbb{R}, n \in \mathbb{N}}$ of the standard topology of $\R$. 
\end{enumerate}
Note that in (a), to check the generated $\mathscr{T}$ is indeed a topology, one may need to utilize the identity
\begin{align*}
\Big( \bigcup_{i \in I} A_i \Big) \cap \Big( \bigcup_{j \in J} B_j \Big) = \bigcup_{i \in I, j \in J} A_i \cap B_j.
\end{align*}



Now, given an arbitrary subset $E\subseteq X$, we 
\begin{enumerate}[label=(\alph*)]
  \item say $x\in X$ is a \textbf{limit point of $E$} if every open $O$ containing $x$ contain a point $y\in E$ such that $y \neq x$.
  \item say $x\in E$ is an \textbf{interior point of $E$} if there exists $O\in \mathscr{T }$ such that $x \in O \subseteq E$.
  \item define the \textbf{interior $E^\circ $ of $E$} to be the union of all open sets contained by  $E$.
   \item say $E\subseteq X$ is a \textbf{closed set} if $E^c \in \mathscr{T }$.
   \item define the \textbf{closure $\overline{E}$ of $E$} by $\overline{E}\triangleq E\cup E'$ where $E'$ is the set of limit points of $E$. 
    \item say $E$ is \textbf{dense} in $X$ if  $\overline{E}=X$.
    \item define the \textbf{boundary $\partial E$ of $E$} by $\partial E\triangleq \overline{E}\setminus E^\circ $
\end{enumerate}
\end{mdframed}
\begin{theorem}
\textbf{(Equivalent Definitions of Interior)} The following sets are equivalent
\begin{enumerate}[label=(\alph*)]
  \item $E^\circ $
  \item The largest open set contained by $E$.
  \item The set of interior points of $E$.
\end{enumerate}
\end{theorem}
\begin{proof}
Check straightforward.
\end{proof}
\begin{theorem}
\textbf{(Equivalent Definitions of Closed)} The following statements are equivalent.
\begin{enumerate}[label=(\alph*)]
  \item $E$ is closed.
  \item the set of limit points of $E$ is contained by $E$.
  \item $\overline{E}=E$.
\end{enumerate}
\end{theorem}
\begin{proof}
The proof of $(\text{a})\implies (\text{b})\implies (\text{c})$ are straight forward. The proof of $(\text{c})\implies (\text{a})$ follows from first noting no  $x\in E^c$ is a limit point of $E$. Then shows $E^c = \bigcup_{x \not \in E}O_x$ where $O_x$ is an open set containing $x$ and disjoint with $E$.
\end{proof}
\begin{theorem}
\textbf{(Equivalent Definitions of Closure)} The following sets are equivalent.
\begin{enumerate}[label=(\alph*)]
  \item $\overline{E}$
  \item $((E^c)^\circ )^c$ 
  \item The smallest closed set containing $E$.
  \item $\set{x\in X:\text{ every open $O$ containing $x$ intersect with $E$ }}$
\end{enumerate}
\end{theorem}
\begin{proof}
$(\text{a})=(\text{d})$ is obvious. To verify $(\text{a})=(\text{c})$, check $(\overline{E})' \subseteq E'$ and check $E'\subseteq F'\subseteq F$ for each closed $F$ containing $E$. Lastly, to verify $(\text{b})=(\text{c})$, check $(\overline{E})^c=(E^c)^\circ $ using the largest open set and the smallest closed set characterization of interior and closure.
\end{proof}
\begin{theorem}
\textbf{(Equivalent Definitions of Dense)} The following statements are equivalent. 
\begin{enumerate}[label=(\alph*)]
  \item $E$ is dense in $X$. 
  \item Every non-empty open set intersect with $E$. 
  \item $(E^c)^\circ =\varnothing$
\end{enumerate}
\end{theorem}
\begin{proof}
$(\text{a})=(\text{c})$ follows from $\overline{E}=((E^c)^\circ )^c$, and $(\text{a})=(\text{b})$ follows from $\overline{E}=\set{x\in X:\text{ every open }O\text{ containing }x\text{ intersect with }E}$.
\end{proof}
\begin{theorem}
\textbf{(Equivalent Definitions of Boundary)} The following sets are equivalent.
\begin{enumerate}[label=(\alph*)]
  \item $\partial E$
  \item $\overline{E}\cap \overline{E^c}$
  \item $\set{x \in X:\text{ every open $O$ containing $x$ intersect with both $E$ and $E^c$ }}$
\end{enumerate}
\end{theorem}
\begin{proof}
$(\text{a})=(\text{b})$ follows from $(E^\circ )^c = \overline{E^c}$ and $(\text{b})=(\text{c})$ follows from $\overline{E}=\set{x\in X:\text{ every open $O$ containing  $x$ intersect with $E$}}$. 
\end{proof}
\begin{mdframed}
We now develop the theory of continuity by first giving a pointwise definition. Given another topological space $(Y,\mathscr{S})$ and a function $f:X\rightarrow Y$, we say $f$ is \textbf{continuous at $x\in X$} if for all open $O$ containing $f(x)$, there exists open $E$ containing $x$ such that $f(E)\subseteq O$. We say $f$ is a \textbf{continuous (or $(\mathscr{T },\mathscr{S })$-continuous, if necessary) map} if $f$ is continuous at all $x\in X$. \\

It is easy to see the composition of two continuous function must be continuous. However, one should notice that the composition of a continuous function and a discontinuous function can be continuous. Just let one of them be a constant function.
\end{mdframed}
\begin{theorem}
\textbf{(Equivalent Definitions of Continuous function)} The following are equivalent 
\begin{enumerate}[label=(\alph*)]
  \item $f$ is continuous.
  \item  $f^{-1}(O)\in \mathscr{T }$ for all $O\in \mathscr{S }$.
  \item $f^{-1}(F)$ is closed for all closed $F$ in $Y$. 
  \item For all $B\subseteq Y$, $f^{-1}(B^\circ )\subseteq (f^{-1}(B))^{\circ }$
  \item For all $A\subseteq X$, $f(\overline{A})\subseteq \overline{f(A)}$. 
  \item For all $B\subseteq Y,\overline{f^{-1}(B)}\subseteq f^{-1}(\overline{B})$
  \item For all subbase $\mathcal{B}$ of $Y$, $f^{-1}(B)\in \mathscr{T }$ for all $B \in \mathcal{B}$.
\end{enumerate}
\end{theorem}
\begin{proof}
It is straightforward to check  $(\text{a})\implies (\text{b})\implies (\text{c})$. To verify $(\text{c})\implies (\text{a})$, check $x\in (f^{-1}(O^c))^c$ and $f((f^{-1}(O^c))^c) )\subseteq O$ for each $x \in X$ and $O \in \mathscr{S}$ containing $f(x)$. Respectively, to verify $(\text{b})\implies (\text{d}),(\text{c})\implies (\text{e})\text{ and }(\text{c})\implies (\text{f})$, check  $f^{-1}(B^\circ )\subseteq f^{-1}(B),A\subseteq f^{-1}(\overline{f(A)})\text{ and }f^{-1}(B)\subseteq f^{-1}(\overline{B})$. Note that $(\text{e})\implies (\text{f})$ follows from setting $A=f^{-1}(B)$. Check $(\text{d})\implies (\text{b})$ and $(\text{f})\implies (\text{c})$ straightforwardly, and we have proved the equivalency of statements from (a) to (f). Lastly, check $(\text{b})\iff (\text{g})$ straightforwardly.  
\end{proof}
\begin{mdframed}
One may wonder: Why isn't "For all $A \subseteq X$, $f(A)^\circ  \subseteq f(A^\circ )$" a characterization of $f$ being continuous? Consider a function that maps some topological space with a subset that has an empty interior into the topological space $Y$ having only a single point.
\end{mdframed}
\section{Equivalent Definition of Subspace and Product}
\begin{abstract}
This section handles the definition of subspace and product topological space using the language of category theory.  
\end{abstract}
\begin{mdframed}
Given some topological space $X$ and some collection  $(X_i )_{i \in I}$ of topological spaces, we say $X$ \textbf{satisfy the universal property of product} and $X$ \textbf{is a product space of $(X_i)_{i \in I}$}  if there exists some tuple of continuous maps 
\begin{align*}
  (\pi_i: X \rightarrow X_i)_{i \in I}
\end{align*}
called \textbf{projection maps}, such that for each tuple of continuous maps $(F_i:Z\rightarrow X_i)_{i\in I}$, there exists exactly one continuous map $F:Z\rightarrow X$ such that for all $i$ the following diagram commute 
% https://q.uiver.app/#q=WzAsMyxbMCwyLCJaIl0sWzIsMiwiWF97XFxhbHBoYX0iXSxbMiwwLCJYIl0sWzAsMiwiRiJdLFswLDEsIkZfe1xcYWxwaGF9IiwyXSxbMiwxLCJcXHBpX3tcXGFscGhhfSJdXQ==
\[\begin{tikzcd}
	&& X \\
	\\
	Z && {X_{i}}
	\arrow["{\pi_{i}}", from=1-3, to=3-3]
	\arrow["F", from=3-1, to=1-3]
	\arrow["{F_{i}}"', from=3-1, to=3-3]
\end{tikzcd}\]
Immediately, one sees that if $X'$ is another product space of  $(X_i)_{i \in I}$, then $X'$ is homeomorphic to  $X$. In other words, the term "product space" is unique up to a homeomorphism.
\end{mdframed}
\begin{theorem}
\label{Acpop}
\textbf{(A characteristic property of product topological space)} Let $X$ be the product of the collection $(X_i)_{i \in I}$ with projections $(\pi _i : X\rightarrow X_i)_{i \in I}$, and let $G$ maps some topological space $Z$ into  $X$. Denote $G \circ \pi _{i}$ by $G_i$. 
\begin{align*}
G\text{ is continuous }\iff (G_i)_{i \in I}\text{ are all continuous }
\end{align*}
\end{theorem}
\begin{proof}
If $G$ is continuous, then clearly  $(G_i)_{i \in I}$ are all continuous. Suppose  $(G_i)_{i \in I}$ are all continuous. By universal property, there exists a unique continuous map $G':Z\rightarrow X$ such that $\pi_i \circ G'=G_i$ for all $i \in I$. To show $G$ is continuous, we only have to show $G=G'$. Fix $z \in Z$, and let $\diota: \set{z}\rightarrow Z$ be the inclusion map. Because the source is singleton, $(\pi_i \circ G\circ \diota)_{i \in I}$ are all continuous. This implies there exists a unique continuous map $G'': \set{z}\rightarrow X$ such that $\pi _i \circ G''=\pi _i \circ G \circ \diota$ for all $i \in I$. Clearly, $G \circ \diota $ and $G'\circ \diota$ both are continuous maps that satisfy this condition. This implies $G(z)=G'(z)$. We have shown $G=G'$.  
\end{proof}
\begin{mdframed}
Albeit infamous, there also is \textbf{universal property of subspace} in study of topology. Let $X,E$ be two topological spaces. We say $E$ is a  \textbf{subspace of $X$} if there exists a continuous map $\diota:E \rightarrow X$ such that for all topological spaces $Z$ and maps $F:Z\rightarrow E$, 
\begin{align*}
F\text{ is continuous }\iff  \diota \circ F \text{ is continuous }
\end{align*}
Immediately, we are required to show the consistency between the universal properties of product and subspace. 
\end{mdframed}
\begin{theorem}
\textbf{(Consistency Between The Universal Properties of Product and Subspaces)} Let $(E_i)_{i\in I},(X_i)_{i \in I}$ be two collection of topological spaces. Let $X$ be the product of $(X_i)_{i \in I}$ with projection maps $\pi_{i;X}:X\rightarrow X_i$, and let $E$ be the product of  $(E_i)_{i \in I}$  with projection maps $\pi _{i ;E}:E\rightarrow E_i$. If for all $i \in I$, there exists some $\diota_i:E_i\rightarrow X_i$ that satisfy the universal property of subspace, then there exists some $\diota:E\rightarrow X$ that satisfy the universal property of subspace.
\end{theorem}
\begin{proof}
Because for each $i \in I$, the map $\diota_i\circ \pi_{i ;E}:E\rightarrow X_i$ is continuous, by universal property, there exists a unique continuous map $\diota:E\rightarrow X$  such that the following diagram commute 
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJYX3tcXGFscGhhfSJdLFswLDIsIkFfe1xcYWxwaGF9Il0sWzMsMiwiQSJdLFszLDAsIlgiXSxbMSwwLCJcXGlvdGFfe1xcYWxwaGF9Il0sWzMsMCwiXFxwaV97XFxhbHBoYSA7IFh9IiwyXSxbMiwxLCJcXHBpX3tcXGFscGhhIDtBfSJdLFsyLDMsIlxcaW90YSIsMl1d
\[\begin{tikzcd}
	{X_{i}} &&& X \\
	\\
	{E_{i}} &&& E 
	\arrow["{\pi_{i ; X}}"', from=1-4, to=1-1]
	\arrow["{\diota_{i}}", from=3-1, to=1-1]
	\arrow["\diota"', from=3-4, to=1-4]
	\arrow["{\pi_{i;E}}", from=3-4, to=3-1]
\end{tikzcd}\]
It remains to show such $\diota:E\rightarrow X$ satisfy the universal property of subspace. Let $F:Z\rightarrow E$ be some map. If $F$ is continuous, then $\diota \circ F$ is continuous because it is a composition of two continuous map. Suppose $\diota \circ F:Z\rightarrow X$ is continuous. It remains to show $F$ is continuous.  Because the diagram commute, we may deduce 
\begin{align*}
\diota_i \circ \pi _{i;E}\circ F= \pi_{i;X}\circ  \diota \circ F\text{ are continuous }  
\end{align*}
It then follows from universal property of subspace that $\pi_{i ;E}\circ F$ are continuous. This by \myref{Theorem}{Acpop} implies $F$ is continuous.  
\end{proof}
\begin{mdframed}
 What's useful about the universal property is that, given two topological spaces $X,Y$, because both $X\times Y$ and $Y\times X$ when equipped with the product topology satisfy the universal property, we no longer have to distinguish them even though they are fundamentally "different" as sets. Similarly, we no longer need to distinguish between $(X\times Y)\times Z$ and $X\times (Y \times Z)$, because they are all homeomorphic to $X\times Y \times Z$. \\

The spirit of category theory is to not directly refer to the object. Indeed, given a collection of topological spaces $(X_i)_{i \in I}$, the universal property of product does not guarantee the existence of some $X$ that can be the product of  $X_i$. This existence is true. One can give a concrete construction of the product by setting
\begin{center}
   \begin{minipage}{0.9\linewidth}  
       $X\triangleq \prod_{i \in I}X_{i }$, the projection map $\pi_i((x_j)_{j \in I})\triangleq x_i$, and the topology on $X$ to be the smallest one that makes each $\pi _i $ continuous. 
   \end{minipage}
\end{center}
It is clear that our concrete construction indeed satisfy the universal property. With this concrete construction, one see that $X$ has the subbase 
 \begin{align}
\label{ualpha}
\bigcup_{i \in I} \set{\pi _{i}^{-1}(U):U \in \mathscr{T }_{i }}
\end{align}
Thus having the basis 
\begin{align*}
\bset{\prod U_i : U_i \neq X_i \text{ for finitely many } \alpha \text{ and } U_i \in \mathcal{B}_i}
\end{align*}
The subbase in \myref{Equation}{ualpha} gives another equivalent definition for product topology in the language of set theory.\\

Let $E$ be a subset of  $X$, we may equip  $E$ with the topology 
 \begin{align*}
\mathscr{T }_E \triangleq \set{O \cap E: O \in \mathscr{T }}
\end{align*}
And see that $E$ and the inclusion map $\diota:E\rightarrow X $ defined by 
\begin{align*}
\diota (x)\triangleq x 
\end{align*}
indeed satisfy the universal property of subspace. 
\end{mdframed}
\begin{theorem}
\textbf{(Equivalent Definition of Subspace Topology)} Given a basis $\mathcal{B}$ and a subbase $\mathcal{B}'$ of $(X,\mathscr{T})$, the following topologies are identical:
\begin{enumerate}[label=(\alph*)]
    \item $\mathscr{T}_E$. 
    \item The topology on $E$ generated by the basis $\mathcal{B}_E \triangleq \set{B \cap E : B \in \mathcal{B}}$. 
    \item The topology on $E$ generated by the subbase $\mathcal{B}'_E \triangleq \set{B' \cap E : B' \in \mathcal{B}'}$. 
    \item The smallest topology on $E$ such that the inclusion map $\diota  : E \to X$ is continuous.
\end{enumerate}
\end{theorem}
\begin{proof}
Check straightforward.
\end{proof}
\section{Connected and Compact}
\begin{mdframed}
Given a topological space $(X,\mathscr{T })$, we say nonempty $E\subseteq X$ is  
\begin{enumerate}[label=(\alph*)]
    \item \textbf{connected} if $E$ can not be written as $E = A \cup B$ so that $\overline{A} \cap B = A \cap \overline{B} = \varnothing$ and $A \neq \varnothing \neq B$.
    \item \textbf{path-connected} if for each $p, q \in E$, there exists a continuous function $f : [0, 1] \to E$ such that $f(0) = p, f(1) = q$. 
    \item \textbf{compact} if every open cover has a finite subcover.
\end{enumerate}
These three properties are often called \textbf{topological properties}, since they are invariant under continuous function, the "morphism" between topological space. Put more precisely, If $E \subseteq X$ satisfy a topological property and $f : X \to Y$ is continuous, then $f(E)$ also satisfy the topological property.\\

Immediately, one should again check the "natural" behaviors of subspace topology: Whether a set $E$ is connected, path-connected, or compact is independent of the choices of ambient space. In other words, given $E \subseteq X$, $E$ is connected, path-connected or compact in $(X, \mathscr{T})$ if and only if $E$ is connected, path-connected or compact in $(E, \mathscr{T}_E)$.
\end{mdframed}
\begin{theorem}
\label{Equivalent Definitions of Connected} 
\textbf{(Equivalent Definitions of Connected)} Given a subset $E\subseteq X$, the following statements are equivalent
\begin{enumerate}[label=(\alph*)]
    \item $E$ is connected in $(X, \mathscr{T})$.
    \item $E$ is connected in $(E, \mathscr{T}_E)$.
    \item The only clopen sets in $(E, \mathscr{T}_E)$ are $E$ and $\varnothing$.
    \item In $(E, \mathscr{T}_E)$, the only set that has empty boundary are $E$ and $\varnothing$.
    \item All continuous function from $(E, \mathscr{T}_E)$ to $\set{0, 1}$ with discrete topology is constant.
\end{enumerate}
\end{theorem}
\begin{proof}
For (a) $\iff$ (b), use the identity $\forall A \subseteq E$, $\operatorname{cl}_X(A) \cap E = \operatorname{cl}_E(A)$. Check straightforward for (b) $\iff$ (c) and (d) $\iff$ (c) $\iff$ (e).
\end{proof}
\begin{mdframed}
Three things to note here
\begin{enumerate}[label=(\alph*)]
    \item If $E \subseteq X$ is connected, $E$ can not be covered by any two disjoint open sets intersecting with $E$ in $(X, \mathscr{T}_X)$. The converse is not true. Consider finite subset of an infinite set with cofinite topology.
    \item Union of collection $(A_\alpha)_{\alpha \in J}$ of connected sets with non-empty intersection is connected. Prove this by a proof of contradiction. Path-connectedness has the same property, and the proof is much easier.
    \item Path-connectedness is strictly stronger than connectedness. This can be proved using a proof of contradiction and supremum. One famous examples of the "strict" part is \customref{Topologist's Sine Curve}{Topologist's Sine Curve}. 
\end{enumerate}
\label{local-path}
Although path-connectedness is strictly stronger than connectedness, there exists a quite general condition that implies the converse. We say a topological space $X$ is  \textbf{locally path-connected} if for each $p$ and open set $U$ containing $p$, there exists a path-connected open set  $V$ containing $p$ and contained by $U$. Following our definition, we see that if $X$ is both connected and locally path-connected, then $X$ must be path-connected, since any path-connected component of $X$ (due to $X$ being locally path-connected) must be clopen in $X$. 
\end{mdframed}
\begin{theorem}
\label{Equivalent Definitions of Compactness}
\textbf{(Equivalent Definitions of Compactness)} The following statements are equivalent
\begin{enumerate}[label=(\alph*)]
    \item $E$ is compact in $(X, \mathscr{T})$. 
    \item $E$ is compact in $(E, \mathscr{T}_E)$. 
    \item Given subbase $\mathcal{B}$ of $(X, \mathscr{T})$, every cover of $E$ consisting of the elements of $\mathcal{B}$ has a finite subcover. 
    \item Every infinite subset $M$ of $E$ has a complete limit point in $E$, that is, a point $x \in E$ such that all open set $O$ containing $x$ satisfy $|O \cap M| = |M|$. 
    \item Every collection of closed sets of $(E, \mathscr{T}_E)$ that has finite intersection property has non-empty intersection. 
    \item For all topological space $Y$, the projection $\pi_Y : E \times Y \to Y$ is a closed mapping.
\end{enumerate}
\end{theorem}
\begin{proof}
For (b) $\iff$ (e), use proofs by contradiction. (b) $\iff$ (a) $\implies$ (c) are clear. We now prove
\begin{align*}
\vi{(\text{c})\implies (\text{b})}
\end{align*}
Fix $\mathcal{B}$. \As{ $E$ is not compact}. Then the collection $\S$ of all open covers that have no finite subcover is non-empty. Let $\mathcal{C}$ be a maximal element of $\S$. It is clear that $\mathcal{C} \cap \mathcal{B}$ is not a cover of $E$ by premise. Let $x \in E \setminus \bigcup (\mathcal{C} \cap \mathcal{B})$. Let $U$ be an element of $\mathcal{C} \setminus \mathcal{B}$ containing $x$. Because $\mathcal{B}$ is a subbase, there exists finite $B_1, \dots, B_n \in \mathcal{B}$ such that $x \in B_1 \cap \cdots \cap B_n \subseteq U$. Because $\mathcal{C}$ is a maximal element of $\S$,  for all $j$, the collection $\mathcal{C} \cup \{B_j\}$ does not belong to $\S$. This implies that for each $j \in \{1, \dots, n\}$, there exists a finite sub-collection $\mathcal{C}_j \subseteq \mathcal{C}$ such that $\mathcal{C}_j \cup \{B_j\}$ covers $E$. Let $\mathcal{C}_F \triangleq \bigcup_{j=1}^n \mathcal{C}_j$. Because $\mathcal{C}_j \cup \{B_j\}$ are covers of $E$, $\mathcal{C}_F \cup \{B_1, \dots, B_n\}$ is a cover of $E$. This implies $\mathcal{C}_F \cup \{U\} \subseteq \mathcal{C}$ is a finite subcover. \CaC $\vdone$\\

We now prove 
\begin{align*}
\blue{(\text{a})\implies (\text{d})}
\end{align*}
\As{there exists infinite $M \subseteq E$ that has no complete limit point}. Because of our assumption, for each $x \in E$, there exists an open set $O_x$ containing $x$ such that $|M \cap O_x| < |M|$. Because $(O_x)_{x \in E}$ is an open cover of $E$, there exists a finite sub-cover $(O_x)_{x \in I}$. Note that $M$ is infinite, so we can deduce
\begin{align*}
|M| = \left| \bigcup_{x \in I} M \cap O_x \right| \leq \sum_{x \in I} |M \cap O_x| < |M| \tCaC \bdone
\end{align*}
We now prove 
\begin{align*}
\vi{(\text{d})\implies (\text{a})}
\end{align*}
\As{$E$ is not compact}. Let $O$ be an open cover of $E$ that has no finite subcover with smallest cardinality $c$. Well-order $O$ by $O \triangleq \{O_\alpha\}_{\alpha < c}$. Use transfinite recursion to build $M \triangleq \{x_\alpha : \alpha < c\}$ where $x_\alpha \in E \setminus \bigcup_{\beta < \alpha} O_\beta$. Such $x_\alpha$ always exists; otherwise, there exists an open cover of $E$ that has no finite subcover with cardinality smaller than $c$. To cause a contradiction, it remains to show
\begin{align*}
  \vi{M\text{  has no complete limit point in }E}
\end{align*}
Because $O$ is an open cover of $E$, for all $x$, there exists some $O_\alpha$ containing $x$. Observe using the definition of $M$
\begin{align*}
|O_\alpha \cap M| \leq |\{x_\gamma : \gamma \leq \alpha\}| \leq |\alpha| < c = |M| \tCaC \vdone
\end{align*}
Before we prove (a) $\implies$ (f), we first prove the \olive{Generalized Tube Lemma}. That is,
\begin{center}
   \begin{minipage}{0.9\linewidth}  
       \olive{Given a product space $X \times Y$, compact $A \subseteq X$, compact $B \subseteq Y$, and $N \subseteq X \times Y$ open containing $A \times B$, there exists $U \subseteq X$ open, $V \subseteq Y$ open such that $A \times B \subseteq U \times V \subseteq N$.}
   \end{minipage}
\end{center}
First note that for all $(a, b) \in A \times B$, there exists $U_{(a,b)} \subseteq X$ open and $V_{(a,b)} \subseteq Y$ open such that $(a, b) \in U_{(a,b)} \times V_{(a,b)} \subseteq N$. Because $A$ is compact and for all $b$, the collection $(U_{(a,b)})_{a \in A}$ is an open cover of $A$, there exists a finite subset $A_b \subseteq A$ for all $b$ such that $A \subseteq \bigcup_{a \in A_b} U_{(a,b)}$. Now, let $U_b \triangleq \bigcup_{a \in A_b} U_{(a,b)}$ and $V_b \triangleq \bigcap_{a \in A_b} V_{(a,b)}$. It is clear that $U_b, V_b$ are open, and it is straightforward to check $A \times \{b\} \subseteq U_b \times V_b \subseteq N$. Again, because $B$ is compact and $(V_b)_{b \in B}$ is an open cover of $B$, there exists a finite subset $B_0 \subseteq B$ such that $B \subseteq \bigcup_{b \in B_0} V_b$. Let $V \triangleq \bigcup_{b \in B_0} V_b$ and $U \triangleq \bigcap_{b \in B_0} U_b$. It is straightforward to check $U, V$ suffice. $\odone$ \\


We now prove 
\begin{align*}
\blue{(\text{a})\implies (\text{f})}
\end{align*}
Given $A \subseteq X \times Y$ closed, we are required to prove $\pi_Y(A)$ is closed. WOLG, assume $\pi_Y(A) \neq Y$. Fix $y \in Y \setminus \pi_Y(A)$. Because $X$ and $\{y\}$ are compact and $X \times \{y\}$ is a subset of the open set $A^c$, by the \olive{Generalized Tube Lemma}, there exists open $V \subseteq Y$ such that $X \times \{y\} \subseteq X \times V \subseteq A^c$. It is straightforward to check $V \cap \pi_Y(A) = \varnothing$. $\bdone$ \\

Lastly, we prove 
\begin{align*}
\vi{(\text{f})\implies (\text{a})}
\end{align*}
\As{$X$ is not compact}. Let $(O_\alpha)_{\alpha \in J}$ be an open cover of $X$ with no finite subcover. Consider the following construction:
\begin{enumerate}[label=(\alph*)]
    \item $\mathcal{U} \triangleq \set{\bigcup_{\alpha \in I} O_\alpha : I \text{ is a finite subset of } J}$ is an open cover of $X$ with no finite subcover,
    \item $\mathcal{U}$ is closed under finite union,
    \item $\mathcal{F} \triangleq \set{U^c : U \in \mathcal{U}}$ is a collection of non-empty closed sets that has the finite intersection property.
    \item If we let $Y \triangleq X \cup \{p\}$ where $p \notin X$, then $\mathscr{T}_Y \triangleq \mathcal{P}(X) \cup \set{\{p\} \cup A : \exists F \in \mathcal{F}, F \subseteq A \subseteq X}$ is a topology on $Y$, where $\mathcal{P}(X)$ is the collection of all subsets of $X$.
    \item Let $C \triangleq \operatorname{cl}_{X \times Y} \set{(x, x) \in X \times Y : x \in X}$.
    \item Fix $x \in X$. Because $\mathcal{U}$ is an open cover of $X$, there exists $U \in \mathcal{U}$ containing $x$. Note that $\{p\} \cup U^c$ is open in $Y$. This implies $U \times (\{p\} \cup U^c)$ is an open subset of $X \times Y$ containing $(x, p)$. We have proved $C \subseteq X \times X$.
    \item It is clear that $X$ is not closed in $Y$. Now observe that $\pi_Y$ maps the closed set $C$ to the open set $X \subseteq Y$. \CaC $\vdone$
\end{enumerate}
\end{proof}
\begin{mdframed}
Let's now compare the three topological properties we listed. Because the projection maps are continuous, we know that if $X\triangleq \prod_{i \in I} X_i$ satisfy any topological property, then all of its components satisfy the same topological property. What is difficult to prove is the converse.
\end{mdframed}
\begin{theorem}
\textbf{(Product of Connected Space)} 
\begin{align*}
X_i\text{ are all connected }\implies X\text{ is connected }
\end{align*}
\end{theorem}
\begin{proof}
Fix $i\in I$. Let $F:X\rightarrow \set{0,1}$ be continuous. For all $(x_k)_{k\neq i}$, if we define $F':X_i\rightarrow \set{0,1}$ by  
\begin{align*}
F'(x_i)\triangleq F(x_j)\text{ where }x_j=x_i\text{ or }x_k 
\end{align*}
Then $F'$ is continuous. It then follows from  $X_i$ is continuous that  $F'$ is constant. It then follows that all similarly defined  $F'$ are constant. This shows that  $F$ is constant. 
\end{proof}
\begin{mdframed}
Using universal property, it is easy to see that if $X$ is path-connected, then all  $X_i$ are path-connected.  To show the same for compactness, we first note that the subbase definition for compactness we proved in \myref{Theorem}{Equivalent Definitions of Compactness} is called \textbf{Alexander Subbase Theorem}. \label{AST} 
\end{mdframed}
\begin{theorem}
\label{TTT}
\textbf{(Tychonoff's Theorem)}
\begin{align*}
X_i\text{ are all compact }\implies X\text{ is compact }
\end{align*}
\end{theorem}
\begin{proof}
We know 
\begin{align*}
\bigcup_{i \in I} \set{\pi_i^{-1}(U_i)\subseteq X: U_i \in \mathscr{T }_i}\text{ is a subbase for }X
\end{align*}
Let $C$ be a cover of  $X$ consisting of element of this subbase. Partition $C$ into  $\bigcup_i C_i$ where $C_i$ contains sets of the form $\pi_i^{-1}(U_i)$. There must exists some $i$ such that 
\begin{align}
\label{Xi=}
X_i= \bigcup_{j\in J} U_j\text{ where } C_i= \set{\pi_i^{-1}(U_j):j\in J}
\end{align}
otherwise for each fixed $i$ we may select some  $x_i \in X_i$ that is not covered by $U_j$, and the point $(x_i)_{i \in I}$ will not be covered by $C$. Fix $i$ such that  \myref{Equation}{Xi=} holds true. Because $X_i$ is compact, we know  there exists a finite sub-cover of  $X_i$ consisting of  $(U_j)$, its inverse projection is a finite subcover of $X$ consisting of elements of  $X$.   
\end{proof}
\chapter{Measure Theory}

\section{Sigma-Algebra} 
\begin{abstract}
In this section, we first discuss properties of $\sigma$-algebra and some of its substructure for better understanding of a slightly generalized version of \customref{caratheodory_extension_theorem}{Carath√©odory's extension theorem}. Note that in this section, the terms 'ring', 'field', or 'algebra' do not refer to algebraic structures like the integer ring. 
\end{abstract}
\begin{mdframed}
Given a set $X$ and an non-empty set $R$ of subsets of $X$, we say  $R$ is a \textbf{semi-ring}, if for each $A,B \in R$, we have 
\begin{enumerate}[label=(\alph*)]
  \item $A\cap B \in R$ (closed under finite intersection)
  \item  $A\setminus B=\bigsqcup_{i=1}^n K_i$ for some disjoint $K_1,\dots ,K_n \in R$. (relative complements can be written as finite disjoint union)
\end{enumerate}
and we say $R$ is a \textbf{ring}, if for each $A,B \in R$, we have 
\begin{enumerate}[label=(\alph*)]
  \item $A\cup B \in R$ (closed under finite union)
  \item $A\setminus  B \in R$ (closed under relative complement)
\end{enumerate}
One should check 
\begin{enumerate}[label=(\alph*)]
\label{c_ring}
  \item Semi-ring always contain the empty set.
\item Since $A\cap B=A\setminus (A\setminus B)$, \underline{closure under relative complement} implies \underline{closure under} \underline{finite intersection}. Thus, a ring, or any collection closed under relative complement, is always a semi-ring.
\item Note that $A\cup B=(A\setminus B)\sqcup (A\cap B) \sqcup  (B\setminus A)$. This implies we can replace  \underline{closure under finite union} with \underline{closure under finite disjoint union} as definition for ring. 
  \item Given a family $S$ of subsets of $X$, there exists smallest ring  $R(S)$ containing $S$. Such ring $R(S)$ is called \textbf{the ring generated by $S$}. 
\end{enumerate}
\end{mdframed}
\begin{theorem}
\label{RGbS}
\textbf{(Ring Generated by Semi-Ring)} If $S$ is a semi-ring, then 
\begin{align*}
R(S)&=\set{A:A\text{ is the union of some finite pair-wise disjoint sub-family $S'$ of $S $}}\\
&=\set{A:A\text{ is the union of some finite sub-family $S'$ of $S$ }}
\end{align*}
\end{theorem}
\begin{proof}
  Let $R\triangleq \set{A:A\text{ is the union of some finite pair-wise disjoint sub-family $S'$ of $S$}}$. $R'\triangleq \set{A:A\text{ is the union of some finite sub-family $S'$ of $S$ }}$. We first prove  \vi{$R=R(S)$}.\\


  Clearly, the problem can be reduced into proving \vi{$R$ is a ring}. Because $R$ is clearly closed under finite disjoint union, by \customref{c_ring}{property (c) of the ring}, we can reduce the problem into proving \vi{$R$ is closed under relative complement}.\\

We first show \olive{$R$ is closed under finite intersection}. Given $\bigsqcup E_i,\bigsqcup F_j \in R$, we see 
\begin{align*}
  \Big(\bigsqcup_i E_i\Big)\cap \Big(\bigsqcup_j F_j\Big)=\bigsqcup_{i,j} E_i\cap F_j \in R \odone
\end{align*}

Now observe
\begin{align*}
\Big(\bigsqcup_i E_i \Big)\setminus \Big(\bigsqcup_j F_j \Big)&=\bigcap_j \Big(\bigsqcup_i (E_i\setminus F_j) \Big)\\
&=\bigcap_j A_j  \text{ for some $A_j \in R$ }\vdone
\end{align*}
We now prove \blue{$R=R'$}. It is clear that $R\subseteq R'$. We only have to prove  \blue{$R'\subseteq R$}. This is trivially true, since any finite sub-family $S'$ of $S$ is a finite sub-family of $R$ and  $R$ is closed under finite union. $\bdone$
\end{proof}
\begin{mdframed}
We now give definition to the most important structure in this section. Given a family $\Sigma$ of subsets of $X$,  we say $\Sigma$ is a \textbf{$\sigma$-algebra} (or sometimes \textbf{$\sigma$-field}) on $X$ and say $(X,\Sigma)$ is a \textbf{measurable space}, if $\Sigma$ is ring and for each sequence $(A_n)_{n\inn}$ of elements of $\Sigma$ we have
\begin{enumerate}[label=(\alph*)]
  \item $X \in \Sigma$
  \item  $\bigcup_{n\inn} A_n \in \Sigma$ (Closed under countable union)
\end{enumerate}
Similarly, one should check 
\begin{enumerate}[label=(\alph*)]
\label{pop_sig}
\item Because $\bigcap_{n=1}^{\infty}A_n = A_1 \setminus (\bigcup_{n=2}^{\infty}(A_1\setminus A_n))$, we see  $\sigma$-algebra is \underline{closed under countable} \underline{intersection}. 
\item Because $\bigcup_{n=1}^{\infty}A_n = \bigsqcup_{n=1}^{\infty} (A_n \setminus (\bigcup_{k=n+1}^{\infty} A_k))$, we can replace \underline{closure under countable} \underline{union} with \underline{closure under countable disjoint union}.  
\item Because $\bigcup_{n\inn}A_n = \bigcup_{n\inn} (\bigcup_{k=1}^n A_k)$, we can replace \underline{closure under countable union} with the condition \underline{for all  $(A_n)\subseteq \Sigma$ such that $\forall n,A_n \subseteq A_{n+1}$, we have $\bigcup_n A_n \in \Sigma$}.
\item Given a family $S$ of subsets of $X$, there exists smallest sigma-algebra $\sigma(S)$ containing $S$. Such $\sigma$-algebra $\sigma(S)$ is called \textbf{the sigma-algebra generated by $S$}.
\end{enumerate}
\label{consig}
Now, given a family $S$ of subsets of $X$, there in fact exists an explicit expression of $\sigma (S)$, albeit infamous. Let $\omega_1$ be the smallest uncountable ordinal, and denote
\begin{align*}
\mathbf{\Sigma}^0_1\triangleq S
\end{align*}
For each ordinal $\alpha <\omega_1$, we recursively define 
\begin{align*}
\mathbf{\Pi}^0_\alpha \triangleq  \set{X\setminus A: A \in \mathbf{\Sigma}^0_\alpha} \text{ and }\mathbf{\Sigma}^0_\alpha \triangleq \bset{\bigcup_{n\inn}A_n: A_n\text{ is a sequence in } \bigcup_{1\leq \gamma <\alpha }\mathbf{\Pi}^0_\gamma }
\end{align*}
One can use transfinite induction to check 
\begin{align*}
\sigma (S)= \bigcup_{\alpha < \omega_1} \Sigma^0_{\alpha }
\end{align*}
\end{mdframed}
\section{Basic Property of Measurable Functions}
\begin{abstract}
In this section, we discuss the usage of the term 'measurable function', and prove some basic properties for later usage. 
\end{abstract}
\begin{mdframed}
  In the most general setting, if we are given a function $f:(X,\Sigma_X)\rightarrow (Y,\Sigma_Y)$ between two measurable space, then we say the $f$ is a \textbf{measurable function} if every pre-image of measurable set is again measurable. Immediately, one can check that in this setting, the composition of two measurable functions must be measurable.
\end{mdframed}
\begin{theorem}
\label{EDm}
\textbf{(Criteria of function measurability)} If a function $f:(X,\Sigma_X)\rightarrow (Y,\sigma (T))$ satisfy 
\begin{align*}
f^{-1}(E)\in \Sigma_X\text{ for all $E \in T$ }
\end{align*}
then 
\begin{align*}
f\text{ is measurable }
\end{align*}
\end{theorem}
\begin{proof}
Define 
\begin{align*}
\mathcal{A}\triangleq \set{E \subseteq Y: f^{-1}(E)\in \Sigma_X}
\end{align*}
Check that $\mathcal{A}$ is a $\sigma$-algebra on $Y$. By premise, $T \subseteq \mathcal{A}$. It then follows from definition that $\sigma (T)\subseteq \mathcal{A}$. This conclude that $f$ is  $(\Sigma_X, \sigma(T))$-measurable. 
\end{proof}
\begin{mdframed}
When $Y$ is a topological space, if there are no explicit specification of $\Sigma_Y$, as a consensus, we take $\Sigma_Y$ to be the Borel sigma algebra. This default consensus have good property if one take account of the Borel hierarchy. If $F$ is some Borel measurable subspace of $Y$, then the Borel sigma algebra $\Sigma_F$ on $F$ is contained by the Borel sigma algebra $\Sigma_Y$ on $Y$ by a proof of transfinite induction on the Borel hierarchy of  $\Sigma_F$. This implies that if $f:(X,\Sigma_X)\rightarrow (Y,\Sigma_Y)$ is measurable, and $f$ only take value in $F$, then $f$ is still measurable when considered as a function $f:(X,\Sigma_X)\rightarrow (F,\Sigma_F)$ between $X$ and  $F$. \\

If $Y=[-\infty,\infty]$, because 
\begin{align*}
  \set{f\geq  a}= \bigcup_n \set{f > a-\frac{1}{n}}
\end{align*}
and open sets in $[-\infty,\infty]$ can be expressed as disjoint union of countable collection of open interval, with \myref{Theorem}{EDm} we can equivalently define $f:X\rightarrow Y$ to be  measurable if and only if 
\begin{align*}
\set{f>a}\in \Sigma_X \text{ for all }a\inr
\end{align*}
Beside this important simplification of the definition of function measurability, we also see from \myref{Theorem}{EDm} that if $X,Y$ are both Borel, then a continuous function  $f:X\rightarrow Y$ must also be a measurable function. These proposition give the following Lemma, which later prove \myref{Theorem}{Btsa}, by replacing the codomain $Y$ with $\R$ or $\C$. 






\end{mdframed}
\begin{lemma}
\label{CL}
\textbf{(Computational Lemma)} Given a second-countable topological space $Y$, two functions $u,v:(X,\Sigma_X)\rightarrow (Y,\Sigma_Y)$ and a continuous function $\Phi:Y^2 \rightarrow Y$, the function $h:(X,\Sigma_X)\rightarrow (Y,\Sigma_Y)$ defined by
\begin{align*}
h(x)\triangleq \Phi(u(x),v(x))
\end{align*}
is measurable. 
\end{lemma}
\begin{proof}
  Define $f:(X,\Sigma_X)\rightarrow (Y^2,\Sigma_{Y^2})$ by 
\begin{align*}
f(x)\triangleq \big(u(x),v(x) \big)
\end{align*}
Because $\Phi$ is continuous and $h$ is the composition of $f$ and $\Phi$, we only have to prove $f$ is measurable. Let $\mathcal{B}$ be a countable basis of $Y$. It is clear that $\Sigma_{Y^2}=\sigma (\mathcal{B}^2)$. Now if we fix $I_1\times I_2 \in \mathcal{B}^2$, the proof follows from \myref{Theorem}{EDm} and noting 
\begin{align*}
f^{-1}(I_1\times I_2)=u^{-1}(I_1)\cap v^{-1}(I_2) \in \Sigma_X \end{align*}
\end{proof}
\begin{theorem}
\label{Btsa}
\textbf{(Arithmetic properties of measurable real and complex valued function)} Given two real-valued function $u,v:(X,\Sigma_X)\rightarrow \R$
\begin{enumerate}[label=(\alph*)]
  \item  $u+iv:X\rightarrow \C$ is measurable if and only if $u,v$ are measurable.
  \item If  $f,g:X\rightarrow \R\text{ or }\C$ are measurable, so are $f+g,fg\text{ and }\abso{f}$.
  \item If $f:X\rightarrow \R\text{ or }\C$ is measurable and $g:X\rightarrow \R\text{ or }\C$ isn't, then $f+g$ is not measurable.
\end{enumerate}
\end{theorem}
\begin{proof}
(a) and (b) follows from \myref{Lemma}{CL}, noting $u=\operatorname{Re}(u+iv),v=\operatorname{Im}(u+iv)$ and the fact $\R,\C$ are topological fields. It is clear that the set of all function from  $X$ to $\R\text{ or }\C$ form a group under addition. (b) shows that the set of measurable functions from a subgroup, thus giving (c).
\end{proof}
\begin{theorem}
\label{Slm}
\textbf{(Superior limit of measurable $f_n:X\rightarrow [-\infty,\infty]$ is measurable)} Given a sequence $f_n:X\rightarrow [-\infty, \infty]$ of measurable functions
\begin{align*}
g\triangleq \sup f_n \text{ and }f\triangleq \limsup_{n\to\infty} f_n\text{ are both measurable }
\end{align*}
\end{theorem}
\begin{proof}
The proofs follows from noting 
\begin{align*}
\set{g>a}=\bigcup_n \set{f_n>a}\text{ for all $a\inr$ }
\end{align*}
\end{proof}
\begin{mdframed}
Immediately, following from \myref{Theorem}{Slm}, we see that if $f$ is a pointwise limit of some sequence of measurable function $(f_n)$, then $f$ is also a measurable function. In addition to the pointwise limit, if $f:X\rightarrow [-\infty,\infty]$ is measurable, then both its positive and negative parts  $f^+,f^-:X\rightarrow [0,\infty]$ 
\begin{align*}
f^+(x)\triangleq \max \set{f(x),0}\text{ and }f^-(x)\triangleq  - \min  \set{f(x),0}
\end{align*}
are measurable, since 
\begin{align*}
f^+=\limsup_{n\to\infty} h_n\text{ and }f^-=-\liminf_{n\to\infty} h_n
\end{align*}
where $h_n:X\rightarrow [-\infty,\infty]$ is defined by 
\begin{align*}
h_n(x)\triangleq \begin{cases}
  f(x)& \text{ if $n$ is odd }\\
  0& \text{ if $n$ is even }
\end{cases}
\end{align*}
In view of integration, perhaps the most important property of measurable function is that we can approximate them using measurable simple functions. By the term \textbf{simple function}, we merely mean function whose range is a set of finite elements. 
\end{mdframed}
\begin{theorem}
\label{Approximation of nonnegative function by increasing simple function}
\textbf{(Approximation of nonnegative function by increasing simple function)} Given $f:X\rightarrow [0,\infty]$, there exists an increasing sequence of simple function $s_n:E\rightarrow \R_0^+$ such that $s_n \nearrow f$. If $f$ is measurable, we can require $s_n$ to be also measurable.
\end{theorem}
\begin{proof}
Because  $f$ is non-negative, we can well define $s_n:X\rightarrow \R_0^+$ by 
\begin{align*}
s_n(x)\triangleq \begin{cases}
  \frac{k-1}{2^n}& \text{ if there exists some $k\in \set{1,\dots ,n2^n}$ such that }\frac{k-1}{2^n}\leq f(x)< \frac{k}{2^n}\\
  n& \text{ if $f(x)\geq n$ }
\end{cases}
\end{align*}
Some tedious effort follows to show that $s_n\nearrow f$ and when  $f$ is measurable, $s_n$ are measurable. 
\end{proof}
\section{Carath√©odory's Extension Theorem}
\label{caratheodory_extension_theorem}
\begin{abstract}
In this section, we introduce a general process to construct measure on $X$. The process involve first inducing an outer measure from a pre-measure on some weaker structure $S$, and then restricting the outer measure onto a subfamily that contain exactly all the subset that "sharply cut" all the other subsets of $X$. The subfamily, as we shall prove, is a sigma-algebra. This extending-restricting process is known mostly by the name of Carath√©odory Extension Theorem, and the rigorous  definition of "sharply cut" is known by the name of Carath√©odory criterion. The selected 'some weaker structure' $S$, which we begin out extension from, is a semi-ring. Although as long as $S$ contain the empty set, the process works, in the sense that one can generate a measure with pre-measure $\mu:S\rightarrow [0,\infty]$, to have the generated measure agree with  $\mu$ on $S$, some necessary condition needs to be satisfied, and the axioms of semi-ring, not equivalent to some other popular choices that also suffice, e.g., ring or quasi-semi-ring, suffices to be a set of necessary conditions.\\

Note that in this section, if we write $\mu (A)$ without specifying whether $A$ is in the domain of  $\mu$, we mean that the statement always hold true as long as $A$ is in the domain of $\mu$, and note that the difference between the term \textbf{measure space} and measurable space lies in that the latter is not equipped with a measure yet. 
\end{abstract}
\begin{mdframed}
Given a collection $S$ of subsets of  $X$ containing the empty set, we say  $\mu:S\rightarrow [0,\infty]$ is a \textbf{pre-measure} (or \textbf{content}) on $(X,S)$ if 
\begin{enumerate}[label=(\alph*)] 
  \item $\mu(\varnothing)=0$ (null empty set) 
  \item $A \subseteq B \implies \mu (A) \leq \mu (B)$ (monotone)
  \item $\mu\big(\bigsqcup_{n\inn} E_n \big)=\sum_{n\inn} \mu (E_n)$ (countably additive, or $\sigma$-additive)
\end{enumerate}
and say $\mu$ is a \textbf{measure} if $S$ is a $\sigma$-algebra on $X$. Note that if $S$ is closed under relative complement, e.g., $S$ is a ring or any stronger structure, then monotone is implied by countable additive. Now, with the hints given below, one can check straightforward that if $S$ is a semi-ring, we have 
\begin{enumerate}[label=(\alph*)]
\label{pop_meas}
  \item $\mu (A_1 \sqcup   \cdots \sqcup   A_n)= \mu (A_1) + \cdots + \mu (A_n)$ (finitely additive)
  \item $\mu \big(\bigcup_{n \in J} A_n\big)\leq \sum_{n\in J} \mu (A_n)$, for each finite or countable $J$.   \item $A_n \nearrow A \implies \mu (A_n)\nearrow \mu \big(A\big)$.  
  \item $A_n\searrow A\text{ and }\mu (A_1)<\infty \text{ and }S\text{ is a $\sigma$-algebra }\implies \mu (A_n)\searrow \mu \big(A\big)$  
\end{enumerate}
Hints: Properties (b) and (c) are proved by letting $B_n\triangleq A_n \setminus (A_{n-1}\cup \cdots \cup  A_1)$; and property (d) is proved by letting $B_n\triangleq A_1 \setminus A_n,\forall n\inn$ and the equation 
\begin{align*}
\mu (A_1)-\lim_{n\to \infty} \mu (A_n)&=\lim_{n\to \infty}\mu (A_1)-\mu (A_n)\\
&=\lim_{n\to \infty} \mu (B_n)\\
(\text{property (c) is used here})\hspace{0.5cm}&=\mu (\bigcup_{n=1}^{\infty}B_n)=\mu (A_1 \setminus \bigcap_{n=1}^{\infty}A_n)=\mu (A_1)- \mu (\bigcap_{n=1}^{\infty}A_n)
\end{align*}
Note that our proof for property (d) require $A_1$ to be of finite measure in last step. 
\end{mdframed}
\begin{mdframed}
Now, suppose $S$ is a semi-ring and $\mu:S\rightarrow [0,\infty]$ is a pre-measure on $(X,S)$. This section address the question: Is there a unique extension of $\mu$ onto $\sigma (S)$? The answer is indeed affirmative: The extension always exists, and if $\mu$ is $\sigma$-finite, the extension is unique. 
While extensions of pre-measures can be constructed from structures weaker than a semi-ring, we focus on semi-rings here, as they are the starting points in common applications, e.g., Lebesgue-Stieltjes measure.\\

We first extend $\mu$ from $S$ onto $R(S)$. Since each element of $R(S)$ is a union of some finite pair-wise disjoint sub-family of $S$, as \customref{RGbS}{we proved before}, for each $A=\bigsqcup_{j=1}^{n_a}A_j \in R(S)$, we can assign $\mu(A)\triangleq \sum_{j=1}^{n_a}\mu (A_j)$. Such assignment is well-defined, as one can check using  
\begin{align*}
\bigsqcup_{j=1}^{n_a}A_j = \bigsqcup _{k=1}^{n_b}B_k \implies A=\bigsqcup_{j,k} A_j \cap B_k \text{ where }A_j\cap B_k \in S 
\end{align*}
At this point, one should check $\mu$ remains countably additive after the extension onto $R(S)$ by dissecting $A=\bigsqcup A_n \in R(S)$ into a countable disjoint union of element in $S$. \\



We now give definition to \textbf{outer measure}, and shows that \customref{Piom}{given any pre-measure $\mu$ on some semi-ring $S$ of subsets of $X$, there exists outer measure  $\mu^*$ on $X$ such that  $\mu^*\text{ and }\mu$ agrees on $S$}.
\end{mdframed}
\begin{definition}
\textbf{(Definition of outer measure)} Given a set $X$, by an  \textbf{outer measure}, we mean a function $\nu :2^X\rightarrow [0,\infty]$ such that 
\begin{enumerate}[label=(\alph*)]
  \item $ \nu  (\varnothing)=0$ (null empty set)
  \item $A\subseteq \bigcup_{n\inn} A_n\implies \nu  (A)\leq  \sum \nu (A_n)$ (countably subadditive)
\end{enumerate}
\end{definition}
\begin{mdframed}
Equivalently, one can replace countably subadditive with the following two axioms   
\begin{enumerate}[label=(\alph*)]
  \item $A \subseteq B \implies \nu (A) \leq \nu  (B)$  (monotone)
  \item $\nu  (\bigcup_{n\inn} A_n )\leq \sum \nu (A_n)$  
\end{enumerate}

\end{mdframed}
\begin{theorem}
\label{Piom}
\textbf{(Pre-measure on semi-ring induces outer measure)} Given a pre-measure $\mu$ on some semi-ring $S$ of subsets of $X$, if we define $\mu^*:2^X\rightarrow [0,\infty]$ by
\begin{align*}
\mu^*(E)\triangleq \inf \bset{\sum_n \mu (T_n):E \subseteq \bigcup _n T_n\text{ and }T_1,T_2,\dots \in S}\text{ where $\inf \varnothing= \infty$ }
\end{align*}
Then 
\begin{align*}
  \mu^*\text{ is an outer measure agreeing with $\mu$ on $R(S)$}
\end{align*}
\end{theorem}
\begin{proof}
  It is clear $\mu^*(\varnothing)=0\text{ and }A\subseteq B \implies \mu^*(A)\leq \mu^*(B)$. It remains to prove that for arbitrary $B_n$ we have 
\begin{align*}
  \vi{\mu^* \Big(\bigcup_n B_n \Big)  \leq \sum_n \mu^* (B_n)}
\end{align*}
If  $\sum_n \mu^*(B_n)=\infty$, the proof is trivial. We from now suppose $\sum_n \mu^*(B_n)< \infty$. Fix $\epsilon $. We prove 
\begin{align*}
  \vi{\mu^*\Big(\bigcup _n B_n \Big)\leq \sum_n \mu^* (B_n)+\epsilon }
\end{align*}
Because $\mu^*(B_n)<\infty$ for each $n\inn$, we know for each $n\inn$ there exists an countable cover $(T_{n,k})_{k\inn}\subseteq R$ of $B_n$ such that 
\begin{align*}
\sum_k \mu (T_{n,k}) \leq \mu^*(B_n)+\epsilon (2^{-n}) 
\end{align*}
It is clear that  $\set{T_{n,k}:n,k \inn}$ is a countable cover of $\bigcup_n B_n$, we now see 
\begin{align*}
  \mu^*\Big(\bigcup_n B_n \Big)\leq  \sum_{n,k} \mu (T_{n,k})&= \sum_n \sum_k \mu(T_{n,k})\hspace{0.5cm}(\because \text{\customref{FTfDS}{Fubini's Theorem for Double Series}})\\
&\leq \sum_n \mu^*(B_n)+ \epsilon (2^{-n})= \sum_n \mu^*(B_n)+ \epsilon \vdone
\end{align*}
At this point, one should check that even if we first extend $\mu$ onto $R(S)$ before doing the same procedure, we would still have the same outer measure. Now, because for each $T \in R(S)$, we clearly have $\mu^*(T)\leq \mu (T)$, to finish the proof it only remains to see for each cover $T_n \subseteq R(S)$ of $T$, we have
\begin{align*}
\mu (T)\leq \sum_n \mu (T\cap T_n)\leq \sum_n \mu (T_n)
\end{align*}
\end{proof}
\begin{mdframed}
  So far, we have proved that given a semi-ring $S$ and a pre-measure $\mu:S\rightarrow [0,\infty]$, there exist some outer measure agree with $\mu$ on $R(S)$. One may wish to ask if such outer measure, an extension of the pre-measure $\mu$, is unique? The answer is negative even in the most trivial case, as the \customref{Nou}{example below} shows. In fact, the outer measure induced in \myref{Theorem}{Piom} is called the \textbf{maximal outer extension}, in the sense that if $\nu$ is an outer measure agreeing with  $\mu$ on $R(S)$, then  $\nu(E)\leq \mu^*(E),\forall E\subseteq X$, as one can check straightforwardly. Also, one can check that it make no difference if we first extend $\mu$ from $S$ onto  $R(S)$ or not, before we extend $\mu$ to the maximal outer measure $\mu^*$. 
\end{mdframed}
\begin{Example}{\textbf{(Non-uniqueness of outer extension)}}{}
\label{Nou}
\begin{align*}
X\triangleq \set{1,2}\text{ and }R\triangleq \set{\varnothing,X}
\end{align*}
Define the pre-measure $\mu:R\rightarrow [0,\infty]$ and an outer measure $\nu:\power{X}\rightarrow [0,\infty]$ agreeing with $\mu$ on $S$ by 
\begin{align*}
\mu (A)\triangleq \begin{cases}
  0& \text{ if $A=\varnothing$ }\\
  1& \text{ if $A=X$ }
\end{cases}\text{ and }\nu(A)\triangleq \begin{cases}
  \mu (A)& \text{ if $A\in R$ }\\
  \frac{1}{2}& \text{ if $A\not\in R$ }
\end{cases}
\end{align*}
One can check that the maximal outer extension $\mu^*$ disagree with $\nu$ on $\power{X}\setminus R$.
\end{Example}
\begin{mdframed}
It is important to note that the final step, \myref{Theorem}{Omi}, inducing measure from outer measure, is a general Theorem and operate independently of \myref{Theorem}{Piom}. This distinction is crucial because many constructions of measures, such as the Hausdorff measure, begin by defining an outer measure explicitly, rather than inducing it from a weaker structure like a semi-ring.
\end{mdframed}
\begin{theorem}
\label{Omi}
\textbf{(Outer measure induce measure)} Given an outer measure $\mu^*$ on $X$, if we let 
\begin{align*}
  \mathcal{A}\triangleq \set{A \subseteq X:\mu^*(E)=\mu^*(E\cap A)+ \mu^*(E\setminus A)\text{ for all $E\subseteq X$ }} 
\end{align*}
then $\mathcal{A}$ is a sigma-algebra on $X$ and  $\mu^*|_{\mathcal{A}}:\mathcal{A}\rightarrow [0,\infty]$ is a measure. 
\end{theorem}
\begin{proof}
Because of the following facts 
\begin{enumerate}[label=(\alph*)]
  \item $A\setminus B=A\cap B^c$
  \item $A\cup B=(A^c \cap B^c)^c$ 
  \item \customref{pop_sig}{property (c) of sigma-algebra}
\end{enumerate}
we can reduce the problem into proving the following propositions 
\begin{enumerate}[label=(\roman*)]
  \item $\mathcal{A}$ is closed under complement. 
  \item $X\in \mathcal{A}$.
  \item $\mathcal{A}$ is closed under finite intersection. 
  \item $\mu^*|_{\mathcal{A}}$ is countably additive. (Thus at least form a pre-measure)
  \item $\mathcal{A}$ is closed under countable disjoint union. 
\end{enumerate}
We will prove the propositions sequentially, as the proof of each subsequent proposition may rely on the proofs of the preceding ones. The first two are straightforward to check. We now prove $\vi{\mathcal{A}\text{ is closed under finite intersection}}$. Fix $A,B \in \mathcal{A}\text{ and }E\subseteq X$, we wish to show 
\begin{align*}
\vi{\mu^*(E)=\mu^*(E\cap A\cap B)+\mu^*\big(E\setminus (A\cap B)\big)}
\end{align*}
Because $B \in \mathcal{A}$, we can "sharply cut $E\setminus (A\cap B)$ by $B$"; that is 
 \begin{align}
\label{sharp}
\mu^*(E\setminus (A\cap B))=\mu^*\big((E\cap B)\setminus A\big)+\mu^*(E\setminus B)
\end{align}
\myref{Equation}{sharp} together with $A,B \in \mathcal{A}$ then give us 
\begin{align*}
\mu^*(E\cap A\cap B)+\mu^*\big(E\setminus (A\cap B)\big)&=\mu^*(E\cap A\cap B)+\mu^*\big((E\cap B)\setminus A \big)+ \mu^*(E\setminus B)\\
&=\mu^*(E\cap B)+\mu^*(E\setminus B)=\mu^*(E)\vdone
\end{align*}
We now prove the \olive{claim: For each pairwise disjoint sequence $(A_n)\subseteq \mathcal{A}$ and $E\subseteq X$, we have the equality} 
\begin{align*}
\olive{\mu^*\Big(E\cap \bigsqcup_n A_n \Big)=\sum_n \mu^*(E\cap A_n)}
\end{align*}
The countably subadditivty of $\mu^*$ trivially implies the inequality  
\begin{align*}
\mu^*\Big(E\cap \bigsqcup_n A_n\Big)\leq \sum_n \mu^*(E\cap A_n)
\end{align*}
Using induction and the fact $(A_n)\subseteq \mathcal{A}$, we see that 
\begin{align*}
\mu^*(E\cap \bigsqcup_n A_n)= \sum_{n=1}^N \mu^*(E\cap A_n) + \mu^*\Big(E\cap \bigsqcup_{n=N+1}^{\infty}A_n \Big)\text{ for all $N \inn$ }
\end{align*}
Then since $\mu^*$ has codomain $[0,\infty]$, we see 
\begin{align*}
\mu^*(E\cap \bigsqcup_n A_n)\geq \sum_{n=1}^N \mu^*(E\cap A_n)\text{ for all $N \inn$ }
\end{align*}
This implies the desired inequality $\mu^*(E\cap \bigsqcup_n A_n)\geq \sum_{n=1}^{\infty}\mu^*(E\cap A_n)$. $\odone$\\

Using $E\triangleq \bigsqcup_n A_n$, one see our \olive{claim} implies that $\mu^*|_{\mathcal{A}}$ is countably additive. Lastly, we prove $\blue{\mathcal{A}\text{ is closed under countable disjoint union}}$. Fix a pairwise disjoint sequence $(A_n)\subseteq \mathcal{A}$ and $E\subseteq X$. We wish to prove
\begin{align*}
\blue{\mu^*(E)\geq \mu^*(E\cap \bigsqcup_n A_n)+\mu^*(E\setminus \bigsqcup_n A_n)}
\end{align*}
 Using induction and the fact $(A_n)\subseteq \mathcal{A}$, we see that 
\begin{align*}
\mu^*(E\cap \bigsqcup_{n=1}^N A_n)=\sum_{n=1}^N \mu^*(E\cap A_n)\text{ for all $N\inn$ }
\end{align*}
Then our \olive{claim} give us 
\begin{align}
\label{mue}
\mu^*(E\cap \bigsqcup_{n=1}^NA_n) \to \mu^*(E\cap \bigsqcup_n A_n)\text{ as $N \to \infty$ }
\end{align}
Now, because of the identity $F\cup G=(F^c\cap G^c)^c$, proposition (i) and (iii) have shown $\mathcal{A}$ is closed under finite union. This implies $\bigsqcup_{n=1}^N A_n\in \mathcal{A}$ for all $N\inn$, which, together with monotone of $\mu^*$, give 
\begin{align}
  \mu^*(E\cap \bigsqcup_{n=1}^N A_n)+\mu^*(E\setminus \bigsqcup_n A_n)&\leq \mu^*(E\cap \bigsqcup_{n=1}^{N}A_n)+ \mu^*(E\setminus \bigsqcup_{n=1}^N A_n)\notag\\
&\leq \mu^*(E) \text{ for all $N\inn$ }\label{mue2}
\end{align}
\myref{Equation}{mue} and \myref{Equation}{mue2} gives the desired inequality. $\bdone$
\end{proof}
\begin{mdframed}
\myref{Theorem}{Piom} together with \myref{Theorem}{Omi} shows that for each pre-measure $\mu$ on semi-ring $S$, we can induce a measure $\mu^*|_{\mathcal{A}}$ agreeing with $\mu$ on $S$. Although this result is correct, it doesn't show $S \subseteq \mathcal{A}$, which is necessary to refer to $\mu^*|_{\mathcal{A}}$ as an extension. However, it is straightforward to verify that $S \subseteq \mathcal{A}$ using the definition of a semi-ring and the property that $\mu^*(T) = \mu(T)$ for all $T \in S$.\\

Moving forward, here are some additional concepts we will utilize in subsequent sections: Given a measurable space $(X,\Sigma,\mu)$, we define a measurable set $N \in \Sigma$ as a \textbf{null set} if $\mu(N) = 0$. Moreover, we say that $\mu$ is a \textbf{complete measure} if every subset of a null set is also measurable. It is important to note that every measure induced by an outer measure is complete, as one can readily verify.
\end{mdframed}
\begin{mdframed}
Lastly, we wish to ask: Given a sigma-algebra $\Sigma$ containing $S$ and contained by $\mathcal{A}$, under what condition, is Carath√©odory the only extension of $\mu$ onto $\Sigma$ ? \\

This question turns out to have direct connection with the notion named '$\sigma$-finite'. Given a pre-measure space $(X,S,\mu)$, we say $\mu$ is \textbf{$\sigma$-finite} if there exists a countable cover $(A_n)\subseteq S$ of $E$ such that  $\mu (A_n)<\infty$ for all $n\inn$. It is clear that   \begin{enumerate}[label=(\alph*)]  
  \item $\mu$ is $\sigma$-finite only if $S$ form a cover of $X$. 
  \item If $\mu:S\rightarrow [0,\infty]$ is $\sigma$-finite and $\nu $ is a pre-measure defined on a class larger than $S$, such that $\nu $ agree with $\mu$ on $S$, then  $\nu $ is also $\sigma$-finite.
\end{enumerate}
\end{mdframed}
\begin{theorem}
\textbf{(Uniqueness of Extension)} Suppose 
\begin{enumerate}[label=(\alph*)]
  \item $(X,S,\mu)$ is a pre-measure space, and $S$ is a semi-ring.
  \item $\mathcal{A}$ is the induced sigma-algebra in \myref{Theorem}{Omi}  
  \item $\Sigma\subseteq \mathcal{A}$ is a sigma-algebra containing $S$  
  \item $\nu :\Sigma \rightarrow [0,\infty]$ is a measure agreeing with $\mu$ on $S$
\end{enumerate}
We have 
\begin{align}
\label{vmu1}
\nu (A)\leq \mu^*(A)\text{ for all $A\in \Sigma$ }
\end{align}
and, if $\mu$ is $\sigma$-finite, we have
\begin{align}
\label{vmu2}
\nu (A)=\mu^*(A)\text{ for all $A \in \Sigma$  }
\end{align}
\end{theorem}
\begin{proof}
The \myref{inequality}{vmu1} follows from the greatest-lower-bound definition of induced outer-measure,  \customref{pop_meas}{property (b) of measure} and monotone of measure.\\

From now on, we suppose $\mu$ is $\sigma$-finite. Before we prove \myref{Equation}{vmu2}, we first prove the \olive{claim: for each  $A\in \Sigma$, there exists a pairwise disjoint sequence $(D_n)\subseteq R(S)\subseteq \Sigma$ such that $A\subseteq \bigsqcup_n D_n$ and $\nu (D_n)=\mu^*(D_n)<\infty$ for all $n\inn$}.\\

Because $\mu$ is $\sigma$-finite, there exists a sequence $(A_n)\subseteq S$ such that $A\subseteq \bigcup_n A_n$ and $\mu (A_n)<\infty,\forall n\inn$. Define $D_1\triangleq A_1$ and  $D_n\triangleq A_n \setminus (A_1 \cup  \cdots \cup A_{n-1})$ for all  $n>2$. Noting the
\customref{RGbS}{structure of $R(S)$}, it is clear that $D_n$ is a pairwise disjoint sequence  in $R(S)$. It is also clear that $A\subseteq \bigcup A_n = \bigsqcup  D_n$. Fix $n\inn$. It remains to prove 
\begin{align*}
\olive{\nu  (D_n)=\mu^*(D_n)<\infty}
\end{align*}
The inequality $\mu^*(D_n)<\infty$ follows from $\mu^*(D_n)\leq \mu (A_n)<\infty$, and the equation $\nu (D_n)=\mu^*(D_n)$ follows from $R(S)\subseteq \Sigma$ and $R(S)\subseteq \mathcal{A}$. $\odone$\\  

Note that for all $n\inn$, $A\cap D_n \in \Sigma \subseteq \mathcal{A}$. Now, since 
\begin{align*}
\nu  (A)=\sum_{n=1}^{\infty} \nu (A\cap D_n)\text{ and }\mu^*(A)=\sum_{n=1}^{\infty} \mu^*(A\cap D_n)
\end{align*}
To prove \myref{Equation}{vmu2}, it only remains to prove $\vi{\nu  (A\cap D_n)=\mu^*(A\cap D_n),\forall n\inn}$.\\

Because $\nu $ is a measure and $A\cap D_n \in \mathcal{A}$, we have the equations set 
\begin{align}
\begin{cases}
  \nu  (A\cap D_n)=\nu  (D_n)-\nu  (D_n\setminus A)\\  
\mu^*(A\cap D_n)=\mu^*(D_n)-\mu^*(D_n\setminus A)
\end{cases}
\end{align}
The proof then follows from the facts 
\begin{enumerate}[label=(\alph*)]
  \item $\nu (D_n)=\mu^*(D_n)<\infty$ 
  \item $\nu  (A\cap D_n)\leq \mu^*(A\cap D_n)\text{ and }\nu (D_n\setminus A)\leq \mu^*(D_n\setminus A)$ $\vdone$
\end{enumerate}
Note that fact (b) can be checked straightforwardly. 
\end{proof}
\section{Lebesgue Measure}
\begin{abstract}
This section demonstrate a construction of Lebesgue measure with usage of \customref{caratheodory_extension_theorem}{Carath√©odory‚Äôs Extension Theorem}. For discussion of non Lebesgue measurable set, see \customref{Vitali Set}{Vitali set}, and to see that continuous function may not preserve Lebesgue measurability, see \customref{Cantor-Lebesgue Function}{Cantor-Lebesgue function}.  
\end{abstract}
\begin{mdframed}
It is clear that the collection $S$ of half-open interval $\prod [a_j,b_j)$ form a semi-ring. If we define a volume function $\mu : S\rightarrow [0,\infty]$ on  $S$ by 
 \begin{align*}
\mu \Big( \prod_{j=1}^d [a_j,b_j) \Big)\triangleq  \prod_{j=1}^d (b_j-a_j)
\end{align*}
we see that the empty set is indeed null and $\mu$ is indeed monotone. To check that $\mu$ form a pre-measure, it remains to prove 
\begin{align*}
\prod_{j=1}^d [a_j,b_j)= \bigsqcup_{n=1}^{\infty} \prod_{j=1}^d [a_{j,n},b_{j,n}) \implies \mu \Big(\prod_{j=1}^d [a_j,b_j) \Big)= \sum_{n=1}^{\infty} \mu \Big(\prod_{j=1}^d [a_{j,n},b_{j,n}) \Big)
\end{align*}
To check 
\begin{align}
\mu \Big(\prod_{j=1}^d [a_j,b_j) \Big) \geq \sum_{n=1}^{\infty} \mu \Big(\prod_{j=1}^d [a_{j,n},b_{j,n}) \Big)
\end{align}
one fix arbitrary $N$ and cut  $\prod_{j=1}^d [a_j,b_j)$ into finite amount of grids to see  
\begin{align*}
\mu \Big(\prod_{j=1}^d [a_j,b_j) \Big) \geq \sum_{n=1}^{N} \mu \Big(\prod_{j=1}^d [a_{j,n},b_{j,n}) \Big)
\end{align*}
To check 
\begin{align}
\label{58}
\mu \Big(\prod_{j=1}^d [a_j,b_j) \Big)\leq \sum_{n=1}^{\infty} \mu \Big(\prod _{j=1}^d [a_{j,n},b_{j,n}) \Big)
\end{align}
one fix $\epsilon$ and have each $\epsilon _n$ satisfy 
\begin{align*}
  \mu \Big(\prod_{j=1}^d [a_{j,n}-\epsilon_n , b_{j,n}+\epsilon_n) \Big) \leq (1+\epsilon )\mu  \Big(\prod_{j=1}^d [a_{j,n},b_{j,n}) \Big)
\end{align*}
Then because  
\begin{align*}
\bset{\prod_{j=1}^d (a_{j,n}-\epsilon_n , b_{j,n}+\epsilon_n )\subseteq \R^d:n\inn}\text{ form an open cover for compact }\prod_{j=1}^d [a_j,b_j]
\end{align*}
there exists finite subset $I \subseteq \N$ such that 
\begin{align*}
\prod_{j=1}^d [a_j,b_j]\subseteq \bigcup_{n \in I} \prod_{j=1}^d [a_{j,n}-\epsilon _n, b_{j,n}+\epsilon _n)
\end{align*}
This then give us 
\begin{align*}
\mu \Big(\prod_{j=1}^d [a_j,b_j)\Big)\leq \sum_{n \in I}\mu \Big(\prod_{j=1}^d [a_{j,n}-\epsilon _n, b_{j,n}+\epsilon _n) \Big) \leq (1+\epsilon )\sum_{n=1}^{\infty} \mu \Big(\prod_{j=1}^d [a_{j,n},b_{j,n}) \Big)
\end{align*}
which give us \myref{Equation}{58}. Having proved that the volume function $\mu : S\rightarrow [0,\infty]$ is a pre-measure, we can \customref{Piom}{induce an outer measure on $\R^d$ by }
\begin{align*}
\abso{E}_e \triangleq \inf \bset{ \mu (T_n) : E \subseteq \bigcup_ n T_n \text{ and }T_1,T_2,\dots  \in S}
\end{align*}
and \customref{Omi}{restrict the outer measure into a measure by letting the collection $\mathcal{L}(\R^d)$ of Lebesgue measurable set to be} 
\begin{align*}
\mathcal{L}(\R^d)\triangleq \set{A \subseteq \R^d: \forall E \subseteq \R^d, \abso{E}_e= \abso{E\cap A}_e + \abso{E\cap A^c}_e}
\end{align*}
Notably, if we define the class $K_n$ of half-open dyadic cubes by 
\begin{align*}
K_n \triangleq \bset{\prod_{j=1}^{d} [\frac{m_j}{2^n}, \frac{m_j+1}{2^n})\subseteq \R^d: m_j \inz \text{ for all }j}
\end{align*}
We see that for each $p$ in some open set $U$, there exists some small enough half-open dyadic cube $Q\in K_n$ (for some $n$) such that $p \in Q \subseteq U$. Then, since the collection $\bigcup K_n$ of half-open dyadic cubes is countable, we see $U$ is in the sigma-algebra  $\mathcal{L}(\R^d)$. 
\end{mdframed}
\begin{theorem}
\label{Equivalent Definition of Lebesgue Measurability}
\textbf{(Equivalent Definition of Lebesgue Measurability)} The following statements are equivalent. 
\begin{enumerate}[label=(\alph*)]
  \item $E\in \mathcal{L}(\R^d)$. 
  \item For all $\epsilon $, there exists some open $O$ containing $E$ such that  $\abso{O\setminus E}_e< \epsilon $. 
  \item For all $\epsilon $, there exists some closed $F$ contained by $E$ such that $\abso{E\setminus F}_e<\epsilon $. 
  \item $E= H \setminus Z$ for some null $Z$ and some $H \in G_\delta$.  
  \item $E=H \cup Z$ for some null $Z$ and some $H\in F_\sigma$. 
\end{enumerate}
\end{theorem}
\begin{proof}
Since $\R^d$ is  $\sigma$-finite, to prove from (a) to (b), we may WLOG suppose $\abso{E}<\infty$; the proof then follows from the definition of $\abso{E}_e$, the trick of enlarging the cover to appropriate size and that open set is measurable. The proof for $(\text{b})\implies (\text{d})\implies (\text{a})$ is straightforward. The proof for $(\text{b})\implies (\text{c})$ is observation of $O \setminus E^c= E\setminus O^c$, and the proof for  $(\text{c})\implies (\text{e})\implies (\text{a})$ is again straightforward.
\end{proof}
\begin{mdframed}
  Given a topological space $X$, we say the smallest sigma-algebra containing the topology is the  \textbf{Borel sigma-algebra}, and we refer to element of the Borel sigma-algebra as \textbf{Borel sets}. In the case of $\R^d$, the Borel sigma-algebra is in fact quite "dense", in the sense that every set can be approximated by some Borel sets from outside. More precisely, we can associate every set $E\subseteq \R^d$ a set $H$ in the class of  $G_\delta$ containing $E$ such that $\abso{E}_e=\abso{H}$. To see this is true, observe that if $\abso{E}_e=\infty$, then $H=\R^d$ suffices, and if  $\abso{E}_e<\infty$, then we can use definition of outer measure to construct some open set $O$ containing $E$ such that $\abso{O}\leq \abso{E}_e + \frac{1}{n} $.  Note that this of course does not implies every set of finite outer measure is measurable, sine our inequality is 
  \begin{align*}
  \abso{O}\leq \abso{E}_e + \abso{O\setminus E}_e
  \end{align*}
  With this approximation in mind, we may generalize \customref{pop_meas}{the third property of measurable set} in the following sense.  
\begin{align*}
E_n \nearrow E \implies \abso{E_n}_e\nearrow \abso{E}_e\text{ for arbitrary $E_n,E$ in $\R^d$ }
\end{align*}
\end{mdframed}
\begin{theorem}
\textbf{(Lebesgue Outer Measure of Increasing Sequence)} For arbitrary increasing sequence $E_n\subseteq \R^d$, we have 
\begin{align*}
E_n \nearrow E \implies  \abso{E_n}_e \nearrow \abso{E}_e
\end{align*}
\end{theorem}
\begin{proof}
It is clear that 
\begin{align*}
\lim_{n\to \infty} \abso{E_n}_e \leq \abso{E}_e 
\end{align*}
We are required to prove the converse. Let $H_n$ be a sequence of sets in  $\R^d$ such that 
 \begin{align*}
E_n\subseteq H_n \text{ and }\abso{E_n}_e=\abso{H_n}
\end{align*}
Define $V_n\subseteq \R^d$ by 
\begin{align*}
V_n \triangleq \bigcap_{k=n}^{\infty}H_k 
\end{align*}
Let $V\triangleq \bigcup V_n$. By definition,  $E_n \subseteq V_n \subseteq H_n$. This implies  
\begin{align*}
  E= \bigcup E_n \subseteq \bigcup V_n = V
\end{align*}
which give us 
\begin{align*}
\abso{E}_e \leq \abso{V} = \lim_{n\to \infty} \abso{V_n}
\end{align*}
The proof then follows from noting 
\begin{align*}
\abso{E_n}_e\leq \abso{V_n} \leq \abso{H_n} \implies  \abso{V_n}= \abso{E_n}_e
\end{align*}
\end{proof}
\begin{mdframed}

\label{dyadic cube}

It is worth pointing out that every open set can be expressed as a countable disjoint union of half-open dyadic cubes by an algorithmic construction. This implies that if we write  
\begin{align*}
U_1\triangleq \bigsqcup_n Q_{n,1}\text{ and }U_2 \triangleq \bigsqcup_n Q_{n,2}
\end{align*}
where $Q_{n,1},Q_{n,2}$ are half-open dyadic cubes, we have 
\begin{align*}
\abso{U_1\times U_2}=\left|\bigsqcup_{n,k}Q_{n,1}\times Q_{k,2}\right|=\sum_{n,k} \abso{Q_{n,1}} \abso{Q_{k,2}}= \sum_n \abso{Q_{n,1}}\sum_{k} \abso{Q_{k,2}}= \abso{U_1}\abso{U_2}
\end{align*}
This with \customref{Equivalent Definition of Lebesgue Measurability}{open set approximation definition of Lebesgue measurability}  and the fact $\R^d$ is  $\sigma$-finite tell us that the product of measurable set is indeed measurable. \\

Another property of Lebesgue measure people often use is that Lebesgue measure is both \textbf{inner regular} and \textbf{outer regular}. By a measure $\mu$ being outer regular, we mean the measure $\mu$ is defined on some topological space $X$ and for all measurable $A$, we have 
 \begin{align*}
\mu (A)= \inf \set{\mu (G):A\subseteq G\text{ and }G\text{ is open and measurable }}
\end{align*}
and by a measure $\mu$ being inner regular, we mean the measure $\mu$ is defined on some topological space $X$ and for all measurable  $A$, we have 
 \begin{align*}
\mu (A)= \sup \set{\mu (K):K \subseteq A\text{ and }K\text{ is compact and measurable }}
\end{align*}

\end{mdframed}
\begin{theorem}
\textbf{(Lipschitz Continuity Preserve Lebesgue Measurability)} If $E\in \mathcal{L}(\R^d)$ and $f:\R^d\rightarrow \R^m$ is $K$-Lipschitz, where $d\leq m$, then  $f(E)\in \mathcal{L}(\R^m)$ .
\end{theorem}
\begin{proof}
  Write $E=H\cup Z$ where $H\in F_\sigma$ and $Z$ is null. Because $f(E)=f(H)\cup f(Z)$, to show $f(E)$ is measurable, we can reduce the problem into proving \vi{$f$ maps $F_\sigma$ into $F_\sigma$} and \blue{$f$ maps null set to null set}.\\

By splitting $\R^d$ into a countable union of compact set 
 \begin{align*}
\R^d = \bigcup_{n\inn} \overline{B_n (\textbf{0})}
\end{align*}
We see that each closed set in $\R^d$ can be expressed as a countable union of compact sets. Then because \customref{topological properties}{continuous function preserve compactness}, we see $f$ must map closed set into class $F_\sigma$ and thus map class $F_\sigma$ into $F_\sigma$. $\vdone$\\

Fix $\epsilon $. Because $f:\R^d\rightarrow \R^d$ is $K$-Lipschitz, we know all its components  $f_1,\dots ,f_d:\R^d \rightarrow \R$  are also $K$-Lipschitz. Because $Z$ is measurable and \customref{dyadic cube}{open set can be expressed as a disjoint countable union of dyadic half-open cubes}, we can let $T_n \subseteq S$ be a countable cover of $Z$ consisting of dyadic half-open cubes such that 
\begin{align*}
\sum_n \abso{T_n}<  \frac{\epsilon }{ K^m d^{\frac{m}{2}}}
\end{align*}
Now, note that for each half-open cube $T_n$, if we write 
\begin{align*}
T_n=\prod_{j=1}^d [a_j,a_j+h)
\end{align*}
We clearly have 
\begin{align*}
\operatorname{diam}T_n= h \sqrt{d} \text{ and }\abso{T_n}=h^d
\end{align*}
This give us the relationship between diameter and volume of a cube by 
\begin{align*}
\operatorname{diam}T_n=  \abso{T_n}^{\frac{1}{d}}d^{\frac{1}{2}}
\end{align*}
Because $f_k:\R^d \rightarrow \R$ are all $K$-Lipschitz, we know $f_k(T_n)$ can be contained by an interval of length $K(\operatorname{diam}T_n)=K\abso{T_n}^{\frac{1}{d}}d^{\frac{1}{2}}$. This then tell us that $f(T_n)$ can be contained by closed cube of side length $K(\operatorname{diam}T_n)$, and give us the estimation  
\begin{align*}
\abso{f(T_n)}_e\leq K^m(\operatorname{diam}T_n)^m= K^m d^{\frac{m}{2}} \abso{T_n}^{\frac{m}{d}}\leq K^md^{\frac{m}{2}}\abso{T_n}
\end{align*}
where the last inequality hold true because $d\leq m$ and WOLG we can suppose $\abso{T_n}\leq 1$. We now see that 
\begin{align*}
\abso{f(Z)}_e \leq \sum_n \abso{f(T_n)}_e \leq K^md^{\frac{m}{2}}\sum_n \abso{T_n}< \epsilon \bdone
\end{align*}
\end{proof}
\begin{mdframed}
Although Lipschitz function from $\R^d$ to  $\R^m$ preserve Lebesgue measurability when $d\leq m$, the proposition does not hold true when $d>m$.  Simple counter example can be constructed with projection $\pi:\R^2\rightarrow \R$ and the set $V \times \set{0}$ where $V$ is the \customref{Vitali Set}{Vitali set}. \\

  Ii is worth pointing out that our development of Theory of Lebesgue measure mostly depend on the abstract  \customref{caratheodory_extension_theorem}{Carath√©odory‚Äôs Extension Theorem}, which is indeed quite unorthodox. If one wish to instead develop the Theory of Lebesgue measurability starting at \customref{Equivalent Definition of Lebesgue Measurability}{the second definition of Lebesgue measurability}, one may follows the following steps 
\begin{enumerate}[label=(\roman*)] 
\item Prove that the outer measure is countably subadditive using \customref{Piom}{$\epsilon 2^{-k}$ trick}.
\item Prove that compact interval is measurable and have the expected measure. The former is proved by finding a small enough open interval and cover the difference naively, and the latter is proved by Hiene-Borel. 
  \item Prove that the class of measurable set is closed under countable union.  (This step is independent of step 2)
  \item Conclude that finite union of non-overlapping compact interval is measurable, and prove that it have the expected measure by Hiene-Borel. 
\end{enumerate}
With these knowledge, we then can 
\begin{enumerate}[label=(\alph*)]
  \item Prove that disjoint compact sets have positive distance. 
  \item Prove that $d(E_1,E_2)>0 \implies \abso{E_1\cup E_2}_e = \abso{E_1}_e + \abso{E_2}_e$.   
  \item Prove that compact set is measurable by expressing the difference $G\setminus F$  of the small enough open set $G$ containing compact $F$ to be a countable union of non-overlapping compact intervals.
  \item Prove that closed set is measurable by expressing the closed set is a countable union of compact sets.
\end{enumerate}
and 
\begin{enumerate}[label=(\roman*)]
\item Prove that null set is measurable.  
  \item Prove that complement $E^c$ of measurable set $E$ is measurable by expressing $E^c$ as a countable union of closed set and a null set.
  \item Prove the \customref{Equivalent Definition of Lebesgue Measurability}{third equivalent definition of Lebesgue measurability}.  
  \item Use \customref{Equivalent Definition of Lebesgue Measurability}{third equivalent definition of Lebesgue measurability} to conclude that if measurable $E_n$ are bounded and disjoint then $\abso{\bigcup E_n}= \sum \abso{E_n}$. 
  \item Generalize the forth step to $E_n$ that may not be bounded. 
\end{enumerate}
\end{mdframed}

\chapter{Pathological Example}
\section{Topologist's Sine Curve}
\label{Topologist's Sine Curve}
\begin{mdframed}
Topologist's since curve is a famous pathological example of topological object being connected but not path-connected. One construction is setting 
\begin{align*}
  T\triangleq \bset{ (x, \sin (x^{-1}))\inr^2: x\in (0,1]}\cup \set{\textbf{0}}
\end{align*}
\end{mdframed}
\begin{theorem}
\textbf{(Topologist's Since Curve is Connected)} 
\begin{align*}
T\text{ is connected }
\end{align*}
\end{theorem}
\begin{proof}
  Let $f:T \rightarrow \set{0,1}$ be continuous. Define continuous $g:(0,1]\rightarrow T$ by 
\begin{align*}
g(x)\triangleq (x, \sin (x^{-1}))
\end{align*}
\customref{Equivalent Definitions of Connected}{Equivalent Definitions of Connected} says that $f\circ g$ is a constant.  Note that $g$ is a bijection between $(0,1]$ and $T \setminus \set{\textbf{0}}$, so $g^{-1}:T\setminus \set{\textbf{0}}\rightarrow (0,1]$ exists. We may now conclude $f$ is constant on  $T \setminus \set{\textbf{0}}$, since
\begin{align*}
f(p)=f \circ  g \circ  g^{-1}(p)\text{ for all }p \in T \setminus \set{\textbf{0}}
\end{align*}
 To see $f$ is constant on the whole  $T$, just observe 
\begin{align*}
f(\textbf{0})= \lim_{n\to \infty} f(\frac{1}{n\pi } , \sin (n \pi ))
\end{align*}
\end{proof}
\begin{theorem}
\textbf{(Topologist's Since Curve is not path-connected)}  
\begin{align*}
T \text{ is not path-connected }
\end{align*}
\end{theorem}
\begin{proof}
Assume for a contradiction that $f:[0,1]\rightarrow T$ is a continuous map such that 
\begin{align*}
f(0)=\textbf{0} \text{ and }f(1)= (1, \sin 1)
\end{align*}
Note that for all $\alpha \in (0,1)$, $f$ must pass through  $(\alpha , \sin (\alpha ^{-1}))$, otherwise the connected image of $f$ is separated by the two open half plane defined by $x=\alpha $, which is impossible. In other words, $f$ is surjective. We have shown $T= f([0,1])$ is compact.  Therefore, if we define 
\begin{align*}
L_n \triangleq T \cap \set{(x,y)\inr^2: x\leq \frac{1}{n}\text{ and }y=1}
\end{align*}
We see $L_n$ is a decreasing sequence of non-empty compact sets. This cause a contradiction since the intersection of $L_n$ is clearly empty.     
\end{proof}
\section{Long Line}
\label{Long Line}
\begin{mdframed}
Let $X$ be some set and let  $\leq $ be a relation on $X$. We say  $\leq $ is a \textbf{total order} if 
\begin{enumerate}[label=(\roman*)]
  \item $x\leq x$ for all $x\in X$ (Reflexive)
  \item $x\leq y\text{ and }y\leq z \implies x\leq z$ (Transitive) 
  \item $x\leq y\text{ and }y\leq x \implies x=y$ (Antisymmetric) 
  \item For all $x,y\in X$, either $x\leq y$ or $y\leq x$.  
\end{enumerate}
Let $\leq $ be a total order of $X$. By the \textbf{order topology} of $X$, we mean the topology generated by the basis 
\begin{align*}
\bset{[\min X, x]\subseteq X: x \in X}\cup \bset{(x,y)\subseteq X: x,y\in X} \cup  \bset{[x,\max X]:x \in X}
\end{align*}
where the first collection is considered empty if $\min  X$ does not exist, and the third collection is considered empty if $\max X$ does not exist. It is easy to check that the referred basis is closed under finite intersection, thus justifying our practice of calling it a basis. It is also easy to check that the definition of order topology is compatible with definition of subspace topology. Now, let $\omega_1$ be the first uncountable ordinal, let $X\triangleq  \omega_1 \times (0,1)$, and define 
\begin{align*}
  (x,y)< (x',y')\overset{\triangle}{\iff} x< x' \text{ or }(x=x'\text{ and }y<y')
\end{align*}
Equipping $X$ with the order topology, we say  $X$ is the   \textbf{long line}. To see that $X$ is locally Euclidean, observe for each  $(\alpha ,t_0 ) \in X$, its neighborhood $\set{(\alpha ,t) \in X: t \in (0,1)}$ is homeomorphic to the unit open interval. This fact also shows that the long line is Hausdorff.
\end{mdframed}
\begin{theorem}
\textbf{(Long Line is not second countable)} 
\begin{align*}
X\text{ is not second countable }
\end{align*}
\end{theorem}
\begin{proof}
Let $A=\set{(\alpha_n,t_n):n\inn}$ be a countable subset of $X$. Note that each ordinal $\alpha_n \in \omega_1$ as a set is countable because $\omega_1>\alpha_n$ is the first uncountable ordinal. It then follows that $\omega_1$ strictly contain the union of   $\alpha_n$. Therefore, we may find $\beta  \in \omega_1$ such that $\alpha_n< \beta $ for all $n$. Observe that the element $(\beta , \frac{1}{2})\in X$ has a neighborhood $\set{(\beta ,t)\in X: t\in (0,1)}$ that does not contain any element of $A$.  This implies that $A$ is not dense. We have shown no countable subset of $X$ is dense, i.e., $X$ is not separable.  This shows $X$ is not second countable. 
\end{proof}
\begin{mdframed}
In most practice, one requires topological manifolds to be 
\begin{enumerate}[label=(\roman*)]
  \item Locally Euclidean.
  \item Hausdorff. 
  \item Second Countable.   
\end{enumerate}
Because Euclidean space are both Hausdorff and second countable, one may question the necessity of these two requirement. Long line shows that second countable is indeed necessary. For a topological space being locally Euclidean and second countable but not Hausdorff, see "a line with two origins". 
\end{mdframed}
\section{Weierstrass Function}
\label{Weierstrass Function}
\begin{mdframed}
Suppose $0<a<1,b$ is an odd integer, and 
\begin{align}
\label{ab1}
  ab> 1 + \frac{3 \pi }{2}
\end{align}
Define for each $n\inn,f_n:\R\rightarrow \R$ by  
\begin{align*}
f_n(x)\triangleq a^n \cos (b^n \pi  x)
\end{align*}
Note that 
\begin{align*}
\sum_{n} (\sup \abso{f_n})= \sum_{n} a^n \inr
\end{align*}
So if we define a  \textbf{Weierstrass function} $f:\R \rightarrow \R$ by  
\begin{align*}
f(x)\triangleq \sum_{n=0}^{\infty} f_n(x)
\end{align*}
the function is well-defined and continuous by Weierstrass $M$-Test. Fix $x_0\inr$. We wish to show $f$ is not differentiable at  $x_0$.   For each $n$ let $j_n$ be the unique integer satisfying 
\begin{align*}
\frac{-1}{2}<b^n x_0 -j_n \leq \frac{1}{2}
\end{align*}
Define 
\begin{align*}
x_n \triangleq \frac{j_n-1}{b^n} \text{ and }\alpha_n \triangleq b^nx_0-j_n
\end{align*}
It is obvious that $x_n$ converges to  $x_0$. Our goal here is to show 
\begin{align*}
 \frac{f(x_n)-f(x_0)}{x_n-x_0}\text{ diverges. }
\end{align*}
Compute 
\begin{align*}
\frac{f(x_n)-f(x_0)}{x_n-x_0} &= \sum_{m=0}^{\infty} a^m \cdot \frac{\cos (b^m\pi  x_n)- \cos (b^m \pi x_0)}{x_n-x_0} \\
                              &=\sum_{m=0}^{n-1} (ab)^m \frac{\cos (b^m \pi  x_n)-\cos (b^m \pi  x_0)}{b^m (x_n-x_0)} \\
                              &+ \sum_{m=0}^{\infty} a^{n+m} \cdot \frac{\cos (b^{n+m}\pi  x_n)-\cos (b^{n+m}\pi  x_0)}{x_n-x_0}
\end{align*}
\end{mdframed}
\begin{theorem}
\label{Abub}
\textbf{(An absolute upper bound for the first sum)} For each $n\inn$, we have  
\begin{align*}
  \abso{\sum_{m=0}^{n-1} (ab)^n \cdot  \frac{\cos (b^m \pi x_n)- \cos (b^m \pi  x_0)}{b^m (x_n-x_0)}} \leq  \frac{\pi (ab)^n}{ab-1}
\end{align*}
\end{theorem}
\begin{proof}
Using trigonometric identity, we may give bound to each terms of the first sum   
\begin{align*}
  \abso{\frac{\cos (b^m\pi x_n)-\cos (b^m \pi  x_0)}{b^m(x_n-x_0)}}= \abso{- \pi  \sin (b^m \pi  \frac{x_m+x_0}{2})\cdot \frac{\sin (b^m \pi  \frac{x_n-x_0}{2}  )}{b^m \pi \frac{x_n-x_0}{2}  }} \leq \pi 
\end{align*}
This give us a bound for the first sum
\begin{align*}
  \abso{\sum_{m=0}^{n-1} (ab)^n \cdot  \frac{\cos (b^m \pi x_n)- \cos (b^m \pi  x_0)}{b^m (x_n-x_0)}} \leq \pi  \sum_{m=0}^{n-1}(ab)^m= \frac{\pi (ab)^n}{ab-1}
\end{align*}
\end{proof}
\begin{theorem}
\label{Ablb}
\textbf{(An absolute lower bound for the second sum)} For each $n\inn$, we have
\begin{align*}
  \abso{\sum_{m=0}^{\infty} a^{n+m} \cdot \frac{\cos (b^{n+m}\pi  x_n)-\cos (b^{n+m}\pi  x_0)}{x_n-x_0}}\geq (ab)^n \frac{2}{3}
\end{align*}
\end{theorem}
\begin{proof}
Because $b$ is odd, we have  
\begin{align*}
\cos (b^{n+m}\pi  x_n)= \cos (b^m(j_n-1)\pi )= (-1)^{j_n-1}
\end{align*}
And have 
\begin{align*}
\cos (b^{n+m}\pi  x_0)= \cos (b^m (\alpha_n+j_n)\pi )=(-1)^{j_n} \cos (b^m \alpha_n \pi )
\end{align*}
We may now simplify 
\begin{align*}
\sum_{m=0}^{\infty}a^{n+m} \cdot  \frac{\cos (b^{n+m}\pi  x_n)-\cos (b^{n+m}\pi  x_0)}{x_n-x_0}= (ab)^n (-1)^{j_n}\sum_{m=0}^{\infty}\frac{1+ \cos (b^m \alpha _n\pi )}{1+ \alpha _n }a^m 
\end{align*}
Because $\frac{-1}{2}<\alpha_n\leq \frac{1}{2}$, we know 
\begin{align*}
\text{ All terms of }\sum_{m=0}^{\infty}\frac{1+ \cos (b^m \alpha _n\pi )}{1+ \alpha _n }a^m \text{ are non-negative. }
\end{align*}
This give us 
\begin{align*}
  \abso{\sum_{m=0}^{\infty}a^{n+m} \cdot  \frac{\cos (b^{n+m}\pi  x_n)-\cos (b^{n+m}\pi  x_0)}{x_n-x_0}}= (ab)^n \sum_{m=0}^{\infty}\frac{1+ \cos (b^m \alpha _n\pi )}{1+ \alpha _n }a^m 
\end{align*}
To close out the proof, just observe 
\begin{align*}
m=0 \implies  \frac{1+ \cos (b^m \alpha _n\pi )}{1+ \alpha _n }a^m  \geq  \frac{2}{3}
\end{align*}
\end{proof}
\begin{mdframed}
\myref{Theorem}{Abub} together with \myref{Theorem}{Ablb} give us the absolute lower bound 
\begin{align*}
  \abso{\frac{f(x_n)-f(x_0)}{x_n-x_0}}\geq (ab)^n \Big[\frac{2}{3}-\frac{\pi }{ab-1}\Big]
\end{align*}
Which by \myref{hypothesis}{ab1} implies the sequence indeed diverges.
\end{mdframed}
\begin{thebibliography}{9}  % The argument {9} defines the width of the numbering (adjust as needed).

\bibitem{weierstrass1872}
Monatsberichte der K√∂niglich Preussischen Akademie der Wissenschaften zu Berlin, 
page 560, 1872. Brief mention of Weierstrass's presentation on 18 July: 
"Hr. Weierstrass las √ºber stetige Funktionen ohne bestimmte Differentialquotienten" 
(Mr. Weierstrass read [a paper] about continuous functions without definite [i.e., well-defined] derivatives). 
Note: The paper itself was not published in the Monatsberichte.
\end{document}
