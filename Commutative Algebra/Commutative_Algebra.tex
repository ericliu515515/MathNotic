\documentclass{report}
\input{preamble}
\input{macros}
\input{letterfonts}

\title{Notes on Algebraic Geometry and Commutative Algebra}
\author{Eric Liu}
\date{}
\begin{document}
\maketitle
\newpage% or \cleardoublepage
% \pdfbookmark[<level>]{<title>}{<dest>}
\pdfbookmark[section]{\contentsname}{toc}

\tableofcontents
\pagebreak
\chapter{Local Ring, Integral Closure, and Noether} 
\section{Rings}
The precise meaning of the term \textbf{ring} varies across different books, depending on the context and purpose. In this note, the multiplication of a ring is always associative, commutative, and has an identity. The additive identity is denoted by $0$. From the axioms, we can straightforwardly show that $x\cdot 0 = 0$ for all $x$. Consequently, the multiplicative and additive identities are always distinct unless the ring contained only one element, and in such case, we say the ring is the \textbf{zero ring}. By \textbf{ring homomorphisms}, we mean mappings between two rings respecting addition\footnote{Respecting addition immediately implies respecting $0$ and negation.}, multiplication, and multiplicative identity. Clearly, inverse of a bijective ring homomorphism is also a ring homomorphism.\\  


An \textbf{ideal} of a ring $R$ is an additive subgroup $I$ such that $ar \in I$ for all $a \in I,  r \in R$, or equivalently, the kernel of some ring homomorphism. To see the equivalency, one simply construct the \textbf{quotient ring}\footnote{Consider the equivalence relation on $R$ defined by  $x\sim  y\overset{\triangle}{\iff } x-y \in I$} $R\quotient I$, under which the quotient map $\pi: R \rightarrow R \quotient  I$ is a surjective ring homomorphism whose kernel is the ideal $I$. Remarkably, the mapping defined by 
 \begin{align*}
\operatorname{Ideal }J\text{ of $R$ that contains }I \mapsto \set{[x]\in R\quotient I: x\in J}
\end{align*}
forms a bijection between the collection of the ideals of $R$ containing  $I$ and the collection of the ideals of $R\quotient I$. This fact is commonly referred to as the \textbf{correspondence theorem} for rings. \label{ctfr}\\

A \textbf{unit} is an element that has a multiplicative inverse. Under our initial requirement that rings are commutative, for a non-zero ring $R$ to be a \textbf{field}, we only need all non-zero elements of $R$ to be units, or equivalently, the only ideals of $R$ to be $\set{0}$ or $R$ itself.\\

We use the term \textbf{proper} to describe strict set inclusion. By a \textbf{maximal ideal}, we mean a proper ideal $I$ contained by no other proper ideals, or equivalently\footnote{By the Correspondence Theorem for Rings.}, a proper ideal $I$ such that $R\quotient I$ is a field.\\

A \textbf{zero-divisor} is an element $x$ that has some non-zero element $y$ such that  $xy=0$. Again, under our initial requirement that rings are commutative, for a non-zero ring $R$ to be an  \textbf{integral domain}, we only need all non-zero elements to be zero-divisors. By a \textbf{prime ideal}, we mean a proper ideal $I$ such that the product of two elements belongs to $I$ only if one of them belong to $I$, or equivalently, a proper ideal $I$ such that $R\quotient I$ is an integral domain.  \\


There are many binary operations defined for ideals.  Given two ideals $I$ and $S$, we define their \textbf{sum} and \textbf{product} by 
\begin{align}
\label{IS}
I+S \triangleq \set{\sum_{\text{finite}}x+y \in R: x \in I \text{ and }y \in S}\quad IS\triangleq \set{\sum_{\text{finite}}xy \in R: x \in I \text{ and } y \in S}
\end{align}
Note that the ideal multiplications are indeed distributive over addition, and they are both associative, so it make sense to write something like $I_1+I_2+I_3$ or $I_1I_2I_3$. Clearly, the intersection of ideals is still ideal, while the union of ideals generally are not\footnote{However, $I \cup  J$ generates $I+J$.}. Moreover, we define their \textbf{quotient} by 
\begin{align}
\label{Iq}
  (I:S)\triangleq \set{x \in R: xS\subseteq I}
\end{align}
To simplify matters, we write $(I:x)$ instead of $(I:\langle x\rangle )$. \\ 

For all subsets $S$ of some ring $R$, we may \textbf{generate} an ideal by setting it to be the set of all finite sum  $\sum rs$ such that $r\in R$ and $s \in S$, or equivalently, the smallest ideal of $R$ containing $S$. An ideal is called \textbf{principal} and denoted by $\langle x\rangle $ if it can be generated by a single element $x$. \\


An element $x$ is called \textbf{nilpotent} if $x^n=0$ for some  $n\inn$. The set of all nilpotent elements obviously form an ideal, which we call \textbf{nilradical} and denote by $\operatorname{Nil}(R)$. Here, we give a nice description of the nilradical. 
\begin{theorem}
\label{EDfN}
\textbf{(Equivalent Definition for Nilradical)} We use the term \textbf{spectrum} of $R$ and the notation  $\operatorname{spec}(R)$ to denote the set of prime ideals of $R$. We have 
 \begin{align*}
\operatorname{Nil}(R)=\bigcap \operatorname{spec}(R)
\end{align*}
\end{theorem}
\begin{proof}
$\operatorname{Nil}(R)\subseteq \bigcap \operatorname{Spec}(R)$ is obvious. Suppose $x \in \bigcap \operatorname{Spec}(R) \setminus  \operatorname{Nil}(R)$. Let $\Sigma$ be the set of ideals $I$ such that $x^n\not\in I$ for all $n>0$. Because unions of chains in $\Sigma$ belong to $\Sigma$ and $0 \in \Sigma$, by Zorn's Lemma, there exists some maximal element $I \in \Sigma$. Because $x\not \in I$, to close out the proof, we only have to show $I$ is prime.\\

Let $yz \in I$. Assume for a contradiction that $y\not\in I$ and $z\not\in I$. By maximality of $I$, both ideal $I+ \langle y\rangle$ and ideal $I+\langle z\rangle$ do not belong to $\Sigma$. This implies $x^n \in I+ \langle y\rangle$ and $x^m \in I + \langle z\rangle $ for some $n,m>0$, which cause a contradiction to $I \in \Sigma$, since $x^{n+m} \in I + \langle yz\rangle =I$. 
\end{proof}
Let $I$ be an ideal of the ring $R$. By the term \textbf{radical} of $I$, we mean 
\begin{align*}
\sqrt{I}\triangleq \set{ x \in R : x^n \in I \text{ for some } n > 0 }
\end{align*}
which is equivalent to the preimage of $\operatorname{Nil}(R \quotient  I)$ under the quotient map and equivalent\footnote{This follows from the fact that the correspondence between the ideals of $R$ and the ideals of $R \quotient  I$ can be restricted to a bijection between $\operatorname{Spec}(R)$ and $\operatorname{Spec}(R \quotient  I)$.} to the intersection of all prime ideals of $R$ that contain $I$. \label{raed}\\

It should be noted that there is a "less is more" philosophy in our wording and notations for product, quotient and radical of ideals. For any ideal $I,Q$, we have 
 \begin{align*}
IQ \subseteq I \subseteq \sqrt{I}  \text{ and }I \subseteq (I:Q)
\end{align*}
For ease in the section on fraction of rings and modules, we close this section by introducing two concept. Let $f:A\rightarrow B$ be some ring homomorphism. If $E$ is a subset of $A$, we call the ideal in  $B$ generated by $f(E)$ the \textbf{extension} of $E$, which we denote by  $E^e$. If  $E$ is a subset of  $B$, we call the ideal in  $A$ generated by  $f^{-1}(E)$ the \textbf{contraction} of $E$, which we denote by $E^c$. Clearly, if  $E$ is an ideal in $B$, then $E^c=f^{-1}(E)$. 
\section{Modules and Algebra}
Let $A$ be some ring. By an $A$-\textbf{module}, we mean an abelian group $M$ together with a $A$-scalar multiplication. Given another $A$-module $N$, we use the notation $\operatorname{Hom}(M,N)$ to denote the space of \textbf{$A$-module homomorphism} from  $M$ to $N$. It is clear that the obvious assignment of $A$-scalar multiplication and addition makes $\operatorname{Hom}(M,N)$ a $A$-module.\\

Let $M$ be an $A$-module, and let $N$ be a subset of  $M$. We say $N$ is a $A$-\textbf{submodule} if $N$ forms an additive subgroup and is closed under $A$-scalar multiplication. Just like how ideals is proved to always be the kernel of some ring homomorphism, to see submodules is always the kernel of some $A$-module homomorphism, we simply construct the \textbf{quotient module} $M\quotient N$, and get the quotient map $\pi :M\rightarrow M\quotient N$ that is a $A$-module homomorphism with kernel $N$, and get also the bijection
\begin{align*}
A\text{-submodule $S$ of  $M$ that contains  $N$}\mapsto \set{[x]\in M \quotient N: x \in S}
\end{align*}
 between the collection of the $A$-submodules of $M$ that contains  $N$ and the collection of the $A$-submodule of  $M\quotient  N$. This is called the \textbf{correspondence theorem} for modules.\\


Again similar to the other algebraic structure, we have the \textbf{third isomorphism theorem} for modules. Let $N \subseteq M \subseteq L$ be three modules. It is obvious that $M\quotient N$ is a subset of $L\quotient N$, and moreover, $M\quotient  N$ forms a submodule of  $L\quotient N$. We have an isomorphism $\pfi:(L\quotient N)\quotient (M\quotient N)\to L\quotient M$ defined by $(l+N)+ (M\quotient N)\mapsto l+M$. To simplify matters, from now on we use the term "module" in place of "$A$-module" until the end of this section. \\




Let $\set{M_i:i \in I}$ be a collection of modules. If we give the Cartesian product $\prod M_i$ the obvious addition and multiplication, then we say it is the \textbf{direct product}. It is clear that 
\begin{align*}
\bset{(x_i)_{i \in I} \in \prod_{i \in I}M_i:x_i \neq 0\text{ for finitely many }i.}
\end{align*}
forms a submodule of the direct product. We denote this submodule by $\bigoplus M_i$, and call it the  \textbf{direct sum}.  Obviously, if the index set $I$ is finite, then the direct product and direct sum are identical.  \\


Given a subset $E$ of  $M$, clearly its \textbf{span}, the set of finite sum $\sum rx$ where $x \in E$, forms a submodule. Interestingly, depending on the view one wish to take, there are multiple common notation for spans of $E$. To view modules as generalization of vector spaces, one may write  $\operatorname{span}(E)$, to view module as generalizations of rings, one may write $\langle E\rangle$, and to adapt the algebraic convention, one may also write $\sum_{x \in E}Ax$. \\ 


We say  $M$ is \textbf{finitely generated} if $M$ can be spanned by some finite set $\set{x_1,\dots ,x_n}\subseteq M$. Clearly,  $(a_1,\dots ,a_n)\mapsto \sum a_ix_i$ forms a surjective homomorphism from $A^n$ to $M$, which implies $M$ is isomorphic to some quotient of $A^n$. This behavior, albeit seems unimportant for now, will later prove to be useful for it guarantees that finitely generated module over rings of some certain properties carry the same property \footnote{For example, this shows that finitely generated module over Noetherian ring is Noetherian. See \myref{Theorem}{cpoN}}. Quite often, we are required to consider \textbf{extension of scalars}: Given ring homomorphism $f:A\rightarrow B$ and $B$-module  $N$, we can give $N$ an $A$-module by setting $an\triangleq f(a)n$.
\begin{theorem}
\label{Fgas}
\textbf{(Finite generation and scalar extension)} Given ring homomorphism $f:A\rightarrow B$ and some finitely generated $B$-module  $N$, if $B$ is finitely generated as an  $A$-module under extension of scalar, then $N$ is also finitely generated as an  $A$-module under extension of scalar. 
\end{theorem}
\begin{proof}
If $b_1,\dots ,b_k$ generate $B$ over $A$ and  $n_1,\dots ,n_r$ generate $N$ over  $B$, then clearly $\set{b_i n_j \in N: i \in \set{1,\dots ,k} \text{ and } j\in \set{1,\dots ,r}}$ generates $N$ over $A$. 
\end{proof}




By the \textbf{Jacobson radical} $\operatorname{Jacob}(A)$ of $A$, we mean the intersection of all maximal ideals of $A$. Given an ideal $\mathfrak{a}$ of $A$, some  module $M$ and some  submodule  $N$ of  $M$, the \textbf{product $\mathfrak{a}N$ of the submodule $N$  by the ideal $\mathfrak{a}$} is the submodule of $M$ consisting of finite sum $\sum a_i x_i$ where $a_i \in \mathfrak{a}$ and $x_i \in N$. We may now state  \customref{Nakayama}{Nakyama's Lemma}. 
\begin{lemma}
\label{Nakayama}
\textbf{(Nakayama)} Let $M$ be a finitely generated $A$-module, and  $\mathfrak{a}$ an ideal of $A$ contained by the Jacobson radical of  $A$. If  $\mathfrak{a}M=M$, then $M=0$. 
\end{lemma}
\begin{proof}
Assume for a contradiction that $M\neq 0$. Let $u_1,\dots ,u_n$ be a minimal set of generators of $M$. Write $u_n=a_1u_1+\cdots + a_n  u_n$ where $a_i \in \mathfrak{a}$. This give us 
\begin{align}
\label{1anun}
  (1-a_n) u_n= a_1u_1+\cdots + a_{n-1}u_{n-1}
\end{align}
We know that $1-a_n$ must be a unit, otherwise by Zorn's Lemma\footnote{Note that union of proper ideals is always proper because otherwise one of them would have contain $1$.} there exists a maximal ideal $\mathfrak{m}$ containing  $1-a_n$, which is impossible since  $a_n \in \operatorname{Jacob}(A)$ would have implies $1 \in \mathfrak{m}$. Because $1-a_n$ is a unit, by \myref{Equation}{1anun}, $u_n$ can be generated by  $\set{u_1,\dots ,u_{n-1}}$, a contradiction to the minimality of $\set{u_1,\dots ,u_n}$. 
\end{proof}
There are multiple ways to give definition to the term \textbf{algebra $B$ over ring $A$}, and the easiest way is to say we have a ring homomorphism $A \overset{f}{\longrightarrow } B $, which induce the scalar product: 
\begin{align*}
a(b)\triangleq f(a)b
\end{align*}
Let $B$ be an $A$-algebra. Because there are three structures on $B$, one shall be careful when one says "$B$ is finitely generated," since  $B$ can be finitely generated as a ring, as an $A$-module, or even as an  $A$-algebra. If we say $B$ is \textbf{finitely generated as an $A$-algebra},  we mean that there exists some $b_1,\dots , b_n\in B$ such that $B=(f(A))[b_1,\dots ,b_n]$. 
\section{Localization and local ring}
\label{Lalr}
Let $A$ be a ring. We say  $S\subseteq A$ is a \textbf{multiplicatively closed subset} of $A$ if  $S$ contains $1$ and is closed under multiplication. We say a ring $B$ and a homomorphism $f:A\rightarrow B$ satisfies the \textbf{universal property of localization of $A$ by $S$} if
\begin{enumerate}[label=(\alph*)]
  \item $f(S) \subseteq B^{\times}$. 
  \item $f(a)=0\implies as=0$  for some $s \in S$. 
  \item $B= \set{f(a)f(s)^{-1}: a \in A\text{ and }  s \in S}$
\end{enumerate}
Suppose $A\overset{f}{\longrightarrow }B$ satisfies the universal property of localization of $A$ by  $S$. A routine check shows that  for any ring homomorphism $g:A\rightarrow C$ that maps $S$ into  $C^{\times}$, the ring homomorphism $\tilde{g}:B\rightarrow C$ well-defined by $\tilde{g}(f(a)f(s)^{-1})\triangleq g(a)g(s)^{-1} $ is the unique ring homomorphism such that the diagram
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJBIl0sWzIsMCwiQiJdLFsyLDIsIkMiXSxbMCwyLCJnIiwyXSxbMCwxLCJmIl0sWzEsMiwiXFx0aWxkZXtmfSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
\[\begin{tikzcd}
	A && B \\
	\\
	&& C
	\arrow["f", from=1-1, to=1-3]
	\arrow["g"', from=1-1, to=3-3]
	\arrow["{\tilde{g}}", dashed, from=1-3, to=3-3]
\end{tikzcd}\]
commutes.\footnote{ Just like the universal properties for other mathematical objects, one many check that if  $A\overset{f'}{\longrightarrow }B'$ also satisfies the universal property of localization of $A$ by $S$, then $B \cong B'$, and the proof is exactly the same as the ones for other mathematical objects.} By \textbf{localization of $A$ by $S$}, we merely mean some $A\overset{f}{\longrightarrow }B$ that satisfies the universal property of localization of $A$ by  $S$, and, moreover, we always use the notation  $S^{-1}A$ to denote $B$, and refer to $f$ as the \textbf{canonical ring homomorphism}. Adopting the convention of denoting $f(a)f(s)^{-1} \in S^{-1}A$ by $\frac{a}{s}$, we see that we have the intuitive:
\begin{align*}
 \frac{a}{s}+ \frac{b}{t}= \frac{at+bs}{st} \text{ and } \frac{a}{s}\cdot \frac{b}{t}=\frac{ab}{st}
\end{align*}
and by universal property 
\begin{align*}
\frac{a}{s}= \frac{a'}{s'} \iff  (as'-a's)s''=0\text{ for some }s'' \in S. 
\end{align*}
Just as our fraction notation suggest, if $T\subseteq S$ is another multiplicatively closed subset of $A$, then clearly the canonical ring homomorphism $A\longrightarrow S^{-1}A$ maps $T$ into  $(S^{-1}A)^{\times}$. This by universal property implies the existence and uniqueness of a ring homomorphism from $T^{-1}A$ to $S^{-1}A$ that forms a commutative triangle with the two canonical ring homomorphism. This ring homomorphism have the obvious action, and will be how we are going to identify $T^{-1}A $ as a subring of $S^{-1}A$\footnote{One may check that this ring homomorphism is indeed injective.}. Similarly, given $A \longhookrightarrow B$, universal property implies the existence and uniqueness of a ring homomorphism from $S^{-1}A$ to $S^{-1}B$ that forms a commutative triangle with $A\longrightarrow S^{-1}A$ and the composited $A \longhookrightarrow B \longrightarrow S^{-1}B$, which have the obvious action and will be how we are going to identify $S^{-1}A$ as a subring of $S^{-1}B$.\\


There are even more reason to adopt the fractional notation for localizations: observe 
\begin{enumerate}[label=(\roman*)]
  \item $S^{-1}A=0$ if $0 \in S$, aligning with our intuition that $0$ can never be a denominator. 
  \item $(\set{1})^{-1}A\cong  A$. 
  \item $as^{-1} \in S^{-1}A$ is a unit in $S^{-1}A$ if and only if $a \in S$. 
\end{enumerate}


Let $A$ be a ring, and let $S \subseteq A$ be a multiplicatively closed subset that contains no zero-divisors. Clearly, in $S^{-1}A$, 
\begin{align*}
\frac{a}{s}=\frac{b}{t}\text{ if and only if }at=bs. 
\end{align*}
This implies that the canonical ring homomorphism $A \longrightarrow  S^{-1}A$ is injective, which is how we are going to identify $A$ as a subring of $S^{-1}A$. Using the universal property, we see that the  \textbf{field of fraction} $\operatorname{Frac}(D)\triangleq (D^*)^{-1}D$ is the smallest field that contains a subring isomorphic to $D$. \\




Let $A$ be some ring,  $S\subseteq A$ an multiplicatively closed subset, and $M$ an  $A$-module. By the \textbf{localization of $M$ by  $S$}, we mean an $A$-module $S^{-1}M$ and a canonical $A$-module homomorphism $M\overset{j}{\longrightarrow } S^{-1}M$ that satisfies the \textbf{universal property for localization of $M$ by  $S$}: 
\begin{enumerate}[label=(\alph*)]
  \item Every $s \in S$ acts invertibly on $S^{-1}M$. 
  \item For any $A$-module $N$ on which all $s \in S$ acts invertibly and any $A$-module homomorphism $M\overset{g}{\longrightarrow } N$, there exists a unique $A$-module homomorphism $\tilde{g} $ such that the diagram 
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJBIl0sWzIsMCwiQiJdLFsyLDIsIkMiXSxbMCwyLCJnIiwyXSxbMCwxLCJmIl0sWzEsMiwiXFx0aWxkZXtmfSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
\[\begin{tikzcd}
	M && S^{-1}M \\
	\\
	&& N
	\arrow["j", from=1-1, to=1-3]
	\arrow["g"', from=1-1, to=3-3]
	\arrow["{\tilde{g}}", dashed, from=1-3, to=3-3]
\end{tikzcd}\]
commutes.
\end{enumerate}
Just like localization of ring, we adopt the fractional notation $y\triangleq \frac{m}{s}$ for $sy=j(m)$, which give us the intuitive: 
\begin{align*}
\frac{m}{s}+ \frac{n}{t}= \frac{mt+ns}{st}\text{ and } a \cdot \frac{m}{s}
\end{align*}
and also by universal property: 
\begin{align*}
\frac{m}{s}= \frac{m'}{s'}\iff (ms'-m's)s''=0\text{ for some }s'' \in S. 
\end{align*}
Again, if $T \subseteq S$ is another multiplicatively closed subset of $A$, if there exists injective ring homomorphism $A \longhookrightarrow B$, and if there exists $A$-submodule $N \subseteq M$, then the obvious action is what the universal property will induce, thus being how we identify one as subsets of another.\\ 

Contrary to ring localization, there is one more thing to note about localization of module. Given some $A$-module $N$ on which all  $s \in S$ act invertibly, we may give $N$ the \textbf{canonical}  $S^{-1}A$-module structure\footnote{It is the obvious one.}, and this is how we are going to view $S^{-1}M$ as an $S^{-1}A$-module. Also, given an $A$-module homomorphism  $M \overset{f}{\longrightarrow }N$, one may check that the unique $A$-module homomorphism $S^{-1}f$ from $S^{-1}M$ to $S^{-1}N$ that  forms a commutative triangle with $M\longrightarrow S^{-1}M$ and $M \overset{f}{\longrightarrow }N \longrightarrow S^{-1}N$ have the action $\frac{a}{s}\mapsto \frac{f(a)}{s}$, and is thus also an $S^{-1}A$-module homomorphism. Note that given
\begin{align*}
M' \overset{f}{\longrightarrow } M \overset{g}{\longrightarrow }M ''
\end{align*}
Clearly, we have 
\begin{align*}
S^{-1}(g \circ f)=S^{-1}g \circ S^{-1}f
\end{align*}
In other words, localization forms a functor. 
\begin{theorem}
\textbf{(Localization is an exact functor)} If 
\begin{align*}
M' \overset{f}{\longrightarrow }M \overset{g}{\longrightarrow }M''
\end{align*}
is exact, then 
\begin{align*}
S^{-1}M' \xrightarrow {S^{-1}f} S^{-1}M \xrightarrow{S^{-1}g}  S^{-1}M''
\end{align*}
is also exact. 
\end{theorem}
\begin{proof}
Clearly, we only have to prove $\operatorname{Ker}(S^{-1}g) \subseteq \operatorname{Ker}(S^{-1}f)$. Suppose $\frac{m}{s} \in \operatorname{Ker}(S^{-1}g)$. We have $tg(m)=0$ for some $t \in S$. This implies $tm \in \operatorname{Ker}g= \operatorname{Im}f$. Suppose $f(m')=tm$. This now give us $\frac{m}{s}= S^{-1}f(\frac{m'}{st})$. 
\end{proof}



If $f\in A$, we often write $A_f$ in place of $(\set{f^n:n\geq 0})^{-1}A$, and if $\mathfrak{p}$ is a prime ideal of  $A$, we often just call  $A_\mathfrak{p}\triangleq (A\setminus \mathfrak{p})^{-1}A$ the \textbf{localization of $A$ at $\mathfrak{p}$}. Clearly, every nontrivial localizations of integral domain $A$, even not at primes, are still integral domain, so it make sense to talk the fraction field of $S^{-1}A$. Moreover, a routine, long, and tedious proof from universal property, shows that the obvious map from $\operatorname{Frac}(S^{-1}A)$ to $\operatorname{Frac}(A)$ is an isomorphism, so we usually treat $S^{-1}A$ as a subring of $\operatorname{Frac}(A)$ containing $A$. In fact, one have $A=\bigcap A_\mathfrak{m}$ where $\mathfrak{m}$ runs over all maximal ideals of $A$\footnote{Because if $s \in A$ is not in any maximal ideal of $A$, then  $s$ must be a unit.}. \label{sam} \\


A nonzero ring is said to be a \textbf{local ring} if it has only one maximal ideal, if and only if its set of non-units form an ideal, or that if and only if it is the localization of some ring $B$ at some prime ideal  $\mathfrak{p}$ of  $B$\footnote{If $A$ is local, then it is the localization of itself at its unique maximal ideal. If $A=B_\mathfrak{p}$, then the set of non-units $\set{\frac{p}{s}\in B_\mathfrak{p}:p \in \mathfrak{p}}$ is clearly the only maximal ideal of $A$.}, thus the name "local ring".  One of the key property of local ring $A$ is that if we let $\mathfrak{m}$ be its unique maximal ideal, then the quotient $A$-module  $\mathfrak{m}\quotient \mathfrak{m}^2$ forms a $A\quotient \mathfrak{m}$-vector space, called the \textbf{cotangent space of} $A$, with the obvious assignment of scalar product. If $A$ is local, we often write  $(A,\mathfrak{m},k)$ to mean that $\mathfrak{m}$ is the unique maximal ideal of $A$ and  $k$ the residue field  $k\triangleq A\quotient \mathfrak{m}$. 
\section{Integral dependence}
\label{Id}
Let $A$ be a subring of some ring  $B$. We say  $x \in B$ is \textbf{integral over} $A$ if  $x$ is a root of some monic polynomial with coefficients in $A$. 
\begin{theorem}
\label{CHTffgm}
\textbf{(Cayley-Hamilton Theorem for finitely generated module)} Suppose $\mathfrak{a}\subseteq A$ is an ideal, and $M$ is a finitely generated $A$-module. If $\pfi \in \operatorname{End}(M)$ satisfies $\operatorname{Im}\pfi \subseteq \mathfrak{a}M$, then there exists some $a_0,\dots ,a_{n-1} \in \mathfrak{a}$ such that 
\begin{align*}
  \pfi^n + a_{n-1}\pfi^{n-1}+\cdots + a_0= 0
\end{align*}
\end{theorem}
\begin{proof}
Let $\set{m_1,\dots , m_n}$ generate $M$. Because $\operatorname{Im}(\pfi)\subseteq \mathfrak{a}M$, we may write 
\begin{align*}
 \pfi(m_i)= \sum_{j=1}^n a_{ij}m_j,\quad \text{where }a_{ij}\in \mathfrak{a}
\end{align*}
Clearly, for each $i$, we have 
\begin{align*}
\sum_{j=1}^n (\delta_{ij}\pfi - a_{ij}\textbf{1})m_i=0, 
\end{align*}
where $\textbf{1} \in \operatorname{End}(M)$ is the identity operator and $\delta_{ij}$ is the Kronecker delta. Defining $R\triangleq A[\pfi]\subseteq \operatorname{End}(M)$, we may now view $\delta_{ij}\pfi - a_{ij}\textbf{1}$ as an $n\times n$ matrix, whose entries are elements of ring $R$. Because $R$ is a commutative unital ring, there exist $R$-matrix $X$ \textbf{adjugate} to $(\delta_{ij}\pfi-a_{ij}\textbf{1})$, i.e., $X (\delta_{ij}\pfi-a_{ij}\textbf{1})=\operatorname{det}(\delta_{ij}\pfi-a_{ij}\textbf{1})I$, where $I$ is the identity  $R$-matrix. This implies that 
\begin{align*}
\operatorname{det} (\delta_{ij}\pfi-a_{ij}\textbf{1}) m_k=0,\quad \text{ for all }k \in \set{1,\dots ,n}
\end{align*}
Noting that $\operatorname{der}(\delta_{ij}\pfi - a_{ij}\textbf{1})$ is an $\mathfrak{a}$-polynomial in $\pfi$ and $M=\langle m_1,\dots ,m_n\rangle $, our proof is done. 
\end{proof}
\customref{CHTffgm}{Cayley-Hamilton Theorem for finitely generated module} allow us to give the following equivalent definitions of integral dependence, which are the keys for defining integral closure.  
\begin{theorem}
\label{EDfid}
\textbf{(Equivalent Definitions for integral dependence)} Let $A$ be a subring of $B$, and let $x \in B$. The following are equivalent: 
\begin{enumerate}[label=(\roman*)]
  \item $x\in B$ is integral over $A$.  
  \item $A[x]$ is a finitely generated $A$-module. 
  \item $A[x]$ is contained in a subring $C$ of $B$ such that $C$ as an $A$-module is finitely generated. 
\end{enumerate}
\end{theorem}
\begin{proof}
  $(\text{i})\implies (\text{ii})\implies (\text{iii})$ is clear. We now prove $(\text{iii})\implies (\text{i})$. Define an $A$-module endomorphism  $\pfi: C\rightarrow C$ by $c\mapsto xc$. By \customref{CHTffgm}{Cayley-Hamilton Theorem for finitely generated module}, $\pfi^n + a_{n-1}\pfi^{n-1}+\cdots + a_0=0$.  In other words, $(x^n+a_{n-1}x^{n-1}+\cdots + a_0)c=0$ for all $c \in C$. Consider the case when $c=1$, and we are done.  
\end{proof}
\begin{corollary}
\label{DoIC}
\textbf{(Definition of Integral Closure)} If $A$ is a subring of  $B$, then the set of elements of $B$ which are integral over $A$ forms a subring of $B$ containing  $A$. 
\end{corollary}
\begin{proof}
Let $x,y\in B$ be integral over $A$. We are required to prove  $x\pm y,xy$ are also integral over $A$. The first step of the proof is to observe that $A[x+y],A[x-y],A[xy]$ are both contained by the ring $A[x,y]$, which is a subring of $C$. Therefore, we only have to show $A[x,y]$ as an $A$-module is finitely generated.\\

Now, note that $A[x,y]=(A[x])[y]$. Clearly $y$ is integral over  $A[x]$, so we know  $A[x,y]=(A[x])[y]$ is a finitely generated $A[x]$-module. Moreover, because $x$ is integral over $A$, we also know  $A[x]$ is a finitely generated $A$-module. Let $A[x,y]$ as an $A[x]$-module be generated by $\set{z_1,\dots ,z_n}$, and let $A[x]$ as an $A$-module be generated by $\set{v_1,\dots ,v_k}$. It is easy to check that, indeed, $A[x,y]$ as an $A$-module is generated  by $\set{z_iv_j \in A[x,y]: 1 \leq i \leq n,1\leq j\leq k}$. 
\end{proof}
Note that integral dependence and algebraic dependence indeed are related as expected. Given two integral domains $A \subseteq B$ where $B$ integral over $A$, clearly  $\operatorname{Frac}(B)$ is algebraic over $A$. \\      



Let $A$ be a subring of  $B$. Because of \myref{Corollary}{DoIC}, when we talk about the \textbf{integral closure of $A$ in $B$}, the set of elements of $B$ integral over $A$, we know we are indeed talking about a ring. If $A$ itself is the integral closure of itself in $B$, we say  $A$ is \textbf{integrally closed in}  $B$.\\ 

For the proof of  \myref{Corollary}{ToIC}, note that induction and argument similar to the second paragraph of the proof of \myref{Corollary}{DoIC} shows that if $x_1,\dots ,x_n$ are all integral over $A$, then  $A[x_1,\dots ,x_n]$ as an $A$-module is finitely generated.
\begin{corollary}
\label{ToIC}
\textbf{(Transitivity of Integral Closure)} Let $B$ be a subring of  $C$, and  $A$ a subring of $B$. If $A$ is integrally closed in $B$ and  $B$ is integrally closed in $C$, then  $A$ is integrally closed in $C$.
\end{corollary}
\begin{proof}
Let $x \in C$. Because $B$ is integrally closed in $C$, we know 
 \begin{align*}
x^n+b_{n-1}x^{n-1}+ \cdots + b_0=0,\quad \text{for some }b_0,\dots ,b_{n-1} \in B
\end{align*}
By \myref{Theorem}{EDfid}, we are only required to show $A[b_0,\dots ,b_{n-1},x]$ as an $A$-module is finitely generated. Clearly, $x$ is integral over the subring $A[b_0,\dots ,b_{n-1}]$, so by \myref{Theorem}{EDfid}, we know $A[b_0,\dots ,b_{n-1},x]$ as an $A[b_0,\dots ,b_{n-1}]$-module is finitely generated. The proof then follows from noting $A[b_0,\dots ,b_{n-1}]$ is finitely generated as an $A$-module since all  $b_0,\dots ,b_{n-1}$ are all integral over $A$.  
\end{proof}
An integral domain is said to be an \textbf{integrally closed domain} if it is integrally closed in its field of fraction.  
\section{Homological lemmas}
Let $R$ be some ring. Given a sequence of $R$-modules and $R$-modules homomorphism 
\begin{align*}
\cdots \longrightarrow M_{k-1} \overset{f}{\longrightarrow } M_k \overset{g}{\longrightarrow } M_{k+1} \longrightarrow \cdots 
\end{align*}
we say the sequence is \textbf{exact} at $M_k$ if  $\operatorname{Im}(f)=\operatorname{Ker}(g)$, and we say a sequence is \textbf{exact} if it is exact at each of its module. By a \textbf{short} exact sequence, we mean exact sequence of the form 
\begin{align*}
0 \longrightarrow   M' \longrightarrow M \longrightarrow M'' \longrightarrow  0
\end{align*}

\begin{lemma}
\label{FL}
\textbf{(Five Lemma)}
% https://q.uiver.app/#q=WzAsMTAsWzAsMCwiQSJdLFsyLDAsIkIiXSxbNCwwLCJDIl0sWzYsMCwiRCJdLFs4LDAsIkUiXSxbMCwyLCJBJyJdLFsyLDIsIkInIl0sWzQsMiwiQyciXSxbNiwyLCJEJyJdLFs4LDIsIkUnIl0sWzAsMSwiZiJdLFsxLDIsImciXSxbMiwzLCJoIl0sWzMsNCwiaiJdLFs1LDYsInIiXSxbNiw3LCJzIl0sWzcsOCwidCJdLFs4LDksInUiXSxbMCw1LCJsIiwxXSxbMSw2LCJtIiwxXSxbMiw3LCJuIiwxXSxbMyw4LCJwIiwxXSxbNCw5LCJxIiwxXV0=
Given a commutative diagram in the category of $R$-module: 
\[\begin{tikzcd}
	A && B && C && D && E \\
	\\
	{A'} && {B'} && {C'} && {D'} && {E'}
	\arrow["f", from=1-1, to=1-3]
	\arrow["l"{description}, from=1-1, to=3-1]
	\arrow["g", from=1-3, to=1-5]
	\arrow["m"{description}, from=1-3, to=3-3]
	\arrow["h", from=1-5, to=1-7]
	\arrow["n"{description}, from=1-5, to=3-5]
	\arrow["j", from=1-7, to=1-9]
	\arrow["p"{description}, from=1-7, to=3-7]
	\arrow["q"{description}, from=1-9, to=3-9]
	\arrow["r", from=3-1, to=3-3]
	\arrow["s", from=3-3, to=3-5]
	\arrow["t", from=3-5, to=3-7]
	\arrow["u", from=3-7, to=3-9]
\end{tikzcd}\]
If the two rows are exact, $m,p$ are isomorphism, $l$ is surjective and  $q$ is injective, then $n$ is also an isomorphism. The proof of Five Lemma follows immediately from the two Four Lemma, and their proof are both just diagram chasing. For demonstration, we present a proof for the \customref{FFL}{first four lemma}. 
\end{lemma}
\begin{lemma}
\label{FFL}
\textbf{(First Four Lemma)} Given a commutative diagram in the category of $R$-module:
% https://q.uiver.app/#q=WzAsOCxbMiwwLCJCIl0sWzQsMCwiQyJdLFs2LDAsIkQiXSxbMiwyLCJCJyJdLFs0LDIsIkMnIl0sWzYsMiwiRCciXSxbMCwyLCJBJyJdLFswLDAsIkEiXSxbMCwxLCJnIl0sWzEsMiwiaCJdLFszLDQsInMiXSxbNCw1LCJ0Il0sWzAsMywibSIsMV0sWzEsNCwibiIsMV0sWzIsNSwicCIsMV0sWzYsMywiciJdLFs3LDYsImwiLDFdLFs3LDAsImYiXV0=
\[\begin{tikzcd}
	A && B && C && D \\
	\\
	{A'} && {B'} && {C'} && {D'}
	\arrow["f", from=1-1, to=1-3]
	\arrow["l"{description}, from=1-1, to=3-1]
	\arrow["g", from=1-3, to=1-5]
	\arrow["m"{description}, from=1-3, to=3-3]
	\arrow["h", from=1-5, to=1-7]
	\arrow["n"{description}, from=1-5, to=3-5]
	\arrow["p"{description}, from=1-7, to=3-7]
	\arrow["r", from=3-1, to=3-3]
	\arrow["s", from=3-3, to=3-5]
	\arrow["t", from=3-5, to=3-7]
\end{tikzcd}\]
If the two rows are exact, $m,p$ are injective,  $l$ is surjective, then $n$ is injective.  
\end{lemma}
\begin{proof}
Let $c \in C$ such that $n(c)=0$. We are required to show $c=0$. Using the hypothesis, we may deduce 
\begin{align*}
n(c)=0 \implies t\circ n(c)=0 \implies p\circ h(c)=0 \implies  h(c)=0 \implies c=g(b)
\end{align*}
for some $b \in B$. Observing that $s(m(b))=n \circ g(b)=n(c)=0$, we see $m(b)=r(a')$ for some $a'\in A'$. Because $l$ is surjective, $a'=l(a)$ for some $a \in A$. Now, because  
\begin{align*}
m \circ f(a)=r\circ l(a)=r(a')=m(b)
\end{align*}
by injectivity of $m$, we may deduce  $b=f(a)$. This together with first row being exact shows that 
\begin{align*}
c=g(b)=g\circ f(a)=0 
\end{align*}
\end{proof}
\begin{lemma}
\textbf{(Second Four Lemma)} Given a commutative diagram in the category of $R$-modules: 
% https://q.uiver.app/#q=WzAsOCxbMCwwLCJCIl0sWzIsMCwiQyJdLFs0LDAsIkQiXSxbNiwwLCJFIl0sWzAsMiwiQiciXSxbMiwyLCJDJyJdLFs0LDIsIkQnIl0sWzYsMiwiRSciXSxbMCwxLCJnIl0sWzEsMiwiaCJdLFsyLDMsImoiXSxbNCw1LCJzIl0sWzUsNiwidCJdLFs2LDcsInUiXSxbMCw0LCJtIiwxXSxbMSw1LCJuIiwxXSxbMiw2LCJwIiwxXSxbMyw3LCJxIiwxXV0=
\[\begin{tikzcd}
	B && C && D && E \\
	\\
	{B'} && {C'} && {D'} && {E'}
	\arrow["g", from=1-1, to=1-3]
	\arrow["m"{description}, from=1-1, to=3-1]
	\arrow["h", from=1-3, to=1-5]
	\arrow["n"{description}, from=1-3, to=3-3]
	\arrow["j", from=1-5, to=1-7]
	\arrow["p"{description}, from=1-5, to=3-5]
	\arrow["q"{description}, from=1-7, to=3-7]
	\arrow["s", from=3-1, to=3-3]
	\arrow["t", from=3-3, to=3-5]
	\arrow["u", from=3-5, to=3-7]
\end{tikzcd}\]
If the two rows are exact, $m,p$ are surjective,  $q$ is injective, then  $n$ is surjective. As a special case of the \customref{FL}{Five Lemma}, we now have the \customref{SFL}{Short Five Lemma}.  
\end{lemma}
\begin{lemma}
\label{SFL}
\textbf{(Short Five Lemma)} Given a commutative diagram in the category of $R$-modules: 
% https://q.uiver.app/#q=WzAsMTAsWzIsMCwiQiJdLFs0LDAsIkMiXSxbNiwwLCJEIl0sWzIsMiwiQiciXSxbNCwyLCJDJyJdLFs2LDIsIkQnIl0sWzAsMiwiMCJdLFswLDAsIjAiXSxbOCwyLCIwIl0sWzgsMCwiMCJdLFswLDFdLFsxLDJdLFszLDRdLFs0LDVdLFswLDMsIm0iLDFdLFsxLDQsIm4iLDFdLFsyLDUsInAiLDFdLFs3LDBdLFs1LDhdLFsyLDldLFs2LDNdXQ==
\[\begin{tikzcd}
	0 && B && C && D && 0 \\
	\\
	0 && {B'} && {C'} && {D'} && 0
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-3, to=1-5]
	\arrow["m"{description}, from=1-3, to=3-3]
	\arrow[from=1-5, to=1-7]
	\arrow["n"{description}, from=1-5, to=3-5]
	\arrow[from=1-7, to=1-9]
	\arrow["p"{description}, from=1-7, to=3-7]
	\arrow[from=3-1, to=3-3]
	\arrow[from=3-3, to=3-5]
	\arrow[from=3-5, to=3-7]
	\arrow[from=3-7, to=3-9]
\end{tikzcd}\]
If the two rows are exact and $m,p$ are isomorphisms, then $n$ is an isomorphism.  
\end{lemma}
\section{Noetherian}
Given some collection $\Sigma$ of sets, we say $\Sigma$ satisfies the \textbf{ascending chain condition, a.c.c.}, if for each chain $x_1 \subseteq x_2 \subseteq  \cdots$ there exists $n$ such that $x_n=x_{n+1}=\cdots$, and we say $\Sigma$ satisfies the \textbf{descending chain condition, d.c.c.}, if for each chain $x_1 \supseteq x_2 \supseteq \cdots $ there exists $n$ such that $x_n=x_{n+1}= \cdots$. Let $M$ be some module. We say  $M$  is  \textbf{Noetherian} if the collection of submodules of $M$ satisfies  a.c.c., and we say $M$ is  \textbf{Artinian} if the collection of submodules  satisfies d.c.c. Thanks to axiom of choice, we have: 
\begin{equiv_def}
\label{EDoN}
\textbf{(Equivalent Definition of Noetherian)} Let $M$ be a module. The following are equivalent: 
\begin{enumerate}[label=(\alph*)]
  \item $M$ is Noetherian.  
  \item Every nonempty collection of submodules of $M$ has a maximal element.  
  \item Every submodule of $M$ is finitely generated.
\end{enumerate}
\end{equiv_def}
Immediately from the equivalent definitions of Noetherian, we have the following useful properties for ideals in Noetherian ring. How useful? See how we established equivalent characterization of DVR with \myref{corollary}{IiN} in \myref{theorem}{ECoDp1}.  
\begin{corollary}
\label{IiN}
  \textbf{(Ideals in Noetherian always contain some powers of its radical)} If $\mathfrak{a}\subseteq A$ for Noetherian $A$, then $\mathfrak{a}\supseteq (\sqrt{ \mathfrak{a}})^n$ for some $n$. 
\end{corollary}
\begin{proof}
Suppose $\sqrt{\mathfrak{a}}= \langle x_1,\dots ,x_k\rangle $ and $x_i^{n_i}\in \mathfrak{a}$. Defining  
\begin{align*}
m \triangleq \left(\sum_{i=1}^k n_i-1\right)+1 
\end{align*}
We have 
\begin{align*}
 \left(\sqrt{\mathfrak{a}}\right)^m = \left\langle \set{x_1^{r_1}\cdots x_k^{r_k} \in A: \sum_{i=1}^k r_i =m \text{ and }r_i \geq 0}\right\rangle 
\end{align*}
Now, by definition of $m$, we have 
 \begin{align*}
\sum_{i=1}^k r_i= m \text{ and }r_i \geq 0\implies r_i \geq n_i \text{ for at least one }i
\end{align*}
which implies $x_1^{r_1}\cdots x_1^{r_k} \in \mathfrak{a}$ for all $\sum_{i=1}^k r_i=m$ and $r_1 \geq 0$.  
\end{proof}
\begin{corollary}
\label{PIoN}
\textbf{(Primary ideals of Noetherian rings)} Let $A$ be Noetherian and $\mathfrak{m}\subseteq A$ maximal. For any ideal $\mathfrak{q}\subseteq A$, we have 
\begin{align*}
\mathfrak{q}\text{ is }\mathfrak{m}\text{-primary} \iff  \mathfrak{m}^n \subseteq \mathfrak{q} \subseteq \mathfrak{m}\text{ for some }n>0
\end{align*}
\end{corollary}
\begin{proof}
  $(\implies ):$ This follows from \myref{corollary}{IiN}.  $(\impliedby):$ $\mathfrak{m}=\sqrt{\mathfrak{q}} $ follows from $\mathfrak{m} \subseteq  \sqrt{\mathfrak{m}^n} \subseteq \sqrt{\mathfrak{q}}\subseteq \sqrt{\mathfrak{m}} = \mathfrak{m}$. It remains to prove $\mathfrak{q}$ is indeed primary. \\


Because $\mathfrak{m}=\sqrt{\mathfrak{q}} $, by \customref{raed}{definition of radical} $\mathfrak{m}$ is preimage of  $\operatorname{Nil}(A\quotient \mathfrak{q})$. This implies by correspondence theorem for rings\footnote{What we mean by the correspondence theorem for ring is \customref{ctfr}{this}.} that $\operatorname{Nil}(A\quotient \mathfrak{q})$ is the only prime ideal of $A\quotient \mathfrak{q}$.\footnote{This is because $\operatorname{Nil}(A\quotient \mathfrak{q})=\bigcap \operatorname{Spec}(A\quotient \mathfrak{q})$. See \myref{theorem}{EDfN}. The proof is nontrivial.}. We have shown $A\quotient \mathfrak{q}$ is local, so $\operatorname{Nil}(A\quotient \mathfrak{q})$ is exactly the collection of non-units of $ A\quotient \mathfrak{q}$. This implies every zero-divisor in $A\quotient \mathfrak{q}$ is nilpotent, which implies $\mathfrak{q}$ is primary.  
\end{proof}
We close this section by showing Noetherian and Artinian properties are closed under multiple operations.  
\begin{proposition}
\label{FpNm}
\textbf{(Formal properties of Noetherian and Artinian modules)} Given a short exact sequence of $A$-modules:  
 \begin{align*}
0 \longrightarrow M' \overset{\alpha }{\longrightarrow } M \overset{\beta }{\longrightarrow } M'' \longrightarrow 0
\end{align*}
$M$ is Noetherian if and only if  $M'$ and $M''$ are both Noetherian. Also, $M$ is Artinian if and only if $M'$ and  $M''$ are both Artinian. 
\end{proposition}
\begin{proof}
Consider chain condition definition. For the "if" part, let $L_n$ be an ascending chain of submodules of  $M$, and use \customref{SFL}{short five lemma} on
% https://q.uiver.app/#q=WzAsMTEsWzAsMCwiMCJdLFsyLDAsIlxcYWxwaGFeey0xfShMX24pIl0sWzQsMCwiTF9uIl0sWzYsMCwiXFxiZXRhKExfbikiXSxbOCwwLCIwIl0sWzAsMiwiMCJdLFsyLDIsIlxcYWxwaGFeey0xfShMX3tuKzF9KSJdLFs0LDIsIkxfe24rMX0iXSxbMywyXSxbOCwyLCIwIl0sWzYsMiwiXFxiZXRhKExfe24rMX0pIl0sWzAsMV0sWzEsMiwiXFxhbHBoYSJdLFsyLDMsIlxcYmV0YSJdLFs1LDZdLFs2LDcsIlxcYWxwaGEiXSxbMyw0XSxbNywxMCwiXFxiZXRhIl0sWzEwLDldLFszLDEwLCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsyLDcsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsNiwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XV0=
\[\begin{tikzcd}
	0 && {\alpha^{-1}(L_n)} && {L_n} && {\beta(L_n)} && 0 \\
	\\
	0 && {\alpha^{-1}(L_{n+1})} & {} & {L_{n+1}} && {\beta(L_{n+1})} && 0
	\arrow[from=1-1, to=1-3]
	\arrow["\alpha", from=1-3, to=1-5]
	\arrow[hook, from=1-3, to=3-3]
	\arrow["\beta", from=1-5, to=1-7]
	\arrow[hook, from=1-5, to=3-5]
	\arrow[from=1-7, to=1-9]
	\arrow[hook, from=1-7, to=3-7]
	\arrow[from=3-1, to=3-3]
	\arrow["\alpha", from=3-3, to=3-5]
	\arrow["\beta", from=3-5, to=3-7]
	\arrow[from=3-7, to=3-9]
\end{tikzcd}\]
to conclude that $L_n$ must stop at some point.  
\end{proof}
\begin{theorem}
\label{cpoN}
\textbf{(closed property of Noetherian)} Let $A$ be a Noetherian ring, $S\subseteq A$ a multiplicatively closed subset, $\mathfrak{a}\subseteq A$ an ideal, $M$ an  $A$-module, and $N\subseteq M$ an $A$-submodule.  We have: 
\begin{enumerate}[label=(\roman*)] 
\item $A^n$ as an $A$-module is Noetherian.  
\item If $M$ is Noetherian, then  $M\quotient N$ is also Noetherian.   
  \item If $M$ is finitely generated, then $M$ is Noetherian.  
  \item $\mathfrak{a}$ as an $A$-module is Noetherian.  
\end{enumerate}
\end{theorem}
\begin{proof}
For $(\text{i})$, just apply \myref{Proposition}{FpNm} inductively to 
\begin{align*}
 0\longrightarrow A \longrightarrow A^n \longrightarrow A^{n-1} \longrightarrow 0 
\end{align*}
And for (ii), just apply \myref{Proposition}{FpNm} to 
\begin{align*}
0 \longrightarrow 0 \longrightarrow M \longrightarrow M\quotient N \longrightarrow 0
\end{align*}
For (iii), one simply note that if $M= \langle x_1,\dots ,x_n\rangle $, then $\pfi :A^n \to M ; (a_1,\dots ,x_n)\mapsto  a_1x_1+ \cdots +a_nx_n$ forms a surjective $A$-module homomorphism, thus $M$ isomorphic to  $A \quotient \operatorname{Ker}\pfi$ is Noetherian by (i) and (ii). (iv) is clear. 
\end{proof}

\begin{theorem}
\label{cpoA}
\textbf{(closed property of Artinian)} Let $A$ be a Artinian ring, $S\subseteq A$ a multiplicatively closed subset, $\mathfrak{a}\subseteq A$ an ideal, $M$ an  $A$-module, and $N\subseteq M$ an $A$-submodule.  We have: 
\begin{enumerate}[label=(\roman*)] 
\item $A^n$ as an $A$-module is Artinian.  
\item If $M$ is Artinian, then  $M\quotient N$ is also Artinian.   
  \item If $M$ is finitely generated, then $M$ is Artinian.  
  \item $\mathfrak{a}$ as an $A$-module is Artinian.  
\end{enumerate}
\end{theorem}
\begin{proof}
  The proofs are identical to that of \myref{Theorem}{cpoN}. 
\end{proof}
\section{Length}
Given a finite \textbf{chain} of submodules 
\begin{align*}
M_0 \subset M_1 \subset \cdots \subset M_n 
\end{align*}
we say this chain is of \textbf{length} $n$. Under the obvious assignment of order on the collection of all finite chains of submodules of $M$, we may define the \textbf{composition series} of $M$ to be the maximal finite chains. Clearly, a finite chain 
\begin{align*}
0= M_0 \subset \cdots \subset M_n= M
\end{align*}
is maximal if and only if  $M_k\quotient M_{k-1}$ are simple. 
\begin{theorem}
\label{Lom}
\textbf{(Length of modules is well defined)} Every composition series of a module $M$ have the same length. 
\end{theorem}
\begin{proof}
Suppose $M$ has a composition series, and let $l(M)$ denote the least length of a composition series of $M$. We wish to show every chain has length smaller than $l(M)$. Before such, we first prove 
\begin{align}
\label{NsM}
N \subset M \implies  l(N)< l(M)
\end{align}
Let $M_0 \subset \cdots \subset M_n=M$ be a composition series of least length. Define $N_k \triangleq N \cap M_k$ for all $k \in \set{0,\dots ,n}$. Consider the obvious homomorphism $N_k \quotient N_{k-1} \rightarrow M_k \quotient M_{k-1}$. We see that either $N_k \quotient N_{k-1} \cong M_k \quotient M_{k-1}$ or $N_k = N_{k-1}$. This implies that the chain $N_0 \subset \cdots \subset N_n$ will be a composition series of $N$ after the unnecessary terms are removed. It remains to show there are unnecessary terms in $N_0 \subset \cdots \subset N_n$. Assume not for a contradiction. Because $N_1 \subseteq M_1$ and $N_1 \quotient \set{0} \cong   M_1 \quotient \set{0}$, we have $N_1 = M_1$. Repeating the same argument, we have  $N=N_n=M_n=M$, a contradiction. We have proved \myref{statement}{NsM}.\\

Now, let $M_0' \subset \cdots \subset M_r'$ be some composition series of $M$. The proof then follows from using \myref{statement}{NsM} to deduce 
\begin{align*}
l(M)=l (M_r') > \cdots > l(M_0')=0 \implies r\leq l(M)
\end{align*}
\end{proof}
Because of \myref{Theorem}{Lom}, we may well define the \textbf{length} $l(M)$ of module. For obvious reason, if module $M$ has no composition series, we say $M$ has infinite length and write $l(M)=\infty$. Clearly, if $M$ is of finite length, then $M$ is both Noetherian and Artinian. Conversely, if $M$ is both Noetherian and Artinian, then by the maximal element definition of Noetherian, there exists a decreasing sequence $M=M_0 \supset M_1 \supset M_2 \supset \cdots $, which by d.c.c. must be finite.   
\begin{theorem}
\label{AaN}
\textbf{(Artinian and Noetherian are equivalent for vector space)} Let $k$ be some field, and $V$ some $k$-vector space. The following are equivalent: 
\begin{enumerate}[label=(\roman*)]
  \item $V$ is finite dimensional. 
  \item $V$ is of finite length. 
  \item $V$ is Noetherian. 
  \item $V$ is Artinian. 
\end{enumerate}
Moreover, $l(V)=\operatorname{dim}(V)$ in such case. 
\end{theorem}
\begin{proof}
$(\text{i})\implies (\text{ii})\implies (\text{iii})$ and $(\text{ii})\implies (\text{iv})$ are clear. It remains to prove $(\text{iii})\implies (\text{i})$ and $(\text{iv})\implies (\text{i})$. Assume for a contradiction that $\set{v_i \in V: i \inn}$ is linearly independent. The contradiction to Noetherian of $V$ then occurs at  $(\operatorname{span}\set{v_i \in V: i\leq n})_n$ doesn't stop growing strictly, and the contradiction to Artinian of $V$ then occurs at $(\operatorname{span}\set{v_i \in  V : i\geq n})_n$ strictly decrease infinitely.  
\end{proof}
For usage in \customref{AR}{ section on Artin ring}, we give a corollary. 
\begin{corollary}
\label{Aiet}
\textbf{(Artinian is equivalent to Noetherian in the class of rings whose zero ideal is some finite product of maximal ideals)} Let $A$ be a ring with $0=\mathfrak{m}_1\cdots \mathfrak{m}_n$, where $\mathfrak{m}_i$ are maximal. We have 
\begin{align*}
A\text{ is Noetherian }\iff A\text{ is Artinian }
\end{align*}
\end{corollary}
\begin{proof}
WLOG, we only prove $(\implies )$. The proof is done by  induction. Write $\mathfrak{a}_i\triangleq \mathfrak{m}_1 \cdots \mathfrak{m}_i$, where $\mathfrak{a}_0\triangleq A$ and $\mathfrak{a}_n=0$. Clearly, $\mathfrak{a}_n$ is Artinian as an $A$-module. We now show $\mathfrak{a}_{n-1}$ is also Artinian as an $A$-module. Consider the short exact sequence of $A$-module:    
\begin{align*}
0 \longrightarrow \mathfrak{a}_n \longrightarrow \mathfrak{a}_{n-1} \longrightarrow \mathfrak{a}_{n-1} \quotient  \mathfrak{a}_{n} \longrightarrow 0
\end{align*}
By \myref{proposition}{FpNm}, to prove $\mathfrak{a}_{n-1}$ is Artinian as an $A$-module, we only have to show  $\mathfrak{a}_{n-1}\quotient \mathfrak{a}_n$ is Artinian as an $A$-module. Before such, we first have to make two remarks: 
\begin{enumerate}[label=(\roman*)]
  \item $\mathfrak{a}_{n-1}\quotient \mathfrak{a}_n$ forms an $A\quotient \mathfrak{m}_n$-vector space  under obvious assignment of scalar product. 
  \item For each $E \subseteq \mathfrak{a}_{n-1}\quotient \mathfrak{a}_n$, $E$ forms an $A$-submodule if and only if $E$ forms an  $A\quotient \mathfrak{m}_n$-submodule. 
\end{enumerate}

Now, by \myref{proposition}{cpoN} we know $\mathfrak{a}_n \quotient \mathfrak{a}_{n-1}$ is Noetherian as an $A$-module, which with remark  (ii) implies that $\mathfrak{a}_n \quotient \mathfrak{a}_{n-1}$ is Noetherian as an $A\quotient \mathfrak{m}_n$-module, which further implies by \myref{theorem}{AaN} that $\mathfrak{a}_n \quotient \mathfrak{a}_{n-1}$ is Artinian as an $A\quotient \mathfrak{m}_n$-module, which further further implies with remark (ii) that, indeed, $\mathfrak{a}_n \quotient \mathfrak{a}_{n-1}$ is Artinian as an $A$-module. \\


We have shown $\mathfrak{a}_{n-1}$ is Artinian as an $A$-module, and if we apply the same argument\footnote{Replace $A\quotient \mathfrak{m}_n$ with $A\quotient \mathfrak{m}_{n-1}$} short exact sequence of $A$-module: 
 \begin{align*}
0 \longrightarrow \mathfrak{a}_{n-1} \longrightarrow \mathfrak{a}_{n-2}\longrightarrow \mathfrak{a}_{n-2}\quotient \mathfrak{a}_{n-1} \longrightarrow 0
\end{align*}
We see $\mathfrak{a}_{n-2}$ is also Artinian as an $A$-module. Continuing the same process, we see that indeed  $A=\mathfrak{a}_0$ is Artinian. (as an $A$-module)
\end{proof}

\section{Tensor product for modules}
Let $R$ be some ring. By \textbf{free $R$-modules}, we mean $R$-modules of the form $\bigoplus_{i \in I}M_i$ where $M_i \cong R$. We denote the free module $\bigoplus_{i \in I}M_i$ by $R^{(I)}$. Given a finite collection $\set{M_1,\dots ,M_n}$ of $R$-modules, by the term \textbf{tensor product space}, we mean a $R$-module denoted by $\bigotimes M_i$ and a $R$-multilinear map $\otimes : \prod M_i \rightarrow \bigotimes M_i$ that satisfies the \textbf{universal property}: For each multilinear map $f:\prod M_i \rightarrow P$, there exists unique linear map $\tilde{f}:\bigotimes M_i \rightarrow P$ such that the diagram 
% https://q.uiver.app/#q=WzAsMyxbMiwyLCJOIl0sWzAsMCwiXFxwcm9kIE1faSJdLFsyLDAsIlxcb3RpbWVzIE1faSJdLFsxLDIsIlxcb3RpbWVzIl0sWzEsMCwiZiIsMl0sWzIsMCwiZiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
\[\begin{tikzcd}
	{\prod M_i} && {\bigotimes   M_i} \\
	\\
	&& P 
	\arrow["\otimes ", from=1-1, to=1-3]
	\arrow["f"', from=1-1, to=3-3]
	\arrow["\tilde{f} ", dashed, from=1-3, to=3-3]
\end{tikzcd}\]
commutes. This definition is unique up to isomorphism: If $\bigotimes 'M_i$ is also a tensor product, then there exists some module isomorphism from $\bigotimes  M_i$ to $\bigotimes  'M_i$ that sends $m_1 \otimes  \cdots \otimes  m_n$ to $m_1 \otimes  ' \cdots \otimes  ' m_n$. One common construction of the tensor product space is to quotient the free module $R^{(\prod M_i)}$ with the submodule spanned by the set:
\begin{align*}
  \bigcup_{i=1}^n &\Big[\bset{(x_1,\dots, rx_i ,\dots, x_n)-r(x_1,\dots ,x_n)}\\
 & \cup \bset{(x_1,\dots ,x_i +x_i',\dots  ,x_n)- (x_1,\dots ,x_i,\dots  ,x_n)-(x_1,\dots ,x_i',\dots ,x_n)}  \Big]
\end{align*}
Denoting this spanned submodule by $D$, our tensor product space $\bigotimes M_i$ is now $R^{(\prod M_i)}\quotient D$, and because of the forms of the generators of $D$, the tensor product map $\otimes  :\prod M_i \rightarrow \bigotimes  M_i$ defined by 
\begin{align*}
x_1\otimes  \cdots \otimes  x_n \triangleq [(x_1,\dots ,x_n)] 
\end{align*}
is clearly multilinear. Because free module $R^{(\prod M_i)}$ is a direct sum, it is clear that $\bigotimes M_i$ is generated by the \textbf{basic elements}\footnote{Elements of the form $x_1\otimes  \cdots \otimes  x_n$}, and because of such, for every multilinear map $f:\prod M_i \rightarrow P$, the induced map $\tilde{f}: \bigotimes M_i \rightarrow P$ must be unique. To actually induce $\tilde{f}$, one first extend $f$ to the whole free module $\overline{f}:R^{(\prod M_i)}\rightarrow P$ by setting $\overline{f}(\sum r (x_1,\dots ,x_n))\triangleq \sum rf(x_1,\dots ,x_n)$, and see that because $\overline{f}$ vanishes on the generators of $D$, we may induce some mapping from $\bigotimes M_i$ to $P$ that clearly has the desired action of $\tilde{f}$ on the basic elements. \\

Note that the \textbf{tensor-horn adjunction} isomorphism 
\begin{align*}
\operatorname{Hom}(M\otimes N,P) \cong  \operatorname{Hom}(M,\operatorname{Hom}(N,P))
\end{align*}
maps $f \in \operatorname{Hom}(M\otimes N,P)$ to   $\tilde{f}\in \operatorname{Hom}(M,\operatorname{Hom}(N,P))$ with the action
\begin{align*}
  \tilde{f}(m)n\triangleq f(m\otimes n)
\end{align*}
\chapter{Valuation Ring and DVR}
\section{Localization of ideals}
Let $I\subseteq A$ be some ideal, clearly its extension is the \textbf{localization of $I$ by $S$} defined by $S^{-1}I= \set{\frac{i}{s}\in S^{-1}A:i \in I}$. We use the notation $S(I)$ to denote the contraction of $S^{-1}I$. For \customref{UoP}{the section on uniqueness of primary decomposition}, we first prove some basic properties of localization of ideals. 
\begin{theorem}
\label{Pol}
\textbf{(Properties of localization of ideals)} Let $A$ be a ring, and let  $S$ be some multiplicatively closed subset of  $A$. 
 \begin{enumerate}[label=(\alph*)]
  \item If $I$ is an ideal in  $A$, then  
    \begin{align*}
    S(I)=\bigcup_{s \in S} (I:s)
    \end{align*} 
    \item If $I$ is an ideal in $A$, then 
\begin{align*}
\sqrt{S^{-1}I}=S^{-1}\sqrt{I}        
\end{align*}
\item If $I_1,\dots ,I_n$ are ideals in $A$, then 
   \begin{align*}
  S^{-1}(I_1 \cap \cdots \cap I_n)= S^{-1}I_1 \cap  \cdots \cap S^{-1} I_n
  \end{align*}
\end{enumerate}
\end{theorem}
\begin{proof}
We first prove part (a). Let $t \in (I:s)$ for some $s$. Because  $\frac{t}{1}= \frac{st}{s} \in S^{-1}I$, we see $t \in I^{ec}$. Let $t \in I^{ec}$, so $\frac{t}{1}= \frac{i}{s}$ for some $i \in I,s \in S$. Observe $ ts s'=is' \in I$ for some $s'$ to conclude $t \in (I:s s')$, and we are done. We now prove part (b). It is clear that $S^{-1}\sqrt{I}\subseteq \sqrt{S^{-1}I}$. Let $\frac{a}{s}\in \sqrt{S^{-1}I}$, so $\frac{a^n}{s^n}=\frac{i}{s'}\in S^{-1}I$ for some $n,i,s'$. Let $s''$ satisfies  $a^n s' s''= is^n s'' \in I$. Observations of $\frac{a}{s}= \frac{a s' s''}{s s' s''}$ and $a s' s'' \in \sqrt{I}$ finish the proof.  We now prove part (c). It is clear that $S^{-1}(I_1 \cap  \cdots \cap I_n)\subseteq S^{-1}I_1 \cap \cdots S^{-1}I_n$. Let $\frac{a}{s}\in S^{-1}I_1 \cap \cdots \cap  S^{-1}I_n$. For each $j\in \set{1,\dots ,n}$, we may find $s_j,s_j'\in S,i_j \in I$ such that  $as_js_j'=s i_j s_j' \in I_j$. Writing 
 \begin{align*}
\frac{a}{s}= \frac{as_1s_1' s_2 s_2' \cdots s_n s_n'}{s s_1 s_1' s_2 s_2' \cdots  s_n s_n'}  \in S^{-1}(I_1\cap  \cdots \cap I_n)
\end{align*}
and we are done. 
\end{proof}
\section{Uniqueness of Primary Decomposition}
\label{UoP}
Let $A$ be a ring. We say a proper ideal $Q$ is \textbf{primary} if for each $xy \in Q$, either $x \in Q$ or $y^n \in Q$ for some $n>0$. Equivalently, a proper ideal $I$ is primary if and only if every zero-divisors in $A \quotient  Q$ is nilpotent. Clearly, the radical $P=\sqrt{Q} $ of a primary ideal $Q$ is prime. In such case, we say $Q$ is $P$\textbf{-primary}. A \textbf{primary decomposition} of an ideal $I$ is an expression of $I$ as a finite intersection of primary ideals
 \begin{align*}
I= \bigcap_{i=1}^n Q_i
\end{align*}
Such primary decomposition is said to be \textbf{irredundant} if $\sqrt{Q_i}$ are all distinct and no $Q_i$ is unnecessary in the sense that 
\begin{align*}
\bigcap_{j\neq i}Q_j \not \subseteq Q_i\text{ for all }i. 
\end{align*}
An ideal $I$ is said to be  \textbf{decomposable} if there exists some primary decomposition of $I$. Because finite intersection of $P$-primary ideals is again  $P$-primary, every decomposable ideal has an irredundant primary decomposition.  
\begin{theorem}
\label{Fut}
\textbf{(First uniqueness theorem for irredundant primary decomposition)} Given some irredundant primary decomposition $I= \bigcap_{i=1}^n Q_i$, we have 
\begin{align}
\label{QiRa}
\bset{\sqrt{Q_i}:1\leq i\leq n}= \operatorname{Spec}(R) \cap \bset{\sqrt{(I:x)} \subseteq R: x \in R } 
\end{align}
\end{theorem}
\begin{proof}
Before showing that both sides of \myref{equation}{QiRa} are subsets of each other, we first make the following observation. For all $x \in R$, clearly 
\begin{align*}
  (I:x)= \Big(\bigcap Q_i :x\Big) = \bigcap (Q_i : x)
\end{align*}
Therefore, 
\begin{align}
\label{sIxa}
\sqrt{(I:x)}= \bigcap \sqrt{(Q_i:x)}= \bigcap_{k:x \not\in Q_k} \sqrt{Q_k}  
\end{align}
where the last equality is justified by 
\begin{align*}
x \in Q_i \implies (Q_i:x)=R,\quad\text{ and } x \not\in Q_i \implies  \sqrt{(Q_i:x)} = \sqrt{Q_i} 
\end{align*}
We now prove that the left hand side of \myref{equation}{QiRa} is a subset of the right hand side. Fix $i$. By irredundancy of the decomposition, there exists some  $x\in R$ such that $x$ belongs to all $Q_j$ except  $Q_i$. This $x$ by \myref{equation}{sIxa} must satisfies
\begin{align*}
\sqrt{Q_i}  =  \sqrt{(I:x)} 
\end{align*}
Noting that $\sqrt{Q_i}$ must be prime due to $Q_i$ being primary, we have shown the left hand side of \myref{Equation}{QiRa} is a indeed a subset of the right hand side. \\

Now, suppose for some $x\in R$ that $\sqrt{(I:x)}$ is prime. Because prime ideal must be proper, we know there must exists some $k$ such that $x\not \in Q_k$. By \myref{equation}{sIxa}, to finish the proof, we only need to show $\sqrt{Q_k}\subseteq \sqrt{(I:x)}$ for some $k$ such that $x \not \in Q_k$. Assume not for a contradiction. Then for all $k$ such that $x \not \in Q_k$, there exists $y_k \in \sqrt{Q_k}$ such that $y_k \not \in \sqrt{(I:x)}$. The product of these $y_k$ is an element of  $\bigcap \sqrt{Q_k}$, thus an element of $\sqrt{(I:x)}$. This with $\sqrt{(I:x)}$ being prime shows that $y_k \in \sqrt{(I:x)}$ for some $k$, a contradiction. 
\end{proof}
Because of \customref{Fut}{the first uniqueness theorem}, we may well define the \textbf{inner spectrum} of decomposable ideal $I$, independent of choice of irredundant decomposition, to be 
\begin{align*}
\bset{\sqrt{Q_1},\dots ,\sqrt{Q_n}}
\end{align*}
where 
\begin{align*}
I= \bigcap_{i=1}^n Q_i\text{ is some irredundant primary decomposition. }
\end{align*}
Given such irredundant primary decomposition, we say $Q_i$ is an  \textbf{isolated primary component} if $\sqrt{Q_i}$ is minimal in the inner spectrum.  
\begin{lemma}
\label{P48}
\textbf{(preparation lemma for second uniqueness theorem)} Let $S$ be a multiplicatively closed subset of  $A$, and let  $Q$ be a $P$-primary ideal. If $S$ and  $P$ are disjoint, then  $S^{-1}Q$ is $S^{-1}P$-primary and $S(Q)=Q$. If  $S$ and  $P$ meet, then  $S^{-1}Q=S^{-1}A$. 
\end{lemma}
\begin{proof}
Suppose $S$ and $P$  are disjoint. Clearly we have $Q\subseteq S(Q)$, so to show $S(Q)=Q$, we only have to show $S(Q)\subseteq Q$. Let $a \in S(Q)$. The first part of \myref{Theorem}{Pol} states that $a \in (Q:s)$ for some $s \in S$. Because $Q \subseteq P$, this implies $a \in Q$. We have shown $S(Q)=Q$. Note that the second part of \myref{Theorem}{Pol} states that 
\begin{align*}
\sqrt{S^{-1}Q}=S^{-1}\sqrt{Q}=S^{-1}P  
\end{align*}
so for the case when $S$ and  $P$ are disjoint, it only remains to prove  $S^{-1}Q$ is indeed primary, which is routine and even unnecessary for the \customref{Sut}{Second uniqueness theorem below}. \\

Suppose $s \in S \cap P$. Let $s^n \in Q$. The fact that $S^{-1}Q=S^{-1}A$ follows from the fact $\frac{s^n}{1}$ is a unit with inverse $\frac{1}{s^n}$. 
\end{proof}
\begin{theorem}
\label{Sut}
\textbf{(Second uniqueness theorem for isolated primary component)} The isolated primary components of a decomposable ideal $I$ is uniquely determined by $I$, independent of the irredundant decomposition. 
\end{theorem}
\begin{proof}
Let $P$ be a minimal element of the inner spectrum of $I$, and let $I=\bigcap_{i=1}^n Q_i$ be an arbitrary irredundant primary decomposition, where $\sqrt{Q_1}=P$. Clearly $S\triangleq A\setminus P$ is multiplicatively closed. Because the definition of $S$ is independent of the choice of the primary decomposition, we are only required to prove the goal
\begin{align*}
\label{QSI}
Q_1=S(I)
\end{align*}
Because $S$ and  $P$ are disjoint, we may apply \myref{Lemma}{P48} to reduces this goal into 
\begin{align*}
S^{-1}Q_1= S^{-1}I
\end{align*}
Noting that $\sqrt{Q_i}$ meets $S=A \setminus \sqrt{Q_1} $ for every $i>1$ due to the minimality of $\sqrt{Q_1}$, we conclude our proof using \myref{Lemma}{P48} and the third part of \myref{Theorem}{Pol}:
\begin{align*}
S^{-1}I = \bigcap_{i=1}^n S^{-1}Q_i=S^{-1}Q_1
\end{align*}
\end{proof}
\section{Existence of Primary Decomposition in Noetherian ring}
\label{EoPDiNr}
Let $A$ be a ring, and let  $I\subseteq A$ be some ideal. We say $I$ is  \textbf{irreducible} if whenever $I$ is expressed as an intersection of two ideals, $I$ equals to one of them. Clearly, to show every ideal in Noetherian ring is decomposable, we only need to show the following two lemmas. 
\begin{lemma}
In Noetherian ring $A$, every ideal is a finite intersection of irreducible ideals.  
\end{lemma}
\begin{proof}
Assume not for a contradiction. Let $I$ be a maximal element of the collection $\Sigma$ of all ideals that can not be expressed as finite intersections of irreducible ideals. Clearly, $I$ must be reducible, so there exists some $I=J_1 \cap J_2$ such that $I\subset J_1$ and $I\subset J_2$. Because $J_1,J_2 \not \in \Sigma$, we may express them both as finite intersection of irreducible ideals. This implies that we may express $I$ as a finite intersection of irreducible ideals, a contradiction. 
\end{proof}
\begin{lemma}
In Noetherian ring $A$, every irreducible ideal is primary.   
\end{lemma}
\begin{proof}
Let $I\subseteq A$ be irreducible. Clearly, the zero ideal in  $A\quotient I$ is irreducible, and if the zero ideal in $A \quotient I$ is primary, then $I$ is also primary. Because of such, we may WLOG suppose $I$ is zero.  Let $xy=0$ and $y\neq 0$. We are required to show $x^n=0$. Clearly we have the chain  $\operatorname{Ann}(x)\subseteq \operatorname{Ann}(x^2) \subseteq \cdots $, and by a.c.c., there exists some $n$ such that $\operatorname{Ann}(x^n)=\operatorname{Ann}(x^{n+1})= \cdots $. We now show 
\begin{align}
\label{xny}
  \langle x^n\rangle \cap \langle y\rangle =0
\end{align}
Let $a \in \langle x^n\rangle \cap \langle y\rangle $. Because $a \in \langle y\rangle $ and $xy=0$, we know  $ax=0$. Writing $a=bx^n$, we now see $b \in \operatorname{Ann}(x^{n+1})=\operatorname{Ann}(x^n)$. This implies $a=bx^n=0$. We have shown  \myref{Equation}{xny}.\\

Finally, because the zero ideal is irreducible, we must have $\langle x^n\rangle =0$ or $\langle y\rangle =0$. Because $y\neq 0$, we may conclude $x^n=0$.  
\end{proof}
\section{Artin Rings}
\label{AR}
Set theoretically similar to \customref{EDoN}{equivalent definition of Noetherian}, by axiom of choice, we have 
\begin{theorem}
\label{EDoA}
\textbf{(Equivalent Definition of Artinian)} Let $M$ be a module. We have 
 \begin{enumerate}[label=(\alph*)]
  \item $M$ is Artinian.  
  \item Every nonempty collection of submodules of $M$ has a minimal element.  
\end{enumerate}
\end{theorem}
From this definition, we see that Artin ring can only have finite number of maximal ideals. 
\begin{corollary}
\textbf{(Artin ring has only a finite number of maximal ideals)} If $A$ is an Artin ring, then  
\begin{align*}
A\text{ only has a finite number of maximal ideals. }
\end{align*}
\end{corollary}
\begin{proof}
Let $\Sigma$ be the collection of all finite intersection of maximal ideals of $A$, and let  $\mathfrak{m}_1 \cap  \cdots \cap \mathfrak{m}_n \in \Sigma$ be minimal. We claim that $\mathfrak{m}_1,\dots ,\mathfrak{m}_n$ are the only maximal ideals of $A$. To prove this, we only have to prove that for each maximal ideal $\mathfrak{m}$, there exist some $i$ such that $\mathfrak{m}_i \subseteq \mathfrak{m}$, and it will follows that $\mathfrak{m}=\mathfrak{m}_i$.\\

Assume not for a contradiction. Let $x_i \in \mathfrak{m}_i - \mathfrak{m}$ for all $i$. We see $\prod x_i \in \prod \mathfrak{m}_i \subseteq \bigcap \mathfrak{m}_i\subseteq \mathfrak{m}$, where the last set inclusion follows from minimality of $\bigcap \mathfrak{m}_i \in \Sigma$. Because  $\mathfrak{m}$ is prime, we see $x_i \in \mathfrak{m}$ for some $i$, a contradiction to the construction of  $x_i$.  
\end{proof}
\begin{theorem}
\label{Niin}
\textbf{(Nilradical in Artin ring is nilpotent)} If ring $A$ is Artinian, then
\begin{align*}
(\operatorname{Nil}(A))^k=0\text{ for some }k.
\end{align*}
\end{theorem}
\begin{proof}
Let $\mathfrak{a}\triangleq (\operatorname{Nil}(A))^k= (\operatorname{Nil}(A))^{k+1}= \cdots $. Assume for a contradiction that $\mathfrak{a}\neq 0$. Letting $\Sigma$ be the collection of all ideals $\mathfrak{b}$ such that $\mathfrak{a} \mathfrak{b}\neq 0$, we see $\Sigma$ is nonempty since $\mathfrak{a} \in \Sigma$, and therefore by \customref{EDoA}{equivalent definition of Artinian} there exists minimal $\mathfrak{c} \in \Sigma$. Picking $x \in \mathfrak{c}$ such that $x \mathfrak{b}\neq 0$, we see by minimality of $\mathfrak{c}$ that $\mathfrak{c}=\langle x\rangle $. Checking that $(x\mathfrak{a})\mathfrak{a}=x \mathfrak{a}^2 =x \mathfrak{a}\neq 0$ and $x\mathfrak{a}\subseteq \mathfrak{a}$, again by minimality of $\langle x\rangle $, we see $x\mathfrak{a}=\langle x\rangle $. This implies $x=xy$ for some  $y \in \mathfrak{a} \supseteq \operatorname{Nil}(A)$, and therefore $x=xy=xy^2 =\cdots = xy^n =0$ for some large enough $n$, a contradiction to construction of $x$. 
\end{proof}
Given ring $A$, we define its \textbf{Krull dimension} to be the supremum of the length of all chains of prime ideals in $A$. Albeit tempting to treat Artinian a property symmetry to Noetherian, Artin rings is in fact a subclass of Noether rings. 
\begin{theorem}
\label{AcoA}
\textbf{(Actual characterization of Artin Rings)} Given some ring $A$, 
 \begin{align*}
A\text{ is Artin }\iff  A\text{ is Noetherian with }\operatorname{Krudim}(A)=0
\end{align*}
\end{theorem}
\begin{proof}
$(\implies)$: We first prove $\operatorname{Krudim}(A)=0$. Note that $\operatorname{Krudim}(A)=0$ means exactly that all prime ideal of $A$ are maximal. Let $\mathfrak{p}\subseteq A$ be prime, and $x \neq 0\in B \triangleq A\quotient p$. Because $B$ is Artinian, there exists some $n$ such that $\langle x^n\rangle =\langle x^{n+1}\rangle $, which implies 
\begin{align*}
x^n =x^{n+1}y,\quad\text{for some }y \in B
\end{align*}
Because $x \neq 0$ and $B$ is an integral domain, this tell us $xy=1$. We have shown that $B$ is a field, i.e., $\mathfrak{p}$ is indeed maximal. \\

Let $\mathfrak{m}_1,\dots ,\mathfrak{m}_n$ be the maximal ideals of $A$. Because every maximal ideal in Artin ring is prime and $\mathfrak{m}_1,\dots ,\mathfrak{m}_n$ are the only maximal ideal of $A$, we see that \customref{EDfN}{$\prod \mathfrak{m}_i^k\subseteq (\bigcap  \mathfrak{m}_i)^k =(\operatorname{Nil}(A))^k=0$} for some $k$ by  \myref{Theorem}{Niin}. It then follows from \myref{Corollary}{Aiet} that $A$ is indeed Noetherian. \\

$(\impliedby)$:  Because $A$ is Noetherian,  \customref{EoPDiNr}{we know the zero ideal of $A$ has an irredundant  primary decomposition $0= \bigcap_{i=1}^n \mathfrak{q}_i$}. Let $\mathfrak{p}$ be a prime ideal. Because $\bigcap_{i=1}^n \mathfrak{q}_i \subseteq \mathfrak{p}$, we know $\mathfrak{q}_i \subseteq \mathfrak{p}$ for some $i$\footnote{Otherwise you may cause a contradiction by considering $\prod x_i$ where $x_i \in \mathfrak{q}_i - \mathfrak{p}$}, which by  \customref{raed}{definition of radical} implies that $\sqrt{ \mathfrak{p}_i }\subseteq \mathfrak{p}$. We have shown \customref{EDfN}{$\operatorname{Nil}(A)= \bigcap_{i=1}^n \sqrt{\mathfrak{q}_i} $}. Letting $\mathfrak{a}=0$ in \myref{Corollary}{IiN}, we now see
\begin{align*}
\prod_{i=1}^n (\sqrt{\mathfrak{q}_i})^k \subseteq (\bigcap_{i=1}^n \sqrt{\mathfrak{q}_i} )^k= (\operatorname{Nil}(A))^k=0
\end{align*}
Because $\operatorname{Krudim}(A)=0$, we know $\sqrt{\mathfrak{q}_i}$ are all maximal ideals. It then follows from \myref{Corollary}{Aiet} that $A$ is Artinian. 
\end{proof}
Having zero Krull dimension together with being local form a very lethal weapon. A ring $A$ satisfies  $A$ local and  $\operatorname{Kudim}(A)=0$ if and only if $A$ contains exactly one prime ideal, i.e., its nilradical. From this point of view, \myref{Theorem}{AcoA} is very strong, which you can already guess from its long proof. Indeed, \myref{Theorem}{AcoA} give us the following two useful corollaries, which are all later used to establish the \customref{ECoDp1}{equivalent characterization of DVR}.  
\begin{corollary}
\label{Potm}
\textbf{(Powers of the maximal ideal of Noetherian local rings)} Given Noetherian local ring $(A,\mathfrak{m})$, exactly one of the following two statements is true: 
\begin{enumerate}[label=(\alph*)]
  \item $\mathfrak{m}^n \neq \mathfrak{m}^{n+1}$ for all $n$. 
  \item $\mathfrak{m}^n=0$ for some $n$, and  $A$ is an Artin ring. 
\end{enumerate}
\end{corollary}
\begin{proof}
  Suppose $\mathfrak{m}^n=\mathfrak{m}^{n+1}$ for some $n$. Because $A$ is Noetherian and local, we may apply  \customref{Nakayama}{Nakayama Lemma} to see $\mathfrak{m}^{n}=\mathfrak{m}^{n+1}=0$. To show $A$ is indeed Artinian, by  \myref{Theorem}{AcoA}, we only have to prove that $\mathfrak{m}$ is the only prime ideal of $A$. Too see thus, just observe $\mathfrak{m} \subseteq \sqrt{\mathfrak{m}^n}\subseteq \sqrt{ \mathfrak{p}}=\mathfrak{p} $ if $\mathfrak{p}$ is prime. 
\end{proof}

\begin{corollary}
\label{Potm}
\textbf{(Powers of the maximal ideal of Artin local ring)} Consider the Artin local ring $(A,\mathfrak{m},k)$. We have 
\begin{align*}
A\text{ is a PID with every proper nonzero ideal being some power of $\mathfrak{m}$ }\iff \operatorname{dim}_{k}(\mathfrak{m}\quotient \mathfrak{m}^2)\leq 1
\end{align*}
\end{corollary}
\begin{proof}
$(\implies ):$ This follows from noting that if we let $x$ be the generator of  $\mathfrak{m}$, then $[x]$ spans $\mathfrak{m}\quotient \mathfrak{m}^2$ over $k$. \\

$(\impliedby)$: If  $\operatorname{dim}_k(\mathfrak{m}\quotient \mathfrak{m}^2)=0$, then $\mathfrak{m}=\mathfrak{m}^2$, so by \customref{Nakayama}{Nakayama Lemma}\footnote{Because  \customref{AcoA}{$A$ is Noetherian}, we know $\mathfrak{m}$ is finitely generated.}, $\mathfrak{m}=0$, implying $A$ is a field. Suppose $\operatorname{dim}_k(\mathfrak{m}\quotient \mathfrak{m}^2)=1$ and $[x]\in \mathfrak{m}\quotient \mathfrak{m}^2$ spans $\mathfrak{m}\quotient \mathfrak{m}^2$ over $k$. We first show that indeed, $\mathfrak{m}$ as an ideal of $A$ is generated by just $x$.\\

Let $y \in \mathfrak{m}$. Because $[x]\in \mathfrak{m}\quotient \mathfrak{m}^2$ spans $\mathfrak{m}\quotient \mathfrak{m}^2$ over $k$. We know $[y]=[ax] \in \mathfrak{m}\quotient \mathfrak{m}^2$ for some $a \in A$. This implies $y-ax= m_1m_1'+\cdots + m_nm_n'$ for some $m_i,m_i \in \mathfrak{m}$, which implies $[y]=[y-ax] \in \mathfrak{m}\quotient \langle x\rangle $ is also an element of $\mathfrak{m}(\mathfrak{m}\quotient \langle x\rangle )$. We have shown  $\mathfrak{m}(\mathfrak{m}\quotient \langle x\rangle )=\mathfrak{m}\quotient \langle x\rangle $. It now follows from \customref{Nakayama}{Nakayama Lemma}\footnote{$\mathfrak{m}\quotient \langle x\rangle $ is finitely generated because $A$ is  \customref{AcoA}{$A$ is Noetherian}.} that $\mathfrak{m}\quotient \langle x\rangle =0$, i.e., $\mathfrak{m}=\langle x\rangle $ indeed. \\

Now, let $\mathfrak{a}\subset A$ be a proper nonzero ideal.\footnote{If $\mathfrak{a}=A$, then $\mathfrak{a}=\langle 1\rangle $.} \myref{Theorem}{AcoA} tell us that  $\operatorname{Krudim}(A)=0$, and so $\mathfrak{m}^n=\operatorname{Nil}(A)^n=0$ for some $n$ by \myref{Theorem}{Niin}. Let $r$ satisfies $\mathfrak{a}\subseteq \mathfrak{m}^r,\mathfrak{a}\not \subseteq \mathfrak{m}^{r+1}$. By construction, there exist some $y \in \mathfrak{a}$ such that $y=ax^r$ for some $a \in A$ and  $y \not\in \langle x^{r+1}\rangle $. We now see this $a$ satisfies  $a \not \in \langle x\rangle = \mathfrak{m}$, implying $a$ is a unit. This shows $x^r=ya^{-1}\in \mathfrak{a}$. We have shown $\mathfrak{a}=\langle x^r\rangle $, as desired.
\end{proof}
\section{Valuation Rings}
Let $K$ be a field and  $D$ a subring of  $K$. If for all  $x \in K$ either $x \in D$ or $x^{-1} \in D$, then the mapping $F\longrightarrow \operatorname{Frac}(D)$ defined by  
\begin{align*}
x\mapsto \begin{cases}
  \frac{x}{1}& \text{ if $x \in D$ }\\
  \frac{1}{x^{-1}}& \text{ if $x\not\in D$ }
\end{cases}
\end{align*}
forms a field isomorphism. Because of this identification, for each integral domain $D$, it make sense to say $D$ is a  \textbf{valuation ring of field $K$} if 
\begin{align}
\label{xinD}
x\in \operatorname{Frac}(D)\implies x \in D\text{ or }x^{-1} \in D
\end{align}
 since if we replace $\operatorname{Frac}(D)$ with $K$ in \myref{Equation}{xinD}, we know that  $K$ is isomorphic to   $\operatorname{Frac}(D)$. Given a field $K$ and a totally ordered abelian group $\Gamma $, we say $\nu : K\rightarrow \Gamma \cup \set{\infty}$ is a \textbf{valuation} if it satisfies:
\begin{enumerate}[label=(\alph*)]
  \item $\nu ^{-1}(\infty)= \set{0}$. 
  \item $\nu  (xy)=\nu  (x)+ \nu  (y)$. 
  \item $\nu  (x+y)\geq \min  \set{\nu (x),\nu  (y)}$, with the equality holds true if $\nu (x)\neq \nu  (y)$. 
\end{enumerate}
\begin{theorem}
\label{EDovr}
\textbf{(Equivalent Definitions of valuation rings)} Let $D$ be an integral domain. The following are equivalent 
\begin{enumerate}[label=(\roman*)]
  \item $D$ is a valuation ring. 
  \item The principal ideals of $D$ are totally ordered by inclusion. 
  \item The ideals of $D$ are  totally ordered by inclusion.  
  \item There is a totally ordered abelian group $\Gamma $ and a valuation $\nu : \operatorname{Frac}(D)\rightarrow \Gamma \cup \set{\infty}$ such that $D= \set{x \in \operatorname{Frac}(D): \nu  (x)\geq 0 \in \Gamma }$. 
\end{enumerate}
\end{theorem}
\begin{proof}
It is easy to prove $(\text{vi})\implies (\text{i})\implies (\text{ii})\implies (\text{iii})\implies (\text{i})$. For $(\text{i})\implies (\text{iv})$, let $D^{\times}$ be the set of units of $D$. Clearly,  $D^{\times}$ is a normal subgroup of $(\operatorname{Frac}D)^*$. Because $D$ is a valuation ring, we may well define a total order on $\Gamma \triangleq (\operatorname{Frac}D)^* \quotient D^\times$ by 
\begin{align*}
[x]\geq [y]\overset{\triangle}{\iff } xy^{-1} \in D
\end{align*}
It is routine to check that $\nu  : \operatorname{Frac}(D)\rightarrow \Gamma \cup  \set{\infty}$ defined by 
\begin{align*}
\nu (x)\triangleq \begin{cases}
  [x]& \text{ if $x\neq 0$ } \\
  \infty& \text{ if $x=0$ }
\end{cases}
\end{align*}
is a valuation such that $D= \set{x\in \operatorname{Frac}(D):\nu  (x)\geq 0 \in \Gamma }$. 
\end{proof}
Obviously, the name "valuation rings" comes from the fact an integral domain $D$ is a valuation ring if and only if its field of fraction admits some valuation whose preimage of nonnegative element is exactly  $D$. Because of such, given field $K$  and valuation $\nu  : K \rightarrow \Gamma \cup \set{\infty}$, when we want to refer to the valuation ring $\set{x\in K : \nu  (x)\geq 0 \in \Gamma }$, we may refer it as the valuation ring \emph{of} $\nu $.  

\begin{theorem}
  \label{Vraic}
\textbf{(Valuation rings are integrally closed)} If $D$ is a valuation ring, then $D$ is integrally closed. 
\end{theorem}
\begin{proof}
Let $x \in \operatorname{Frac}(B)$ be integral over $B$, say,  
\begin{align*}
x^n + b_1 x^{n-1}+ \cdots + b_n=0,\quad \text{where }b_i \in B.  
\end{align*}
If $x \in B$ there is noting to prove. If not, then $x^{-1}\in B$ and thus $x=-(b_1+b_2x^{-1}+\cdots + b_n x^{1-n})\in B$. 
\end{proof}



Clearly, if $D$ is a valuation ring of $\nu$, then the set of units of $D$ is exactly the preimage  $\nu ^{-1}(0)$.\footnote{Because $0=\nu  (1)=\nu (x)+ \nu  (x^{-1})$ and $D=\nu ^{-1}(\set{x \in K: \nu  (x)\geq 0\in \Gamma })$, we know $x,x^{-1}\in D \implies \nu  (x)=0$, and we also know $\nu  (x)=0 \implies \nu (x^{-1})=0 \implies x^{-1} \in D$.} This tell us for all $x \in K$, we have 
\begin{table}[h]
\centering
\begin{tabular}{l|l|l}
                   & $x\in D$    & $x\not \in D$ \\ \hline
$x^{-1}\in D$      & $\nu (x)=0$ & $\nu(x)<0$    \\ \hline
$x^{-1}\not \in D$ & $\nu (x)>0$ & impossible   
\end{tabular}
\end{table}



Moreover, because \customref{EDovr}{ideals of valuation rings are totally ordered by inclusion}, we know valuation ring is local, and thus the set of non-units form an ideal, the unique maximal ideal $\mathfrak{m}$. In fact, $\mathfrak{m}$ has the form:  
\begin{align*}
\mathfrak{m}= \set{x \in D: \nu  (x)>0 \in \Gamma }
\end{align*}
\section{Equivalent Characterizations of DVR}
Let $K$ be a field. A \textbf{discrete valuation $\nu :K\rightarrow \Gamma \cup  \set{\infty}$} is a valuation such that $\Gamma \cong  \Z$ as totally ordered abelian group. An integral domain $D$ is a \textbf{discrete valuation ring of} if $D=\set{x\in \operatorname{Frac}(D):\nu  (x)\geq 0}$ for some nontrivial discrete valuation $\nu : \operatorname{Frac}(D)\rightarrow \Z \cup  \set{\infty}$. Because every ideal $\mathfrak{a}\subseteq D$ is of the form: \footnote{To see the "$\supseteq$", let $a\in \mathfrak{a}$ satisfies $\nu  (a)= \min  \nu  (\mathfrak{a})$ and observe for all $x \in D$ such that $\nu (x)\geq \nu (a)$, we have $x=(xa^{-1})a\in \mathfrak{a}$ since $\nu (xa^{-1})=\nu (x)-\nu (a)\geq 0 \implies xa^{-1}\in D$}
\begin{align*}
\mathfrak{a}=\set{x \in D: \nu  (x)\geq \min \nu  (\mathfrak{a})}
\end{align*}
We see that the collection of the ideals in DVRs is exactly $\set{\mathfrak{a}_k:k \inn}$ where 
\begin{align}
\label{cDVR}
\mathfrak{a}_k= \set{x \in D : \nu  (x)\geq pk}= \langle x^k\rangle \text{ for any }\nu  (x)=p\triangleq  \min \set{\nu  (d) \inn:d^{-1}\not \in D}
\end{align}
In fact, we can conversely characterize DVRs using these good properties. 
\begin{theorem}
\label{ECoDp1}
\textbf{(Equivalent Characterizations of DVR: part 1)} Given an $1$-Krull-dimensional Noetherian local domain $(D,\mathfrak{m},k)$, the following are equivalent: 
\begin{enumerate}[label=(\roman*)]
  \item $D$ is a DVR.  
  \item $D$ is integrally closed. 
  \item $\mathfrak{m}$ is principal. 
  \item $\operatorname{dim}_k (\mathfrak{m}\quotient \mathfrak{m}^2)=1$. 
  \item Every proper nonzero ideal of $D$ is a power of $\mathfrak{m}$. 
  \item There exists $x\in D$ such that every nonzero ideal is of the form $\langle x^s\rangle ,s\geq 0$. 
\end{enumerate}
\end{theorem}
\begin{proof}
Before we start going the rounds, we shall make the following remark 
\begin{enumerate}[label=(\Alph*)]
  \item Because $D$ is an $1$-Krull-dimensional local domain, $D$ has only two prime ideals, i.e., the zero ideal and $\mathfrak{m}$. 
  \item  Because $D$ is Noetherian, by remark (A) and  \myref{Corollary}{IiN}, for every proper nonzero ideal $\mathfrak{a}\subseteq D$, we have some $n$ that satisfies $\mathfrak{m}^n \subseteq \mathfrak{a}$ and $\mathfrak{m}^{n-1}\not \subseteq \mathfrak{a}$. 
  \item Because $\operatorname{Krudim}(D)=1$ and $D$ is Noetherian local, $\mathfrak{m}^n \neq \mathfrak{m}^{n+1}\text{ for all }n\geq 0$ by \myref{Theorem}{Potm}. 
\end{enumerate}
We may now start going rounds. 
(i)$\implies $(ii) follows from the fact  \customref{Vraic}{valuation ring are integrally closed}.\\

(ii)$\implies $(iii): Let $a \neq 0 \in \mathfrak{m}$.  By remark (B), there exists some $n$ such that  $\mathfrak{m}^n \subseteq \langle a\rangle $ and $\mathfrak{m}^{n-1}\not \subseteq  \langle a\rangle $. Picking $b \in \mathfrak{m}^{n-1}-\langle a\rangle $, and defining $x \triangleq  \frac{a}{b} \in \operatorname{Frac}(D)$, clearly we have $x^{-1}\not\in D$, so by premise, $x^{-1}$ is not integral over $D$. Therefore, $x^{-1}\mathfrak{m} \not \subseteq \mathfrak{m}$\footnote{Otherwise, we may set $A\triangleq D$, $\mathfrak{a}\triangleq D$,  $M\triangleq \mathfrak{m}$, and $\pfi (m)\triangleq x^{-1}m$ in   \customref{CHTffgm}{Cayley-Hamilton Theorem for finitely generated module} to deduce $x^{-1}$ is integral over $D$. Note that $\mathfrak{m}\neq 0$ because $\operatorname{Krudim}(D)=1$.}. This, together with the fact that $x^{-1}\mathfrak{m}=a^{-1}(b \mathfrak{m})\subseteq \mathfrak{m}^n \subseteq a^{-1}\langle a\rangle \subseteq A$  by construction, implies $x^{-1}\mathfrak{m}=A$, since $\mathfrak{m}\neq 0$ is the only maximal ideal of $A$. In conclusion, one can now finish the proof by checking, indeed,  $\mathfrak{m}=xA=\langle x\rangle $. \\

(iii)$\implies $(iv): If $\mathfrak{m}$ is generated by $x$ over $D$, then $\mathfrak{m}\quotient \mathfrak{m} $ is spanned by $[x]\in \mathfrak{m}\quotient \mathfrak{m}^2$ over $k$, and so by remark  (C), we have $\operatorname{dim}_k(\mathfrak{m}\quotient \mathfrak{m}^2)=1$. \\

(iv)$\implies $(v): Let $\mathfrak{a}\subset D$ be some proper nonzero ideal. By remark (B), there exists some $n$ that satisfies  $\mathfrak{m}^n \subseteq \mathfrak{a}$. By \customref{ctfr}{ring correspondence theorem} and \myref{theorem}{cpoN}, $A\quotient \mathfrak{m}^n$ is Noetherian local, and thus by \myref{corollary}{Potm} Artin. Now, checking that indeed the square of image of $\mathfrak{m}$ is the image of $\mathfrak{m}^2$ under quotient map $A\longrightarrow A\quotient \mathfrak{m}^n$, and checking that $\operatorname{dim}_{(A\quotient \mathfrak{m}^n)\quotient \mathfrak{m}}(\mathfrak{m}\quotient \mathfrak{m}^2)\leq \operatorname{dim}_k(\mathfrak{m}\quotient \mathfrak{m}^2)=1$, we may apply \myref{corollary}{Potm} to conclude that $\mathfrak{a}$ is a power of $\mathfrak{m}$ in $A\quotient \mathfrak{m}^n$. Now, says $\mathfrak{a}=\mathfrak{m}^r$ in $A\quotient \mathfrak{m}^n$, because the quotient map  $A \longrightarrow A\quotient \mathfrak{m}^n$ maps $\mathfrak{m}^r$ to the $r$-th power of image of $\mathfrak{m}$, we see by \customref{ctfr}{ring correspondence theorem} that indeed $\mathfrak{a}=\mathfrak{m}^r$ in $A$. \\

 (v)$\implies$(vi): By remark (C), there exists $x \in \mathfrak{m}-\mathfrak{m}^2$, and by premise, $\langle x\rangle =\mathfrak{m}^r$ for some $r$. Because if $r>1$, then  $x \in \mathfrak{m}^r \subseteq \mathfrak{m}^2$, we see $r=1$. It is then easy to check $\mathfrak{m}^s=\langle x^s\rangle $  for all $s \inn$.  \\

  (vi)$\implies $(i): Let $\mathfrak{m}\triangleq \langle x\rangle $. For all $y\in D$, one define $\nu (y)\triangleq n$ where $n\geq 0$ is  the smallest nonnegative integer such that $y \not\in \langle x^n\rangle $. To finish the proof one may check $\nu  (yz^{-1})\triangleq \nu (y)-\nu (z)$ well define a discrete valuation on $\operatorname{Frac}(D)$. 
\end{proof}
\section{UFT for ideals in $1$-Krull-dimensional Noetherian domain}
Before the main course, we first develop some basic notion. We say two ideals are \textbf{coprime} if their sum equals to the whole ring. Note that two prime ideals need not be coprime. If $K$ is a field, then $\langle x\rangle ,\langle y\rangle $ are not coprime in $K[x,y]$. 
\begin{proposition}
\label{Poc}
\textbf{(Product of coprime ideals is the intersection)} Let $I_k$ be a finite collection of pairwise coprime ideals. We have  $\prod I_k= \bigcap I_k$. 
\end{proposition}
\begin{proof}
The proof relies on induction of total number of the pairwise coprime ideals. The base case is when there are only two, says, $I$ and  $J$. Clearly  $IJ \subseteq I \cap J$. To prove the converse, observe for $c \in I \cap J$, there exists $1=i+j$ so that  $c=ci+cj$, where $ci,cj \in I \cap J$. 
\end{proof}
\begin{theorem}
\textbf{(UFT for ideals in Noetherian domain of Krull Dimension 1)} If $A$ is a Noetherian domain of Krull dimension $1$, then every nonzero ideal  $I \subseteq A$ can be uniquely expressed as a product of primary ideals whose radicals are all distinct. 
\end{theorem}
\begin{proof}
We first note that 
\begin{enumerate}[label=(\roman*)]
  \item Because $\operatorname{Krudim}(A)=1$, every prime ideal in $A$ is maximal.  
  \item Two distinct maximal ideals are always coprime. 
  \item $\sqrt{J},\sqrt{J'}$ coprime $\implies J,J'$ coprime.\footnote{$x+y=1,x^n \in J,y^k \in J' \implies 1=1^{n+k}=(x+y)^{n+k}\in J+J'$.}
\end{enumerate}
For existence, first observe that   \customref{EoPDiNr}{because $A$ is Noetherian, $I$ has an irredundant primary decomposition $I= \bigcap  Q_i$}. Then, by (i), (ii), (iii), and \myref{Proposition}{Poc}, we have 
\begin{align*}
I=\bigcap Q_i=\prod Q_i
\end{align*}
To see $\sqrt{Q_i}$ are indeed distinct, just note that the primary decomposition  $I= \bigcap Q_i$ is irredundant. For uniqueness, suppose $I= \prod Q_i=\prod Q_i'$, where $\sqrt{Q_i}$, just like $\sqrt{Q_j}$, are distinct and prime. Again, by (i), (ii), (iii), and \myref{Proposition}{Poc}, we have 
\begin{align*}
I = \prod Q_i = \bigcap Q_i = \prod Q_i' = \bigcap Q_i' 
\end{align*}
Because $\sqrt{Q_i}$ are distinct, by \customref{Fut}{first uniqueness theorem for primary decomposition}, we know none of $Q_i$ are redundant, i.e., $I= \bigcap Q_i$ is an irredundant primary decomposition. Same argument shows that $I= \bigcap Q_i'$ is also an irredundant primary decomposition. The fact that these two primary decomposition are identical up to a renewal of index then follows from \customref{Sut}{second uniqueness theorem for primary decomposition} and noting that every $\sqrt{Q_i},\sqrt{Q_i'} $ are isolated because by (i) they are all maximal.    








\end{proof}
\section{Fractional Ideal}
Let $A$ be an integral domain, and  $K\triangleq \operatorname{Frac}(A)$. Given two $A$-submodule $N,M\subseteq K$, we define their \textbf{product} and \textbf{quotient} and the same way we define product and quotient\footnote{See \myref{Equation}{IS} and \myref{Equation}{Iq}} for ideals of a ring:   
\begin{align*}
NM\triangleq \set{ \sum_{\text{ finite}}nm \in K: n \in N \text{ and }m \in M}\text{ and }(N:M)\triangleq \set{x\in K : xM \subseteq N}
\end{align*}
Clearly, $A$-submodules of  $K$ are indeed closed under  these two binary operation, and moreover the product for $A$-submodule of  $K$ is associative, commutative, and has a unique identity $A$, forming a commutative monoid\footnote{You may google what is a monoid.}.   \\

A \textbf{fractional ideal} of $A$ is an  $A$-submodule  $M \subseteq K$ such that $xM \subseteq A$ for some $x\neq 0 \in A$. Clearly, fractional ideals need not be subsets of $A$, so fractional ideals are not always ideals of $A$\footnote{However unfortunate, the naming is "justified" in the sense that fractional ideals "act like" ordinary ideals with the twist that denominators are allowed, and moreover, if $xM\subseteq A$ for some $x$, then $xM$ is indeed an ideal.}. If there is need to talk about fractional ideal, some people use the term \textbf{integral ideal} to refer to an ordinary ideal. Clearly the set of fractional ideal is closed under product and contains $A$, so the set of fractional ideals of $A$ is a sub-monoid of the commutative monoid of  $A$-submodules of  $K$.\\ 

An \textbf{invertible ideal} of $A$ is an $A$-submodule of  $M \subseteq A$ such that $NM=A$ for some $A$-submodule $N\subseteq K$. In other words, it is the set of all elements of the commutative monoid of $A$-submodule of  $K$ that has an inverse. From this point of view, it is clear that the set of invertible ideal is closed under product, and thus forms a group\footnote{which automatically implies the uniqueness of inverses of invertible ideals}.\begin{proposition}
\label{Foti}
\textbf{(Form of the inverse of invertible ideal)} Let $A$ be an integral domain, and $K\triangleq \operatorname{Frac}(A)$. If  $M$ is invertible with inverse $N$, then  $N= (A:M)$.  
\end{proposition}
\begin{proof}
Because $MN=A$ and the product is associative, we know  $(A:M)\subseteq (A:M)A= (A:M)MN$, which give us the desired inequality: 
\begin{align*}
N \subseteq (A:M)\subseteq (A:M)MN\subseteq AN\subseteq N
\end{align*}
finishing the proof.
\end{proof}
Let $M$ be an element of the group invertible ideals of  $A$. From \customref{Foti}{$M^{-1}=(A:M)$}, we see that $M$ as an  $A$-module is finitely generated\footnote{$\sum x_iy_i =1$ for some $x_i \in (A:M),y_i \in M\implies M= \langle y_i\rangle $} and thus a fractional ideal of $A$\footnote{$(x_1\cdots x_n)\langle \frac{y_1}{x_1},\dots ,\frac{y_n}{x_n}\rangle \subseteq A$.}. We have shown that the group of invertible ideals is a sub-monoid of the monoid of  fractional ideals of $A$. \\ 

For next theorem, note that given any $A$-submodule $N\subseteq K$ and prime $\mathfrak{p}\subseteq A$, we can and will identify $N_\mathfrak{p}$ as an $A_\mathfrak{p}$-submodule of $\operatorname{Frac}(A)$. This is because by universal property, we have the diagram  
% https://q.uiver.app/#q=WzAsNixbMiwwLCJBIl0sWzQsMCwiQV9cXG1hdGhmcmFre3B9Il0sWzIsMiwiXFxvcGVyYXRvcm5hbWV7RnJhY30oQSkiXSxbNCwyLCJcXG9wZXJhdG9ybmFtZXtGcmFjfShBX1xcbWF0aGZyYWt7cH0pIl0sWzAsMCwiTSJdLFswLDIsIk1fXFxtYXRoZnJha3twfSJdLFs0LDIsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzQsNV0sWzUsMiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMCwyXSxbMCwxXSxbMSwzXSxbMiwzLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJhcnJvd2hlYWQifX19XV0=
\[\begin{tikzcd}
	N && A && {A_\mathfrak{p}} \\
	\\
	{N_\mathfrak{p}} && {\operatorname{Frac}(A)} && {\operatorname{Frac}(A_\mathfrak{p})}
	\arrow[from=1-1, to=3-1]
	\arrow[hook, from=1-1, to=3-3]
	\arrow[from=1-3, to=1-5]
	\arrow[from=1-3, to=3-3]
	\arrow[from=1-5, to=3-5]
	\arrow[hook, from=3-1, to=3-3]
	\arrow[double_arrow   ,  from=3-3, to=3-5]
\end{tikzcd}\]
\begin{theorem}
\label{Iialp}
\textbf{(Invertibility is a local property)} Let $A$ be an integral domain, $K\triangleq \operatorname{Frac}(A)$, and $M\subseteq K$ a fractional ideal of $A$. We have 
\begin{align*}
  M \text{ is invertible } \iff M\text{  is finitely generated and  $M_\mathfrak{p}$ invertible of $A_\mathfrak{p}$ for all prime $\mathfrak{p}\subseteq A$. }
\end{align*}
\end{theorem}
\begin{proof}
For the only if part, since we already know that $M_\mathfrak{p}$ is finitely generated, we only have to perform a routine check of: 
\begin{align*}
M_\mathfrak{p}(A:M)_\mathfrak{p}=A_\mathfrak{p}.
\end{align*}
For the if part, first observe that $M(A:M)$ is an integral ideal. Let $\mathfrak{m}$ be an maximal integral ideal, and denote the integral ideal $M(A:M)$ by $\mathfrak{a}$. Check that 
\begin{align*}
\mathfrak{a}_\mathfrak{m}= M_\mathfrak{m}(A:M)_\mathfrak{m}= M_\mathfrak{m} (A_\mathfrak{m}:M_\mathfrak{m})=A_\mathfrak{m} 
\end{align*}
\footnote{$(A:M)_\mathfrak{m}=(A_\mathfrak{m}:M_\mathfrak{m})$ depends on the fact that $M$ is finitely generated. }
Let $x \in A - \mathfrak{m}$. Because $x \in A \subseteq A_\mathfrak{m}=\mathfrak{a}_\mathfrak{m}$, we know there exists $a \in \mathfrak{a}$ and $s \in A - \mathfrak{m}$ such that $x=as^{-1}$. Because maximal ideal is prime, we now see $a=xs \not\in \mathfrak{m}$. In other words, $\mathfrak{a}\not \subseteq \mathfrak{m}$. This with maximality of $\mathfrak{m}$ implies $\mathfrak{a}=A$, i.e., $M$ is invertible. 
\end{proof}
\section{Dedekind domain}
\begin{theorem}
\label{LdiD}
\textbf{(Local domain $D$ is DVR if and only if every nonzero fractional ideal of $D$ is invertible)} Let $D$ be a local domain. 
 \begin{align*}
D\text{ is a DVR } \iff  \text{ every nonzero fractional ideal of $D$ is invertible. }
\end{align*}
\end{theorem}
\begin{proof}
We first prove $(\implies )$. Let $ \mathfrak{a}_1 = \langle x\rangle $ in \myref{Equation}{cDVR}, and let $M$ be a nonzero fractional ideal. Let $y \in D$ satisfies $yM \subseteq D$, so $yM= \langle x^k\rangle $ for some $k\inn$. This implies $M$ is a fractional principal ideal $M= \langle x^{k- \frac{\nu  (y)}{p}}\rangle $, thus invertible.  \\ 

We now prove $(\impliedby)$. Because every integral ideal of $D$ is invertible and \customref{EDoN}{therefore finitely generated, we know $D$ is Noetherian}. Let $\mathfrak{m}$ be the unique maximal ideal of $D$. If every nonzero proper integral ideal is a power of $\mathfrak{m}$, then no nonzero proper ideal integral ideal that isn't $\mathfrak{m}$ can be prime, since, says $0\neq \mathfrak{m}^k \subset \mathfrak{m}$, we would have some $m_1,\dots ,m_k \not\in \mathfrak{m}^k$ that satisfy $m_1\cdots m_k \in \mathfrak{m}^k$. Therefore, if we can prove that every nonzero proper integral ideal is a power of $\mathfrak{m}$, we can conclude $\operatorname{Krudim}(D)=1$ and use \myref{Theorem}{ECoDp1} to  conclude $D$ is a DVR. \\

We have reduced the problem into proving every nonzero proper integral ideal is a power of $\mathfrak{m}$. Assume for a contradiction that this isn't true. Let $\Sigma$ be the collection of nonzero ideals that are not powers of $\mathfrak{m}$. \customref{EDoN}{Because $D$ is Noetherian, there exists some maximal element $\mathfrak{a} \in \Sigma$}. We know $\mathfrak{a} \subset \mathfrak{m}$ from $\mathfrak{a}\neq \mathfrak{m}^1$. Let $\mathfrak{m}^{-1}$ be the inverse of $\mathfrak{m}$ in the group of invertible ideals. Because $\mathfrak{a}\neq \mathfrak{m}^1$, we know $\mathfrak{a}\subset \mathfrak{m}$, which implies $\mathfrak{m}^{-1}\mathfrak{a}\subset \mathfrak{m}^{-1}\mathfrak{m}=D$. We have shown that $\mathfrak{m}^{-1}\mathfrak{a}$ is a proper integral ideal. Also, note that $\mathfrak{m}^{-1}\mathfrak{a}\supseteq \mathfrak{a}$ because by \myref{Proposition}{Foti} $1 \in \mathfrak{m}^{-1}$.\\

We shall cause a contradiction using the fact $\mathfrak{a}\subseteq \mathfrak{m}^{-1}\mathfrak{a}\subset D$, which we have just proved. Clearly, there are only two possibilities: either $\mathfrak{m}^{-1}\mathfrak{a}$ strictly include $\mathfrak{a}$ or not. If $\mathfrak{m}^{-1}\mathfrak{a}$ strictly include $\mathfrak{a}$, then $\mathfrak{m}^{-1}\mathfrak{a}$ is a power of $\mathfrak{m}$ by maximality of $\mathfrak{a}$, which implies that $\mathfrak{a}$ is a power of $\mathfrak{m}$, a contradiction. If not, then we may deduce $\mathfrak{a}=\mathfrak{m}\mathfrak{a}$, and use \customref{Nakayama}{Nakayama's Lemma}\footnote{ To see $\mathfrak{a}$ is finitely generated, observe that $\mathfrak{a}$ is an $D$-submodule of the Noetherian $D$-module and use  \myref{Theorem}{EDoN}. To see $\mathfrak{m}\subseteq \operatorname{Jacob}(D)$, just note that by definition  $\mathfrak{m}$ is the only maximal ideal of $D$.} to deduce $\mathfrak{a}=0$, also a contradiction.   



\end{proof}
A \textbf{Dedekind domain} is an integral domain $D$ whose localizations at nonzero prime are always DVR.
\begin{theorem}
\textbf{(An equivalent definition of Dedekind Domain)} Let $D$ be an integral domain. 
 \begin{align*}
D\text{ is a Dedekind domain }\iff \text{ every nonzero fractional ideal of $D$ is invertible. }
\end{align*}
\end{theorem}
\begin{proof}
  We first prove $(\implies )$. Let $M\neq 0$ be a fractional ideal. $\operatorname{Frac}(D)$ is Noetherian because $D$ is Noetherian. \customref{EDoN}{This implies $M$ is finitely generated}. Clearly for any prime $\mathfrak{p}\subseteq D$, $M_\mathfrak{p}$ is always nonzero fractional ideal of $D_\mathfrak{p}$. We have shown $M$ is finitely generated and  $M_\mathfrak{p}$ is always invertible ideal of $D_\mathfrak{p}$. Then because  \customref{Iialp}{invertibility is a local property},  $M$ is also invertible. \\

  We now prove $(\impliedby)$. Fix nonzero prime $\mathfrak{p}\subseteq D$. By \myref{Theorem}{LdiD}, we only have to prove every nonzero fractional ideal of $D_\mathfrak{p}$ is invertible. Let $M$ be a nonzero fractional ideal of $D_\mathfrak{p}$, and $x\neq 0\in \operatorname{Frac}(D)$ satisfies $xM \subseteq D_\mathfrak{p}$. To prove $M$ is invertible of  $D_\mathfrak{p}$, we must first note that if there exists some fractional ideal $N$ of $D_\mathfrak{p}$ such that  $(xM)N=D_\mathfrak{p}$, then we will have  $M(xN)=D_\mathfrak{p}$. Because $xM$ is a nonzero integral ideal of  $D_\mathfrak{p}$, this allow us to reduce the problem into proving all nonzero integral ideal of $D_\mathfrak{p}$ is invertible of $D_\mathfrak{p}$. \\

Let $\mathfrak{b}$ be an integral ideal of $D_\mathfrak{p}$, and define $\mathfrak{a}\triangleq \mathfrak{b}\cap D$. Clearly $\mathfrak{a}$ is an integral ideal of $D$, so by premise, $\mathfrak{a}$ is invertible. It now follows from $\mathfrak{b}=\mathfrak{a}_\mathfrak{p}$\footnote{You may check this.} and the fact \customref{Iialp}{invertibility is a local property} that $\mathfrak{b}$ is invertible of $D_\mathfrak{p}$. 
\end{proof}
\chapter{Completion}
\section{Completion}
Let $G$ be simultaneously a group and a topological space. We say $G$ is a \textbf{topological group} if addition $(x,y)\mapsto x+y$ and negation $x\mapsto -x$ are both continuous. 
\begin{equiv_def}
\textbf{(Topological Group)} Let $G$ be simultaneously a group and a topological space. The followings are equivalent: 
\begin{enumerate}[label=(\roman*)]
  \item $G$ is a topological group. 
  \item $G\times G\rightarrow G;(x,y)\mapsto x-y$ is continuous.  
\end{enumerate}
\end{equiv_def}
\begin{proof}
  (i)$\implies $(ii): Because subtraction is the composition:  
\begin{align*}
G\times G\xrightarrow{(x,y)\mapsto (x,-y)} G\times G \xrightarrow{(x,y)\mapsto x+y} G
\end{align*}
To see the first map is continuous, just observe both components of $(x,y)\mapsto (x,-y)$ are continuous.\footnote{The universal property of product topology implies that $f:X\rightarrow \prod Y_i$ is continuous if and only if $f_i$ are all continuous.}\\

(ii)$\implies $(i): Note that negation is the composition: 
\begin{align*}
G \xrightarrow{x\mapsto (0,x)} G\times G \xrightarrow{(x,y)\mapsto (x-y)}  G
\end{align*}
Again to see the first map is continuous, just observe that both components of $x\mapsto (0,x)$ are continuous. Note that addition is the composition: 
\begin{align*}
G \times G \xrightarrow{(x,y)\mapsto (x,-y)} G\times G \xrightarrow{(x,y)\mapsto x-y} G 
\end{align*}
The fact that the second components of the first map is continuous follows from the fact that negation is continuous. 
\end{proof}
Recall that given topological space $X$ and sequence  $\set{x_n}$ in $X$, we say $x_n \rightarrow y$ if for all neighborhood $U$ of  $y$, there exists some  $s(U)$ such that $x_n \in U$ for all $n\geq s(U)$. Let $G$ be an abelian topological group\footnote{We must require $G$ to be abelian here, so that we don't have to talk about notions like "left converge", "right converge", "left Cauchy," and "right Cauchy". For more information, see comments of this MO post: https://mathoverflow.net/questions/150703/completion-of-abelian-topological-groups# that give a reference to Bourbaki.}. Because $U+x$ are open for any open  $U\subseteq G$ and $x \in G$,\footnote{You may check that the translation $z\mapsto z-x$ is continuous.} we see that in $G$, 
\begin{align*}
x_n \rightarrow y \iff (x_n-y) \rightarrow 0. 
\end{align*}
Let $G$ be an abelian topological group. We say a sequence $\set{x_n}$ in  $G$ is a \textbf{Cauchy sequence} if for all neighborhood  $U$ of $0$, there exists some integer $s(U)$ such that 
\begin{align*}
x_n-x_m \in U \text{ for all }n,m\geq s(U)
\end{align*}
Clearly,  we may define on the collection of Cauchy sequences in $G$ an equivalence relation by saying two Cauchy sequences $\set{x_n},\set{y_n}$ are equivalent if and only if $x_n-y_n \rightarrow 0$.\footnote{Fix $U$, and let $f:G\rightarrow G$ be the negation. There exists $N$ such that $x_n-y_n \in f^{-1}(U)$ for all $n\geq N$. Such $N$ suffices to prove symmetry. Let  $g:G\times G\rightarrow G$ be the addition. There exists open $O_1,O_2\subseteq G$ such that $O_1 \times O_2 \subseteq g^{-1}(U)$, and there exists $N$ such that  $x_n-y_n \in O_1$ and $y_n-z_n \in O_2$. Such $N$ suffices to prove transitivity.} We denote the equivalence class of Cauchy sequences in $G$ by  $\widehat{G}$. Clearly we may well-define the obvious group structure on $\widehat{G}$.\footnote{The argument for well-definedness of group structure is the same as that for well-definedness of equivalence class.} \\

Let $G$ be an abelian topological group, and let $N$ be a neighborhood of  $0$. We denote $\widehat{N}\subseteq \widehat{G}$ the collection of equivalence class $[x_n]$ such that for every $\set{y_n}\in [x_n]$, there exists integer $M$ such that $y_n \in N$ for all $n\geq M$. Clearly, the collection of $U\subseteq \widehat{G}$ such that: 
\begin{align*}
\text{ For all $[x_n]\in U$ there exists neighborhood $N\subseteq G$ of $0$ such that  $[x_n]+ \widehat{N}\subseteq U$  }
\end{align*}
forms a topology on $\widehat{G}$.\footnote{To see that this topology is indeed closed under finite intersection, show $\widehat{N_1 \cap N_2}\subseteq \widehat{N_1}\cap \widehat{N_2}$} \\

Suppose moreover that $G$ has a \textbf{local basis} at  $0$ with the form: 
\begin{align*}
G=G_0 \supseteq G_1 \supseteq G_2 \supseteq \cdots,\quad \text{ where }G_i\text{ are all subgroups of $G$. }
\end{align*}
In other words, we have a descending chain of subgroups $G_i$ such that $G_i$ are all open and every neighborhood of  $0$ contains some $G_i$.  






\chapter{Variety}
\section{Topology of Zariski}
Let $X$ be a topological space. We say $X$ is \textbf{irreducible} if $X$ can not be written as union of two proper closed subset of $X$.    
\begin{equiv_def}
\textbf{(Irreducible topology)} Given topological space $X$, the followings are equivalent: 
\begin{enumerate}[label=(\roman*)]
  \item $X$ is irreducible. 
  \item Every nonempty open subset of $X$ is dense. 
  \item Every two nonempty open subset of $X$ have nonempty intersection. 
\end{enumerate}
\end{equiv_def}
\begin{proof}
$\hspace{3cm}$
  \\
(i)$\implies $(ii): If nonempty open $Y\subseteq X$ is not dense, then $\overline{Y}$ is proper closed and $X=\overline{Y}\cup (X-Y)$.

(ii)$\implies $(iii): Assume for a contradiction $Y_1,Y_2\subseteq X$ are nonempty open that have empty intersection. One get a contradiction from  $\overline{Y_1}=X$ and $Y_1\subseteq X-Y_2$.

(iii)$\implies $(i): Assume for a contradiction $X$ is reducible, says, $X=Y_1\cup Y_2$. One get a contradiction from noting $X-Y_1$ and $X-Y_2$ have empty intersection. 
\end{proof}
If we say a subset of some topological space is \textbf{irreducible}, we mean that that subset when given the subspace topology is irreducible. Let $X$ be some arbitrary topological space. In other words, $Y\subseteq X$ is irreducible if and only if $Y$ can not be written as  $Y=(F_1 \cap Y)\cup  (F_2\cap Y)$ where $F_1,F_2 \subseteq X$ are closed and don't contain $Y$. From this point of view, clearly, if $Y \subseteq X$ is irreducible, then so is $\overline{Y}$. By Zorn's Lemma\footnote{Clearly $\set{x}$ is irreducible. Let $E_n$ be an ascending chain of irreducible set containing  $x$. To see its upper bound is also irreducible, assume it isn't and cause a contradiction by showing  $E_n$ are reducible for large  $n$.}, every $x \in X$ has some not necessarily unique maximal irreducible set $Y$ containing $x$. We call these maximal irreducible sets  \textbf{irreducible components of $X$}. Because closure of an irreducible set is also irreducible, irreducible components are closed. \\

Let $X$ be a topological space. We say $X$ is  \textbf{Noetherian} if its closed sets satisfy descending chain condition. Clearly, subspace $Y$ of Noetherian space $X$ is also Noetherian\footnote{Given $X_1\cap Y \supseteq X_2 \cap Y \supseteq\cdots $, we have $X_n \cap Y=X_1 \cap  \cdots \cap X_n\cap Y$, and the descending chain $X_1\supseteq X_1 \cap X_2 \supseteq \cdots$ must stop.}. 
\begin{equiv_def}
\textbf{(Noetherian topology)} Given topological space $X$, the followings are equivalent: 
\begin{enumerate}[label=(\roman*)]
  \item $X$ is Noetherian 
  \item Open sets of $X$ satisfy ascending chain condition. 
  \item Every subset of $X$ is compact. 
\end{enumerate}
\end{equiv_def}
\begin{proof}
  (i)$\implies $(ii) is clear.\\

  (ii)$\implies $(iii):  Assume for a contradiction $Y\subseteq X$ has an open cover $\mathcal{U}$ that has no finite subcover. Fix $E_1 \in \mathcal{U}$. Because $\mathcal{U}$ has no finite subcover, there exists $E_2 \in \mathcal{U}$ such that $E_2\cap Y-(E_1\cap Y)$ is nonempty, i.e., $E_1\cup E_2$ strictly contain $E_1$. Again, because $\mathcal{U}$ has no finite subcover, there exists $E_3 \in \mathcal{U}$ such that $E_3\cap Y - ((E_1 \cup  E_2) \cap Y)$ is nonempty. Repeating the same process, we construct a non-stopping ascending chain of open sets: $E_1 \subset E_1\cup E_2 \subset E_1 \cup  E_2 \cup E_3 \subset \cdots $, a contradiction. \\

  (iii)$\implies $(i): Let $F_n$ be a descending chain of closed subsets of  $X$. Clearly $X-F_n$ is an ascending chain and forms an open cover of $X- \bigcap F_n$. It follows from compactness of $X- \bigcap F_n$ that descending chain $F_n$ must stops permanently at some point.
\end{proof}
As we shall see, most of the topologies studied in this note are Noetherian, and indeed they have nice relationship with irreducibility. 
\begin{theorem}
\label{TfoL}
\textbf{(Topological form of Lasker-Noether Theorem)} If topological space $X$ is Noetherian, then for every nonempty closed $V\subseteq X$,  there always exists unique irreducible closed $V_1,\dots ,V_m \subseteq X$ such that 
\begin{gather}
V= V_1 \cup  \cdots \cup  V_m 
\end{gather}
and every $V_i$ is necessary in the sense that $\bigcup_{j\neq i}V_j\neq V$. 
\end{theorem}
\begin{proof}
Note that if $V$ can be written as some finite union of irreducible closed subsets, then we may delete the unnecessary terms so that every term in the union is necessary. We now prove that every $V$ can be written as a finite union of irreducible closed subset.\\  

Let $\mathscr{S}$ be the collection of nonempty closed subset of $X$ that can not be written as finite union of irreducible closed subsets. Assume for a contradiction that $\mathscr{S}$ is nonempty. Because $X$ is Noetherian, $\mathscr{S}$ have some minimal element, say $Y$. Because $Y$ is reducible, we may write $Y=Y_1\cup Y_2$, where $Y_1$ and $Y_2$ are both closed and contained strictly by $Y$. By minimality of $Y \in \mathscr{S}$, $Y_1$ and  $Y_2$ can both be written as finite union of irreducible closed subset, a contradiction\footnote{Because $Y=Y_1 \cup  Y_2$.}. \\

It remains to prove the uniqueness of expression of $V$, so suppose 
\begin{align*}
V= V_1 \cup  \cdots \cup  V_m = W_1 \cup  \cdots \cup  W_r
\end{align*}
where $V_i,W_j$ are all irreducible closed and "necessary". For each $i$, because $V_i$ is irreducible and $V_i = \bigcup (W_j \cap V_i)$, we have $V_i \subseteq W_j$ for some fixed $j$. The same argument yields $W_j\subseteq V_p$ for some fixed $p$. It then follows from the "necessity" that $V_i=W_j$. This implies uniqueness. 
\end{proof}
Let $X$ be a Noetherian topological space. \customref{TfoL}{Topological form of Lasker-Noether Theorem} tell us that $X$, uniquely, can be written as  $X=V_1\cup  \cdots \cup V_m$ where $V_i$ are all irreducible closed and necessary in this union. One may conjecture that these $V_i$ are exactly the irreducible components of $X$. This is true indeed. Fix $j$. To see  $V_j$ is an irreducible component, let $W$ be some irreducible component containing  $V_j$. We are required to show $W=V_j$. Because $W= \bigcup (W\cap V_i)$ and $W$ is an irreducible component\footnote{So $W\cap V_i$ are all closed. Recall that irreducible components are closed, since closure of irreducible set is also irreducible.}, we must have $W\subseteq V_l$ for some $l$. It then follows from the "necessity: that $j=l$ and  $V_j=W$. Conversely, let $W$ be some irreducible component of  $X$. We are required to show $W$ is one of $V_i$. Because $W$ is irreducible and  $W=\bigcup (W\cap V_i)$, we have $W \subseteq V_i$ for some $i$,which by maximality of $W$ implies  $W=V_i$.\\

We close this section by introducing the idea of variety dimension in a purely topological setting. Let $X$ be a topological space. We define the \textbf{dimension of $X$} to be the supremum of all integers $n$ such that there exists a chain $\varnothing =Z_0 \subset Z_1 \subset \cdots \subset Z_n$ of distinct irreducible closed subsets of $X$. Immediately we see same wanted property of our definition for dimension: Given subspace $Y\subseteq X$, we have $\operatorname{topdim}(Y)\leq \operatorname{topdim}(X)$.\footnote{To prove this, you will need: $Y_i$ closed in  $Y\implies Y_i=\overline{Y_i}\cap Y$.}
\section{Affine variety}
Let $k$ be some field. We use the notation $\A^n$ to denote the \textbf{affine $n$-space} over $k$, the Cartesian product $k^n$. Given some collection $S \subseteq k[x_1,\dots ,x_n]$ of polynomials, we use notation $V(S)= \set{a \in \A^n:F(a)=0\text{ for all }F \in S}$ to denote its \textbf{zero set (locus)}, and given $X \subseteq \A^n$, we use notation $I(X)$ to denote the ideal of polynomials that vanish on $X$. If $X \subseteq \A^n$ is the locus of some $S \subseteq k[x_1,\dots ,x_n]$, we say $X$ is \textbf{algebraic}. Clearly this give rise to a topology on $\A^n$, the  \textbf{Zariski topology}, in which $X\subseteq \A^n$ is closed if and only if $X$ is algebraic\footnote{Note that $V(S_1)\cup V(S_2)=V(\set{f_1f_2:f_1 \in S_1,f_2\in S_2})$ and $\bigcap V(S_\alpha )=V (\bigcup S_\alpha )$}. Clearly, we have 
\begin{align}
\label{ovlX}
 \overline{X}=V(I(X)),\quad \text{ for all }X \subseteq \A^n
\end{align}
Already, at this early stage, we have the prime-irreducibility correspondence: 
\begin{theorem}
\label{Pic}
\textbf{(Prime-irreducibility correspondence)} For all  $X\subseteq \A^n$, 
\begin{align*}
X\text{ is irreducible }\iff  I(X)\text{ is prime  }
\end{align*}
\end{theorem}
\begin{proof}
$(\implies )$: Assume $fg\in I(X)$ and $f,g\not \in I(X)$ for a contradiction. Because $fg$ vanishes on  $X$, we have  $X=(X\cap V(f))\cup (X\cap V(g))$. Because neither  $f$ nor  $g$ vanish on  $X$, we see that  $X\cap V(f)\neq X \neq X\cap V(g)$, a contradiction. \\

$(\impliedby)$: Assume for a contradiction that $X=(X\cap V_1)\cup (X\cap V_2)$ for some $V_1,V_2$ such that neither of them covers $X$. Clearly, there exists some $f \in I(V_1)$ that doesn't vanish on the whole $X$. This $f$ satisfies $I(V_1)-I(X)$. Similar argument gives us some $g \in I(V_2)-I(X)$, but $fg \in I(X)$, a contradiction to $I(X)$ being prime. 
\end{proof}
\begin{corollary}
\textbf{(Irreducible criteria in affine spaces)} For all $X \subseteq \A^n$, 
\begin{align*}
X\text{ is irreducible }\iff \overline{X}\text{ is irreducible }
\end{align*}
\end{corollary}
\begin{proof}
If $X$ is irreducible, then $I(\overline{X})=I(X)$ is prime. If $\overline{X}$ is irreducible, then $I(X)=I(\overline{X})$ is prime. 
\end{proof}



Because  \customref{HBT}{Hilbert's Basis Theorem} only require the underlying ring of polynomials to be Noetherian, which all fields are, we can already deduce some important properties from the hypothesis (as weak as this hypothesis is) that $k$ is a field. For example, one may show $\A^n$ as a topological space is Noetherian\footnote{Given descending chain of closed subset $X_0\supset X_1 \supset \cdots \supset X_m$ of $\A^n$, we must have $I(X_0)\subset I(X_1)\subset \cdots \subset I(X_m)$ where the inequalities hold true because of \myref{Equation}{ovlX}. Now recall that \customref{HBT}{Hilbert's Basis Theorem} guarantees $k[x_1,\dots ,x_n]$ is Noetherian.}, every closed $X\subseteq \A^n$ is of the form $X=V(f_1,\dots ,f_m)$ for some $f_1,\dots ,f_m \in k[x_1,\dots ,x_n]$,\footnote{For its reason, consider \customref{EDoN}{the third equivalent definition of Noetherian module}.}  and $\A^n$ is irreducible if, moreover,  $k$ is infinite: 
\begin{theorem}
\textbf{(Polynomial Identity Principal)} Let $k$ be an infinite field and $F \in k[x_1,\dots ,x_n]$. If $F(\textbf{a})=0$ for all $\textbf{a}\in \A^n$, then $F=0$. 
\end{theorem}
\begin{proof}
We prove by induction on $n$. Base case $n=1$ follows from fundamental theorem of algebra and taking algebraic closure  $\overline{k}$. Suppose the assertion hold true for $n-1$, and write 
 \begin{align*}
F(x_1,\dots ,x_n)= \sum_{i=0}^{d} G_i(x_1,\dots ,x_{n-1})x_n^i,\quad \text{ where }d=\operatorname{deg}_{x_n}F
\end{align*}
Premise $F(\textbf{a})=0,\forall \textbf{a}\in \A^n$ and base case together implies that $G_i(\textbf{x})=0$ for all $i$ and $\textbf{x}\in \A^{n-1}$, which by inductive hypothesis implies $G_i=0\in k[x_1,\dots ,x_{n-1}]$ for all $i$.
\end{proof}
\begin{corollary}
\textbf{(Affine space is irreducible if the underlying field is infinite)} If field $k$ is infinite, then $\A^n$ as a topological space is irreducible. 
\end{corollary}
\begin{proof}
Assume for a contradiction that $\A^n=V(f_1,\dots ,f_r)\cup V(g_1,\dots ,g_m)$ where the two closed set are both proper subset of  $\A^n$. Clearly  $f_1\cdots f_rg_1\cdots g_m$ vanish identically on $\A^n$. This implies  $f_1\cdots f_rg_1\cdots g_m=0 \in k[x_1,\dots ,x_n]$, which implies one of them is zero, a contradiction. 
\end{proof}
Most of the time we require $k$ to be closed. In such case, we call irreducible closed sets of $\A^n$  \textbf{affine varieties}, and we have the powerful \customref{HN}{ Nullstellensatz}:
\begin{align*}
I(V(I))=\sqrt{I},\quad \text{ for all ideal }I \subseteq k[x_1,\dots, x_n]
\end{align*}
As \myref{Theorem}{Pic} have already shown, functor: 
\begin{align*}
\set{X \subseteq \A^n : X\text{ is a variety.}}\xlongrightarrow{I} \operatorname{Spec}(k[x_1,\dots,x_n])
\end{align*}
is injective. \customref{HN}{Nullstellensatz} moreover shows that this functor is surjective. In particular, $I$ forms a bijection between points in $\A^n$ with  $\operatorname{Max}(k[x_1,\dots ,x_n])$\footnote{Using \customref{WfoN}{the weak form of Nullstellensatz}, if $\mathfrak{m}\subseteq k[x_1,\dots ,x_n]$ is maximal, then one construct isomorphism $\pfi: k[x_1,\dots ,x_n]\quotient \mathfrak{m}\to k$ and set $a_i\triangleq x_i$ to see $\pfi([f])=f(a)$ and $\set{a}=V(\mathfrak{m})$}. \\

\section{Projective variety}
Given some ring $A$ and monoid $M$, by a $M$-\textbf{grading on $A$}, we mean a collection $(A_m)_{m \in M}$ of subgroup of the additive group of $A$ such that $A= \bigoplus A_m$\footnote{The direct sum is a direct sum of groups.} and $A_mA_n\subseteq A_{m+n}$\footnote{You may interpret $A_mA_n$ as  $\set{a_ma_n \in A:a_n \in A_m,a_n \in A_n}$ here.} for all $m,n \in M$. Fix $a \in A$. If $a=a_{m_1}+ \cdots + a_{m_r}$ for $a_{m_i} \in A_{m_i}$, we say $a_{m_i}$ are the \textbf{homogeneous components of $a$}, and if $r=1$ we say $a$ is a \textbf{homogeneous element}.  Note that there is  ambiguity whether $0$ should be considered homogeneous. If one consider $0$  homogeneous, then $0$ should have arbitrary degree.\\ 

We say an ideal $I \subseteq A$ is \textbf{homogeneous} if $I$ have a set of generators that are all homogeneous, or equivalently, if $I= \bigoplus I \cap A_n$. Note that the sum, product, and intersection of homogeneous ideals are homogeneous. Clearly, if $M=\Z$ or  $\Z_0^+$, then $A_0$ forms a subring of  $A$\footnote{To see $1 \in A_0$, consider the highest graded component of $1$ and $1=1\cdot 1$.}; $A_i$ all form obvious $A_0$-modules; and radical of homogeneous ideal remain homogeneous\footnote{If $(x_1+\cdots +x_r)^l \in I$ with $x_r$ highest grade and $I$ homogeneous, then since the highest grade term of $(x_1+\cdots +x_r)^l$ is $x_r^l$, we have  $x_r \in \sqrt{I}$, which implies $x_1+\cdots + x_{r-1} \in \sqrt{I}$.}.\\








Let $k$ be some field. Clearly, we may define on $k^{n+1} - \set{0}$ an equivalence relation by setting
\begin{align*}
a \sim  b \overset{\triangle}{\iff } a = \ld  b,\quad \text{ for some }\ld \in k
\end{align*}
Similar to the affine $n$-space, we use the notation $\P^n$  to represent the set of equivalence class of $k^{n+1}$. Clearly, when we give the polynomial ring $k[x_0,\dots,x_n]$ the obvious grading, a polynomial $f\in k[x_0,\dots ,x_n]$ is homogeneous in the graded sense if and only if it is homogeneous in the usual sense\footnote{i.e., every term has the same degree.}. Suppose $f\in k[x_0,\dots ,x_n]$. Even though the value of $f$ on $\P^n$ is not well-defined, if $f$ is homogeneous then indeed it is well-defined whether $f(p)=0$ for fixed $p \in \P^n$, so it make sense for us to talk about the \textbf{(projective) algebraic set} $V(S)= \set{p \in \P^n: f(p)=0\text{ for all }f\in S}$ for every collection $S\subseteq k[x_1,\dots ,x_{n+1}]$ of homogeneous polynomial. Trivially, for each algebraic $V \subseteq \P^n$, the \textbf{defining ideal of $V$}, the ideal generated by homogeneous $f \in k[x_0,\dots ,x_n]$ that vanishes on $V$, is homogeneous, and moreover, contains only polynomials that "vanishes on  $V$ in the obvious sense". Again this give rise to \textbf{Zariski topology} on $\P^n$ where $E \subseteq \P^n$ is closed if and only if $E$ is algebraic. \\


Similar to the affine case (\myref{Equation}{ovlX}), we have 
\begin{align*}
\overline{X}=V(I(X)),\quad \text{ for all }X\subseteq \P^n
\end{align*}
Let $\pi :\A^{n+1}- \set{0}\rightarrow \P^n$ be the quotient map. 

\begin{align*}
V_\P(\mathfrak{a})\triangleq V(\mathfrak{a})= \big\{[x_0,\dots ,x_n] \in \P^n : F(x_0,\dots ,x_n)=0\text{ for all }F\in \mathfrak{a}\big\}
\end{align*}
and the notation 
\begin{align*}
  V_\A(\mathfrak{a}) \triangleq  \set{(x_0,\dots ,x_n) \in \A^{n+1} : F(x_0,\dots ,x_n)=0\text{ for all }F \in \mathfrak{a}}
\end{align*}


 Note that if $k$ is algebraically closed and subset $V\subseteq \P^n$ is Zariski closed and irreducible, then again we say $V$ is a \textbf{projective variety}. \\
\begin{theorem}
\textbf{(Homogeneous or Projective Nullstellensatz)} Given algebraically closed field $k$ and homogeneous ideal $\mathfrak{a} \subseteq k[x_0,\dots ,x_n]$, if $V(\mathfrak{a})$ is nonempty\footnote{This implies $\mathfrak{a}$ contains no nonzero constant.}, then 
\begin{align*}
I(V(\mathfrak{a}))=\sqrt{\mathfrak{a}} 
\end{align*}
\end{theorem}
\begin{proof}
Clearly we have: 
\begin{align*}
\sqrt{\mathfrak{a}}\subseteq I(V(\mathfrak{a}))
\end{align*}
We now prove $I(V(\mathfrak{a}))\subseteq \sqrt{\mathfrak{a}} $. Note that in order to prove this, we shall distinguish the notation 
\begin{align*}
V_\P(\mathfrak{a})\triangleq V(\mathfrak{a})= \big\{[x_0,\dots ,x_n] \in \P^n : F(x_0,\dots ,x_n)=0\text{ for all }F\in \mathfrak{a}\big\}
\end{align*}
and the notation 
\begin{align*}
  V_\A(\mathfrak{a}) \triangleq  \set{(x_0,\dots ,x_n) \in \A^{n+1} : F(x_0,\dots ,x_n)=0\text{ for all }F \in \mathfrak{a}}
\end{align*}
Because \customref{HN}{affine Nullstellensatz} said that $\sqrt{\mathfrak{a}}=I(V_\A(\mathfrak{a}))$, we only have to prove $I(V_\P(\mathfrak{a}))\subseteq I(V(\mathfrak{a})) $. Let $\pi :\A^{n+1} \rightarrow \P^n$ be the quotient map. For all homogeneous ideal $I \subseteq k[x_0,\dots ,x_n]$, we have 
\begin{align*}
\pi  (V_\A (I))=V_\P(I)
\end{align*}


Fix homogeneous $F \in I (V_\P (\mathfrak{a}))$. Because by premise $V_{\P}(\mathfrak{a})$  is nonempty, we know $F$ can not be nonzero constant. 


Fix  $F \in I(V(\mathfrak{a}))$.  


\footnote{Clearly $\mathfrak{a}\subseteq I(V(\mathfrak{a}))$. This implies $\sqrt{\mathfrak{a}}\subseteq I(V(\mathfrak{a}))$, since if $F^n$ vanish on $V(\mathfrak{a})$, then $F$ must also vanish on $V(\mathfrak{a})$.} 


We are required to prove $F^n \in \mathfrak{a}$ for some $n$. If $F=0$, then we are done. Suppose $F\neq 0$. Because $V(\mathfrak{a})$ is nonempty, clearly $F$ can not be nonzero constant, i.e., $\operatorname{deg}(F)>0$. Clearly 
\end{proof}
\begin{theorem}
\textbf{(Special case of projective Nullstellensatz)} Given homogeneous ideal $\mathfrak{a}\subseteq k[x_0,\dots ,x_n]$, the followings are equivalents: 
\begin{enumerate}[label=(\roman*)]
  \item $V(\mathfrak{a})$ is empty. 
  \item $\sqrt{\mathfrak{a}}=k[x_0,\dots ,x_n]$ or $\sqrt{\mathfrak{a}}=\set{F \in k[x_0,\dots ,x_n]:F(0)=0}$. 
  \item For some  $d>0$, we have  $\set{F \in k[x_0,\dots ,x_n]:\operatorname{deg}(F)=d}\subseteq \mathfrak{a}$. 
\end{enumerate}
\end{theorem}
\begin{proof}

\end{proof}

\begin{theorem}
\label{Ste}
\textbf{(Standard topological embedding of $\A^n$ into  $\P^n$)} Let $k$ be a field\footnote{It needs not to be algebraically closed.}, and $U\triangleq \P^n - V(x_0)$\footnote{Clearly $x_0 \in k[x_0,\dots ,x_n]$ is homogeneous.}. The map $\phi: U\rightarrow \A^n$  
\begin{align*}
\phi \left([x_0:\cdots :x_n]\right)\triangleq \left(\frac{x_1}{x_0},\dots ,\frac{x_n}{x_0}\right)
\end{align*}
is a well-defined homeomorphism. 
\end{theorem}
\begin{proof}
It is routine to check $\phi$ is well-defined and bijective. We now prove it is indeed bicontinuous. Let $S$ be the set of homogeneous elements of $k[x_0,\dots ,x_n]$. Clearly, we may well-define mapping  $\alpha :S \to k[x_1,\dots ,x_n],\beta :k[x_1,\dots ,x_n]\to S$\footnote{The setting of $\alpha$ and $\beta $ are standard. Respectively, they are called \textbf{dehomogenization} and \textbf{homogenization}. Their actions are actually easy to memorize. Homogenization send $y-x^2$ to  $wy-x^2$ and send  $z-x^3$ to  $zw^2-x^3$.} by 
\begin{align*}
\alpha (f)\triangleq f(1,x_1,\dots ,x_n)\text{ and }\beta (g)\triangleq x_0^{\operatorname{deg}(g)} g\left(\frac{x_1}{x_0},\dots ,\frac{x_n}{x_0}\right)
\end{align*}
Now, let $Y\subseteq U$ be closed in $U$, and let $\overline{Y}$ be the closure of $Y$ in $\P^n$. By definition, there exists some collection  $T$ of homogeneous polynomials $f \in k[x_0,\dots ,x_n]$ whose locus is exactly $\overline{Y}$. To see $\phi (Y)$ is closed, just check $\phi (Y)= V(\alpha (T))$. Conversely, given closed $W \subseteq \A^n$, one have $\phi^{-1}(W)=V(\beta  (I(W)))\cap U$\footnote{You will need the fact $V(I(W))=W$ in the proof of this equality, which holds true because $W$ is closed.}. 
\end{proof}
Let $A$ be a graded ring, and $\mathfrak{p}\subseteq A$ a homogeneous prime ideal. Clearly the set $S$ of homogeneous elements not in $\mathfrak{p}$ forms a multiplicatively closed subset.  
\begin{theorem}
\label{Ogoh}
\textbf{(Obvious grading on homogeneous localizations: What we mean by $A_{(\mathfrak{p})}$)} Given a $\Z_0^+$-graded ring $A$, if  $\mathfrak{p}\subseteq A$ is homogeneous prime and we denote $S$ the set of homogeneous element not in $\mathfrak{p}$, then we may well define a $\Z$-grading on $S^{-1}A$ by letting  
\begin{align*}
  (S^{-1}A)_n\triangleq \set{f\quotient g \in S^{-1}A:f\text{ homogeneous and }n=\operatorname{deg}f-\operatorname{deg}g}\cup \set{0}
\end{align*}
\end{theorem}
\begin{proof}
To check that $(S^{-1}A)_n$ are well-defined as sets, we are required to show 
\begin{align*}
  \frac{a_1}{s_1}= \frac{a_2}{s_2} \in S^{-1}A\text{ and }a_1\text{ homo }\implies a_2\text{ homo and }\operatorname{deg}a_1-\operatorname{deg}s_1=\operatorname{deg}a_2- \operatorname{deg}s_2
\end{align*}
Because $a_1\quotient s_1=a_2\quotient s_2 \in S^{-1}A$, we know $a_1s_2u=a_2s_1u$ for some  $u \in S$. By definition and premise, $a_1,s_2,s_2$, and  $u$ are all homogeneous, which with $a_1s_2u=a_2s_1u$ implies  $a_2$ is indeed homogeneous with $\operatorname{deg}a_1-\operatorname{deg}s_1=\operatorname{deg}a_2- \operatorname{deg}s_2$. Clearly $(S^{-1}A)_n$ all form groups, $S^{-1}A= \sum (S^{-1}A)_n$, and $(S^{-1}A)_n(S^{-1}A)_m \subseteq (S^{-1}A)_{n+m}$. It remains to prove the sum is direct. Suppose 
\begin{align*}
\frac{a}{s}= \frac{a_0}{s_0}+\cdots + \frac{a_n}{s_n}
\end{align*}
where  $a\quotient s \in (S^{-1}A)_m$ and $a_i \quotient s_i \in (S^{-1}A)_{n_i}$ such that $n_i$ all distinct and not equal to  $m$. We are required to show $\frac{a}{s}=0$. From  
\begin{align*}
\frac{a}{s}= \frac{a_0s_1\cdots s_n+\cdots + a_ns_0\cdots s_{n-1}}{s_0\cdots s_n}
\end{align*}
We know that either 
\begin{align*}
\frac{a_0s_1\cdots s_n + \cdots + a_ns_0\cdots s_{n-1}}{s_0\cdots s_n}=0
\end{align*}
or $(a_0s_1\cdots s_n+ \cdots +a_ns_0\cdots s_{n-1})$ homogeneous with
\begin{align*}
\operatorname{deg}(a)+\operatorname{deg}(s_0\cdots s_n)= \operatorname{deg}(a_0s_1 \cdots s_n + \cdots + a_ns_0\cdots s_{n-1})+ \operatorname{deg}(s). 
\end{align*}
Assume for a contradiction that $a_0s_1\cdots s_n + \cdots + a_ns_0\cdots s_{n-1}$ is homogeneous. WLOG, we have 
\begin{align*}
\operatorname{deg}(a)+\operatorname{deg}(s_0\cdots s_n)= \operatorname{deg}(a_0s_1 \cdots s_n)+ \operatorname{deg}(s). 
\end{align*}
which implies 
\begin{align*}
\operatorname{deg}(a)+\operatorname{deg}(s_0)=\operatorname{deg}(a_0)+\operatorname{deg}(s)
\end{align*}
a contradiction to the definition of $a_0\quotient s_0$. 
\end{proof}
We use the notation $A_{(\mathfrak{p})}$ to denote the $(S^{-1}A)_0$ in \myref{Theorem}{Ogoh}. Clearly $A_{(\mathfrak{p})}$ is also a local ring with maximal ideal $\set{a \quotient s \in A_{(\mathfrak{p})}: a \in \mathfrak{p}}$\footnote{This set is clearly the set of non units of $A_{(\mathfrak{p})}$, and it clearly forms an ideal of $A_{(\mathfrak{p})}$}. In particular, this local ring becomes a field when $\mathfrak{p}=0$, and in such case we write $A_{(\mathfrak{p})}=A_{(\langle 0\rangle )}$. 
\begin{theorem}
\label{Ogoh2}
\textbf{(Obvious grading on homogeneous localizations: What we mean by $A_{(f)}$)} Given some $\Z_0^+$-graded ring  $A$ and homogeneous $f \in A$, we may well define a $\Z$-grading on  $A_f$ by letting 
 \begin{align*}
   (A_f)_n\triangleq \set{\frac{g}{f^l} \in A_f:g\text{ homogeneous and }n=\operatorname{deg}(g)-l\operatorname{deg}(f)}\cup \set{0}
\end{align*}
\end{theorem}
\begin{proof}
To check that $(A_f)_n$ are well defined as sets, we are required to show 
\begin{align*}
\frac{g_1}{f^{l_1}}=\frac{g_2}{f^{l_2}}\in A_f\text{ and }g_1\text{ homo }\implies g_2\text{ homo and }\operatorname{deg}(g_1)-\operatorname{deg}(f^{l_1})=\operatorname{deg}(g_2)-\operatorname{deg}(f^{l_2})
\end{align*}
whose proof is similar to the one in \myref{Theorem}{Ogoh}. Again, clearly $(A_f)_n$ all form groups, $A_f = \sum (A_f)_n$, and $(A_f)_n(A_f)_m \subseteq (A_f)_{n+m}$. It remains to prove the sum is direct. Suppose 
\begin{align*}
\frac{g_0}{f^{l_0}}= \frac{g_1}{f^{l_1}}+ \cdots + \frac{g_n}{f^{l_n}}
\end{align*}
where $g_i\quotient f^{l_i}\in (A_f)_{r_i}$ and $r_i$ are all distinct. We are required to  show $\frac{g_0}{f^{l_0}}=0$. From 
\begin{align*}
\frac{g_0}{f^{l_0}}= \frac{g_1f^{l_2 + \cdots + l_n}+\cdots + g_n f^{l_1 + \cdots + l_{n-1}}}{f^{l_1+\cdots + l_n}}
\end{align*}
We know that either 
\begin{align*}
\frac{g_1f^{l_2 + \cdots + l_n}+\cdots + g_n f^{l_1 + \cdots + l_{n-1}}}{f^{l_1+\cdots + l_n}}=0
\end{align*}
or $(g_1f^{l_2 + \cdots + l_n}+\cdots + g_n f^{l_1 + \cdots + l_{n-1}})$ homogeneous with 
\begin{align*}
\operatorname{deg}(g_0) -\operatorname{deg}(f^{l_0})= \operatorname{deg}(g_1f^{l_2 + \cdots + l_n}+\cdots + g_n f^{l_1 + \cdots + l_{n-1}}) - \operatorname{deg}(f^{l_1+ \cdots +l_n})
\end{align*}
Assume for a contradiction that $g_1f^{l_2 + \cdots + l_n}+\cdots + g_n f^{l_1 + \cdots + l_{n-1}}$ is homogeneous. WLOG, we have 
\begin{align*}
\operatorname{deg}(g_0) -\operatorname{deg}(f^{l_0})= \operatorname{deg}(g_1f^{l_2 + \cdots + l_n}) - \operatorname{deg}(f^{l_1+ \cdots +l_n})
\end{align*}
which implies 
\begin{align*}
\operatorname{deg}(g_0)-\operatorname{deg}(f^{l_0})= \operatorname{deg}(g_1)-\operatorname{deg}(f^{l_1})
\end{align*}
a contradiction to the premise  $r_0\neq r_1$. 
\end{proof}
Again, we use the notation $A_{(f)}$ to denote the $(A_f)_0$ in \myref{Theorem}{Ogoh2}. \\
\section{Morphism}
By a \textbf{quasi affine (or projective) variety} $X\subseteq \A^n$ (resp. $\P^n$), we mean  $X$ is a subset of some variety $V \subseteq \A^n$ (resp. $\P^n$) and $X$ is open in $V$.
\begin{equiv_def}
\textbf{(Quasi variety)} Given $X\subseteq \A^n$ (or $\P^n$), we have
\begin{align*}
X\text{ is a quasi variety }\iff  X\text{ is irreducible and }X\text{ is open in }\overline{X}
\end{align*}
\end{equiv_def}
\begin{proof}

\end{proof}


equivalently, we can define $X$ to be a quasi variety if and only if $X$ is open in $\overline{X}$\footnote{Because we will always have  $\overline{X}\subseteq V$}. One key property for quasi variety $X$ is that, their closed sets are always intersection of algebraic set and $X$, since 
\begin{align*}
E \overset{\text{closed}}{\subseteq}X \subseteq V \overset{\text{closed}}{\subseteq} (\A^n\text{ or }\P^n)\implies  \quad   E= \operatorname{cl}_V(E)\cap X
\end{align*}



Given some quasi affine variety $X\subseteq \A^n$ and $f:X \rightarrow  k$, we say $f$ is \textbf{regular at $p \in X$} if there exist $U\subseteq X$ open in $X$ containing $p$ and exist $g,h \in k[x_1,\dots ,x_n]$ such that $h$ nonzero on $U$ and  $f=g\quotient h$ on $U$. Given some quasi projective variety $X \subseteq \P^n$ and $f:X \rightarrow k$, in the projective setting we say $f$ is \textbf{regular at $p \in X$} if there exists $U \subseteq X$ containing $p$ and exist homogeneous $g,h \in k[x_0,\dots,x_n]$ such that $h$ nonzero on $U$, $f=g\quotient h$ on $U$, and $g,h$ have same degree. Given a quasi variety $X$, we say  $f:X\rightarrow k$ is \textbf{regular} if it is regular at each points of $X$, and we denote the \textbf{ring of regular function on $X$} by $\mathscr{O}(X)$. \label{rorf} 
\footnote{It is IMPORTANT to deduce that regular functions indeed forms a ring here, since it is impossible to later check transitivity of \myref{equivalence}{UCO} purely topologically, without using the algebraic result of one regular functions minus another is still regular, thus continuous. I guess the moral of the story here is that one must remember  $\A^1$ is a field, and thus have a field structure, which shall be used when topological method doesn't work; or that if something forms an algebraic structure, then utilize that structure as much as possible.  Indeed, we are talking about ALGEBRAIC geometry here.}
\begin{theorem}
\label{Rfac}
\textbf{(Regular functions are continuous)} Given quasi variety $X\subseteq \A^n$ (or $\P^n$), if $f:X\rightarrow k$ is regular, then $f$ is continuous.  
\end{theorem}
\begin{proof}
Because every closed set in $\A^1$ is either finite or the whole space, we only have to show $f^{-1}(a)$ is closed for fixed $a \in k$. Let $(U_i,g_i,h_i)_{i \in I}$ cover $X$, where $h_i$ nonzero and $f=g_i\quotient h_i$ on $U_i$. Because $X$ is coherent\footnote{You may Google what does \textbf{coherent topology} mean. To see that every topological space $X$ and any of its open cover $U_i$ are always coherent, just observe for any $Z\subseteq X$, we have $Z = \bigcup (U_i\cap Z) $ and $X-Z= \bigcup (U_i -Z)$.} with  $(U_i)_I$, we only have to show $U_i\cap f^{-1}(a)$ is closed in $U_i$ for fixed $i\in I$, which follows from noting $U_i\cap f^{-1}(a)=V(g-ah)\cap U_i$. 
\end{proof}

Let $X$ be a quasi variety with $p \in X$. Consider the collection of all pairs $(p \in U\subseteq X,f:U\rightarrow k)$, where $f$ is regular, and the collection of all $(U\subseteq X,f:U\rightarrow k)$, where $U$ is nonempty and  $f$ is regular, because \customref{Rfac}{regular functions are continuous} and \customref{NAA}{nonempty open subset of irreducible space is always dense}, we may well define  two equivalence relation respectively on these two collection by: 
\begin{align}
(U,f)\sim (O,g)\overset{\triangle}{\iff }f=g\text{ on }U \cap O \label{UCO}
\end{align}
\footnote{As noted before, to check transitivity, you must consider the regular function $f-h$.}to form the ring $\mathscr{O}_{p,X}$ of \textbf{germs\footnote{You may Google what does \textbf{germ} means. It is generic.} of regular functions on $X$ near $p$} and the \textbf{function field} $K(X)$ of $X$.\\ 

Let $(U,f)\in K(X)$. If $p \in U$ and $f$ doesn't vanish at $p$, then $f^{-1}$ is well-defined and regular on some smaller neighborhood of $p$. This implies that indeed $K(X)$ is a field, and that the units of $\mathscr{O}_{p,X}$ are exactly those who doesn't vanish at $p$, which implies the non-units, those vanish at  $p$, forms an ideal of $\mathscr{O}_{p,X}$, justifying the colloquial convention of calling $\mathscr{O}_{p,X}$ the \textbf{local ring of $p$ on $X$}\footnote{Recall that if the set of non-units forms an ideal, then the ring is local.}. Clearly, the obvious mappings of $\mathscr{O}(X)\longrightarrow \mathscr{O}_{p,X}\longrightarrow K(X)$ are well-defined injective ring homomorphism, and they will be how we treat one as subset of another.\label{sam2}  \\


Let $X,Y$ be two quasi varieties. We say $\phi : X\rightarrow Y$ is a \textbf{quasi variety morphism} if $\phi$ is continuous and for every open $U \subseteq Y$ and regular $f:U \rightarrow k$, the function $f \circ \phi:\phi^{-1}(U)\rightarrow k$ is regular. If we say  $\phi : X\rightarrow Y$ is a \textbf{quasi variety isomorphism}, we mean that $\phi$ is bijective with its inverse being also a quasi variety morphism.\footnote{One may check that the standard topological embedding of $\phi:\A^n \rightarrow \P^n$ in \myref{Theorem}{Ste} is a quasi variety isomorphism.} Clearly, if $\phi :X\rightarrow Y$ is a quasi variety isomorphism, then $\mathscr{O}(X)$ and $\mathscr{O}(Y)$ as ring are isomorphic; for each $p \in X$, $\mathscr{O}_{p,X}$ and $\mathscr{O}_{\phi (p),Y}$ as ring are isomorphic; and $K(X)$ and $K(Y)$ as ring are isomorphic. Because of such, we often say $\mathscr{O}(X),\mathscr{O}_{p,X}$, and $K(X)$ are \textbf{invariant up to isomorphisms}.\\ 

In fact, given quasi variety mapping $\phi$ whose target is affine, there is an if and only if test  for whether $\phi$ is a quasi variety morphism. 
\begin{theorem}
\label{Iaoi}
\textbf{(If and only if test for quasi variety mapping whose target is affine)} Given quasi variety mapping $\phi :X\rightarrow Y \subseteq \A^n$, 
\begin{align*}
\phi \text{ is a quasi variety morphism. }\iff  x_i\circ \phi:X\rightarrow k\text{ are all regular. }
\end{align*}
\end{theorem}
\begin{proof}
$(\implies )$ follows from definition. We now prove  $(\impliedby)$. Clearly, because regular function on $X$ is closed under addition and multiplication  \customref{rorf}{as noted before}, for all $F\in k[x_1,\dots ,x_n]$, the function $F\circ \phi$ must be regular. It then follows from \customref{Rfac}{continuity of regular functions} and 
\begin{align*}
\phi^{-1}(V(S)\cap Y)= \bigcap_{F \in S} (F\circ \phi)^{-1}(0),\quad \text{ for any }S \subseteq k[x_1,\dots ,x_n]
\end{align*}
that $\phi$ is continuous. Fix regular $(U\subseteq Y,g:U\rightarrow k)$ and $p \in \phi^{-1}(U)$. It remains to prove $g \circ \phi:\phi^{-1}(U)\rightarrow k$ is regular at $p$. Because $U\xrightarrow{g}k$ is regular, there exists open $O\subseteq U$ containing $\phi (p)$ such that $g=\frac{h_1}{h_2}$ on $O$ for some  $h_1,h_2 \in k[x_1,\dots ,x_n]$ where $h_2$ nonzero on whole $O$ and degree of them being the same if $X$ is projective. Clearly, 
\begin{align*}
g\circ \phi = \frac{h_1 \circ \phi}{h_2 \circ \phi},\quad \text{ on }\phi^{-1}(O).
\end{align*}
Because $h_1 \circ \phi$ and $h_2 \circ \phi$ are regular as function from $X$ to $k$ as we proved in the first paragraph of this proof, we know there exists open $V \subseteq \phi^{-1}(O)$ containing $p$ such that 
\begin{align*}
h_1\circ \phi= \frac{f_1}{f_2} \text{ and }h_2 \circ \phi= \frac{f_3}{f_4},\quad \text{ on }V
\end{align*}
for some polynomials $f_1,f_2,f_3,f_4$ where $f_2,f_4$ nonzero on $V$ and the pairs having the same degree if  $X$ projective. This give us 
\begin{align*}
g\circ \phi = \frac{f_1f_4}{f_2f_3},\quad \text{ on }V
\end{align*}
where $\operatorname{deg}(f_1f_4)=\operatorname{deg}(f_2f_3)$ if $X$ projective. We have shown that indeed $g \circ \phi$ is regular at $p$. 
\end{proof}

Given an affine quasi variety $X\subseteq \A^n$, we use notation $\Gamma (X)$ to denote its \textbf{coordinate ring} $k[x_1,\dots ,x_n]\quotient I(X)$, which is clearly isomorphic to the ring of function $f:X\rightarrow k$ such that $f=F|_X$ for some $F \in k[x_1,\dots ,x_n]$\footnote{We call these functions \textbf{polynomial functions}.}. From the second point of view, immediately we see that coordinate ring of affine quasi variety is in fact an integral domain\footnote{If $FG=0$ on  $X \subseteq Y \subseteq \A^n$ where $Y$ is a variety, then because $Y$ is irreducible, one of $F^{-1}(0)\cap Y,G^{-1}(0)\cap Y$ must be whole $Y$.}. Later we will see more usage of the realization of  $\Gamma (Y)$ as ring of polynomials function in the proof of \myref{Theorem}{Asog}. 
\begin{theorem}
\label{Asog}
\textbf{(Algebraic structure of global ring, local ring, and function field of affine quasi variety)} If $X \subseteq \A^n$ is an affine quasi variety, then 
\begin{enumerate}[label=(\roman*)]
  \item $\mathscr{O}(X)\cong \Gamma (X)$. 
  \item For all $p \in X$, if we let $\mathfrak{m}_p\subseteq \Gamma (X)$ be the maximal ideal corresponding to $p$, then  $\mathscr{O}_{p,X}\cong \Gamma (X)_{\mathfrak{m}_p}$.
  \item $K(X)\cong  \operatorname{Frac}(\Gamma X)$.  
\end{enumerate}
\end{theorem}
\begin{proof}
Before the proof, we first remark that: If we fix $p$, regarding $\Gamma (X)$ either as the ring of polynomial function $f:X\rightarrow  k$ or as the quotient  $k[x_1,\dots ,x_n]\quotient I(X)$ makes no mathematical differences. In the former, $I(p)\subseteq \Gamma (X)$ is the ring of polynomial functions that vanishes at $p$, and in the latter,  $I(p)\subseteq \Gamma (X)$ is the image of $I(p)\subseteq k[x_1,\dots ,x_n]$  under the quotient map $k[x_1,\dots ,x_n] \twoheadrightarrow k[x_1,\dots ,x_n]\quotient I(X)$. Either way, the  $I(p)\subseteq \Gamma (X)$ is what we meant by $\mathfrak{m}_p$ in (ii), and using the latter point of view with the bijection between $\A^n$ and $\operatorname{Max}(k[x_1,\dots,x_n])$, we have a bijection between $X$ and $\operatorname{Max}(\Gamma X)$: $p\leftrightarrow \mathfrak{m}_p=I(p)$. \\


Fix $p$. Let $\beta  :\Gamma (X)_{\mathfrak{m}_p}\rightarrow \mathscr{O}_{p,X}$ be the obvious mapping\footnote{From $\beta $ you can see that the done localization $\Gamma (X)_{\mathfrak{m}_p}$ is of geometrical nature, not algebraic.}: $f\quotient g\mapsto [(U,f\quotient g)]$ where $f,g:X\rightarrow k$ are polynomial function and $U=\set{x \in X:g(x)\neq 0}$. Clearly $\beta $ is an injective ring homomorphism\footnote{Note that $[(U,f)]=0 \in \mathscr{O}_{p,X}$ if and only if $f=0$ on  $U$, since if $f\neq 0$ on $U$, then  $f+f\neq f$. This implies injectivity of $\beta $ since $f^{-1}(0)\subseteq X$ is closed in $X$, containing  $g^{-1}(k^\times) \subseteq X$, whose closure in $X$ are  $X$.  ($\because Z \subseteq Y \subseteq X \implies \operatorname{cl}_Z(Y)=\operatorname{cl}_X(X)\cap Y$) }. To see $\beta $ is surjective, just recall the definition of regular function. We have constructed isomorphism  $\beta :\Gamma (X)_{\mathfrak{m}_p}\rightarrow \mathscr{O}_{p,X}$, proving (ii). The same argument works for constructing isomorphism $\operatorname{Frac}(\Gamma X)\cong  K(X)$, proving (iii).\\

  Let $\alpha :\Gamma (X)\rightarrow \mathscr{O}(X)$ be the obvious mapping, which is clearly an injective ring homomorphism. It remains to prove $\alpha $ is surjective, which follows from checking the diagram: 
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXEdhbW1hKFgpIl0sWzAsMiwiXFxiaWdjYXBfe30iXSxbMiwwLCJcXGJ1bGxldCJdLFsyLDIsIlxcYnVsbGV0Il0sWzAsMl0sWzAsMSwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn19fV0sWzEsMywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiYXJyb3doZWFkIn19fV0sWzIsM11d
\[\begin{tikzcd}
	\Gamma(X) && \mathscr{O}(X) \\
	\\
  \bigcap \limits_{\mathfrak m\in\operatorname{Max}(\Gamma X)}(\Gamma X)_\mathfrak{m} && \bigcap \limits_{p \in X}\mathscr{O}_{p,X}
	\arrow["\alpha" ,from=1-1, to=1-3]
	\arrow[double_arrow , from=1-1, to=3-1]
	\arrow[hook,from=1-3, to=3-3]
	\arrow[double_arrow , from=3-1, to=3-3]
\end{tikzcd}\]
\footnote{The left isomorphism is explain in \customref{sam}{this paragraph} of  \myref{Section}{Lalr}, the bottom isomorphism is from (ii), and the right injective homomorphism is from \customref{sam2}{this paragraph} of this section.}is indeed commutative, where the left and right sides are, respectively, subrings of $\operatorname{Frac}(\Gamma X)$ and $K(X)$. 
\end{proof}
It may seem surprising that $\mathscr{O}(X) \cong \Gamma(X)$, since one might expect the former to be a localization of the latter, given that regular functions are defined locally as quotients of global polynomial functions. However, this apparent tension is actually a valuable opportunity to distinguish between the local and global perspectives: regularity is inherently a local notion. Indeed, by definition, a function $f : X \to k$ is regular if, locally, it can be written as a fraction $g/h$ with $g, h \in \Gamma(X)$.\\

In fact, if one attempts to show that $\mathscr{O}_{p,X}$ is the localization $({f \in \mathscr{O}(X) : f(p) \neq 0})^{-1} \mathscr{O}(X)$ —that is, to verify that the obvious map $\mathscr{O}(X) \to \mathscr{O}_{p,X}$ satisfies the universal property—without invoking \myref{Theorem}{Asog}, one quickly encounters difficulties and will be forced to use isomorphism $\mathscr{O}(X) \cong \Gamma(X)$\footnote{As the action of isomorphism $\alpha $ in \myref{Theorem}{Asog} suggest, one can really just write $\mathscr{O}(X)=\Gamma (X)$ }.  \\

Now, let $X,Y$ be two quasi varieties  with $Y$ affine. It is clear that the three structures $\mathscr{O}(X),\mathscr{O}_{p,X},$ and $K(X)$ all admit obvious $k$-algebra structures, and from the proof of \myref{Theorem}{Asog}, the ring isomorphism $\mathscr{O}(Y)\cong \Gamma (Y)$ is also a $k$-algebra isomorphism.
\begin{theorem}
\textbf{(Induction forms a bijection between set of quasi varieties of morphism and set of $k$-algebra homomorphism from target's coordinate ring to source's global ring if target is affine)} Let $X,Y$ be two quasi varieties  with $Y\subseteq \A^n$. Denoting the collection quasi variety morphism $X \rightarrow Y$ by $\operatorname{Hom}(X,Y)$ and the collection of  $k$-algebra homomorphism $\Gamma (Y)\rightarrow \mathscr{O}(X)$ by $\operatorname{Hom}(\mathscr{O}(X),\Gamma (Y))$, clearly we can well define a map  $\operatorname{Hom}(X,Y)\xrightarrow{\alpha }  \operatorname{Hom}(\Gamma (Y),\mathscr{O}(X))$ by 
\begin{align*}
\phi \mapsto  (\tilde{\phi}:\Gamma (Y)\rightarrow \mathscr{O}(X)),\quad \text{ where }\tilde{\phi} (F)\triangleq  F \circ \phi. 
\end{align*}
Such $\alpha $ is bijective. 
\end{theorem}
\begin{proof}
Fix $h\in \operatorname{Hom}(\Gamma (Y),\mathscr{O}(X))$. Consider $x_i \in \Gamma (Y),\xi_i\triangleq h(x_i) \in \mathscr{O}(X)$, and $\psi: X\rightarrow \A^n$ defined by $\psi(p)\triangleq (\xi_1(p),\dots ,\xi_n(p))$. Because $\alpha $ is clearly injective\footnote{A direct proof suffices. It is easy to construct $F \in k[x_1,\dots ,x_n]$ for arbitrary $p_1 \neq p_2 \in \A^n$ that satisfies $F(p_1)\neq F(p_2)$.}, our end goal here is to show that $\psi \in \operatorname{Hom}(X,Y)$ and $h= \tilde{\psi}$. \\

Because $Y=V(I(Y))$, to show that $\psi$ at least forms a map from $X$ to $Y$, we only have to show  $F\circ \psi=0 $ for any fixed $F \in I(Y)$. Because $h$ is a $k$-algebra homomorphism and  $F$ in $k$-algebra  $\Gamma (Y)$ can be appropriately (See footnote) generated by $x_i$, we have $h(F)=F(h(x_1),\dots ,h(x_n))$\footnote{For example, $h(x_1^2+x_2)=(h(x_1))^2+h(x_2)$. Note that the $F$ on the left hand side is an element of $\Gamma (Y)$, and that the $F$ on the right hand side is an actual polynomial.}. This by definition of $\xi$ and $\psi$ give us
\begin{align}
\label{hFF}
h(F)=F(\xi_1,\dots ,\xi_n)= F \circ \psi
\end{align}
This together with the fact  $F$ as an element of $\Gamma (Y)$ is zero implies, indeed, $F \circ \psi=0$. \\

Noticing that \myref{Equation}{hFF} also holds true for any $F \in \Gamma (Y)$\footnote{Perhaps here it will be better to write $ k[x_1,\dots ,x_n]$ in place of $\Gamma (Y)$.} that's not in $I(Y)$, we conclude that if $\psi$ really is a morphism, then we will have $h=\tilde{\psi}$. Therefore, it only remains to show $\psi$ is indeed a morphism, which follows from $x_i \circ \psi = \xi_i \in \mathscr{O}(X)$ for all $x_i \in k[x_1,\dots ,x_n]$ and \myref{Test}{Iaoi}.
\end{proof}
\begin{corollary}
\textbf{(Quasi varieties are isomorphic if and only if their coordinate ring are isomorphic as $k$-algebra)} Let $X,Y$ be two quasi affine variety. We have 
 \begin{align*}
X,Y\text{ isomorphic as quasi variety }\iff \Gamma (Y),\Gamma (X)\text{ isomorphic as $k$-algebra. }
\end{align*}
\end{corollary}
\begin{proof}
If $\phi:X\rightarrow Y$ is a quasi variety isomorphism, then  $\tilde{\phi}:\Gamma (Y)\rightarrow \Gamma (X)$ is a $k$-algebra isomorphism with inverse $\tilde{\phi^{-1}}:\Gamma (X)\rightarrow \Gamma (Y)$. If $\pfi: \Gamma (Y)\rightarrow \Gamma (X)$ is a $k$-algebra isomorphism, then the unique morphism  $\phi: X\rightarrow Y $ that satisfies $\tilde{\phi}=\pfi$ is an isomorphism with the obvious inverse.  
\end{proof}
Given a projective quasi variety $X \subseteq \P^n$, we also use notation $\Gamma (X)$ to denote its \textbf{homogeneous coordinate ring} $k[x_0,\dots ,x_n]\quotient I(X)$, where $I(X)$ are the defining ideal of $X$, the ideal generated by homogeneous polynomials vanishing on  $X$. We have shown that coordinate rings of affine quasi varieties are invariant up to isomorphisms, and we are going to show coordinate rings of projective quasi varieties are not.  
\begin{theorem}
\label{Ogot}
  \textbf{(Obvious grading of the quotient of graded ring)} Given $\Z_0^+$-graded ring $A$, homogeneous ideal $I \subseteq A$, and quotient ring $\pi :A \twoheadrightarrow A\quotient I $, we have a well defined $\Z_0^+$-grading on $A\quotient I$:
\begin{align*}
A\quotient I = \bigoplus_{n\geq 0} \pi  (A_n)
\end{align*}
\end{theorem}
\begin{proof}
Clearly $\pi (A_n)$ all form groups, and $A\quotient I = \sum \pi  (A_n)$. It remains to show the sum is direct. Suppose 
 \begin{align*}
\pi (a_{n_{r}})= \sum_{i=1}^{r-1} \pi (a_{n_i}),\quad \text{ where $n_i$ distinct and } a_{n_i} \in A_{n_i}
\end{align*}
We are required to show $a_{n_r} \in I$. Clearly, we have $n_r>n_i$ for all $i<r$ and 
\begin{align*}
a_{n_r}- \sum_{i=1}^{r-1}a_{n_i} \in I
\end{align*}
This implies 
\begin{align*}
a_{n_r}= \sum_{i=1}^{r-1} a_{n_i} + b,\quad \text{ for some }b \in I
\end{align*}
Note that $I$ is homogeneous, so there exists unique decomposition of $b=a_{n_r}-\sum_{i=1}^{r-1}a_{n_i}$ as elements of $A_n \cap I$. By comparing the degrees of the elements of the unique decomposition of $b$ and $a_{n_r}-\sum_{i=1}^{r-1}a_{n_i}$, we see that the unique decomposition of $b$ is exactly $a_{n_r}-\sum_{i=1}^{r-1}a_{n_i}$, i.e., $a_{n_i} \in I$ for all $i\leq r$. 
\end{proof}
Let $X$ be a projective quasi variety. From now on, we regard $\Gamma (X)$ as a $\Z_0^+$-graded ring, whose grading come from \myref{Theorem}{Ogot}. 
\section{Category of Quasi Varieties}
\label{SE}
Fix $n$ and $m$. In this section, we express elements of $\P^{(n+1)(m+1)-1}$ (non uniquely, of course) as matrices:  
\begin{align*}
\begin{bmatrix}
  z_{0,0} & \cdots & z_{0,m} \\
  \vdots & \ddots & \vdots \\
  z_{n,0} & \cdots & z_{n,m} 
\end{bmatrix}
\end{align*}
Similarly, we write the coordinate of $\P^{(n+1)(m+1)-1}$, the polynomial ring, as $k[z_{i,j}]$. Now, consider the \textbf{Segre embedding} $\psi: \P^n \times \P^m \rightarrow \P^{(n+1)(m+1)-1}$ defined by 
\begin{align*}
[x_0:\cdots : x_n] \times [y_0 : \cdots :y_m] \mapsto  \begin{bmatrix}
  x_0y_0 & \cdots & x_0y_m \\
  \vdots & \ddots & \vdots \\
  x_ny_0 & \cdots & x_ny_m 
\end{bmatrix}
\end{align*}
It is clear that $\psi$ is well-defined and injective. We shall show that the image of $\psi$ is a projective variety to justify calling it an embedding. Consider 
\begin{align*}
S\triangleq \bset{z_{i,j}z_{p,l}-z_{p,j}z_{i,l}\in k[z_{i,j}]:i,p \in \set{0,\dots ,n}\text{ and }j,l \in \set{0,\dots ,m}}
\end{align*}
\begin{theorem}
\textbf{(Image of Segre embedding is a projective variety)} We have 
\begin{align*}
\operatorname{Im}(\psi)= V(S)
\end{align*}
\end{theorem}
\begin{proof}
Clearly, we have $\operatorname{Im}(\psi) \subseteq V(S)$. Suppose 
\begin{align*}
\alpha \triangleq \begin{bmatrix}
  z_{0,0} & \cdots & z_{0,m} \\
  \vdots & \ddots & \vdots \\
  z_{n,0} & \cdots & z_{n,m} 
\end{bmatrix} \in V(S)
\end{align*}
By definition, there exists some column of $\alpha $ that is nonzero. WLOG, let that column be the first one. To show $\alpha  \in \operatorname{Im}(\psi)$, we are required to show there exists some $\ld _1,\dots ,\ld _m \in k$ such that 
\begin{align*}
z_{i,j}=\ld _j z_{i,0},\quad \text{ for all }i,j
\end{align*}
then the proof will follows from noting $\alpha $ is the image of $[z_{0,0}:\cdots : z_{n,0}]\times [1:\ld_1:\cdots :\ld _m]$. WLOG, let $z_{0,0}\neq 0$. One may now check $\ld_j\triangleq z_{0,j}z_{0,0}^{-1}$ suffices, using the premise $\alpha  \in V(S)$. 
\end{proof}
From now on, if we treat $\P^n \times \P^m$ as a variety, we mean that we are identifying $\P^n \times \P^m $ as a subvariety of $\P^{(n+1)(m+1)-1}$ using the Segre embedding. 
\begin{theorem}
\textbf{(Projections are quasi varieties morphisms)} Identifying $\P^n\times \P^m$ as a sub projective varieties of $\P^{(n+1)(m+1)-1}$ using Segre embedding, the projection $\pi: \P^n\times \P^m \rightarrow \P^n$ is a quasi variety morphism. 
\end{theorem}
\begin{proof}

\end{proof}
\begin{theorem}
\textbf{(Well-defined of product of projective quasi varieties: Irreduciblity)} Let $X\subseteq \P^n$ and $Y \subseteq \P^m$ be two quasi-projective varieties. Identifying $X\times Y$ as a subset of $\P^{(n+1)(m+1)-1}$ using Segre embedding, $X\times Y$ is irreducible.  
\end{theorem}

\begin{theorem}
\textbf{(Well-defined of product of affine quasi varieties: Irreduciblity)} Let $X\subseteq \A^n$ and $Y\subseteq \A^m$ be two quasi varieties. The Zariski topology on $X\times Y$ is irreducible. 
\end{theorem}
\section{Rational Map (Just started)}
\begin{theorem}
\label{Rmi}
\textbf{(Rational map is well-defined)} Let $X$ and  $Y$ be two quasi varieties, and let $\phi$ and $\psi$ be two quasi varieties from $X$ to $Y$. If there exists non empty open subset $U \subseteq X$ on which $\phi$ and $\psi$ agree, them $\phi = \psi$. 
\end{theorem}
\begin{proof}
WLOG\footnote{As we have mentioned, one may check that the map $\A^n\rightarrow \P^n - \set{x_0=0}$ in \myref{Theorem}{Ste} is a quasi variety isomorphism. One can also check that given any quasi variety isomorphism $\phi:Y\rightarrow Z$ and open $E\subseteq Y$, $\phi(E)$ is open in $Z$ and  $\phi|_E:E\rightarrow \phi (E)$ forms a quasi variety isomorphism.}, let $Y\subseteq \P^n$. Consider $\phi \times \psi: X\rightarrow \P^n \times \P^n$, where $\P^n\times \P^n$ is identified as a subvariety of $\P^{2n}$ using \customref{SE}{Segre Embedding}. 
\end{proof}
Let $X$ and  $Y$ be two quasi varieties. Because of \myref{Theorem}{Rmi}, we may well-define \textbf{rational map} $\phi: X \DashedArrow  Y$ to be equivalence class of pairs $(U,\phi_U)$ where $U$ is a nonempty open subset of $X$ and  $\phi_U:U\rightarrow Y$ is a quasi variety morphism. Given a rational map $\phi:X\DashedArrow Y$, we say $\phi$ is \textbf{dominant} if for some and hence every\footnote{Let $U,V \subseteq X$ be open, and $\phi (U)$ be dense in $Y$. Because $U$ is irreducible, we know $U=\operatorname{cl}_U(U \cap V)$, and because $\phi:U\rightarrow Y$ is continuous, we know $\phi (\operatorname{cl}_U(U \cap V))\subseteq \overline{\phi (U\cap V)}$. Together, we have $Y=\overline{\phi (U)}= \overline{\phi (\operatorname{cl}_U(U\cap V))}\subseteq \overline{\phi (U\cap V)}\subseteq \overline{\phi (V)}$.} pair $(U,\phi_U)$, the image of $\phi_U$ is dense in $Y$. Consider two dominant rational maps $X \overset{\phi}{\DashedArrow}Y \overset{\psi}{\DashedArrow}Z$, and consider $(U,\phi_U)\in \phi$ and $(V,\psi_V)\in \psi$. Because $\phi(U)$ is dense in $Y$, we know $\phi^{-1}_U(V)$ is nonempty. Therefore, it make sense to talk about the composition $\psi \circ \phi:X\DashedArrow Z$ of the dominant rational maps, the equivalence class containing $(\phi^{-1}_U(V),\psi \circ \phi)$. It is trivial to check the composition is indeed well-defined. It is clear that composition of dominant rational maps is again dominant\footnote{Let $W \subseteq Z$ be open. We are required to show $W$ intersect with $\psi (V \cap \phi (U))$. Because $\psi_V(V)\subseteq Z$ is dense and $\psi_V$ is continuous, we know $\psi_V^{-1}(W)\subseteq Y$ is nonempty and open. It then follows from dominance of $\phi$ that $\phi_U^{-1} (\psi^{-1}_V (W))$ is nonempty.}.\\



If we say $\phi : X\DashedArrow Y$ is a \textbf{birational map}, we mean $\phi$ is dominant and there exists some dominant  $\psi:Y \DashedArrow X$ such that $\psi \circ \phi:X\DashedArrow X$ contains $(X,\id )$ and $\phi \circ \psi: Y \DashedArrow Y$ contains $(Y,\id )$. Clearly, inverse of any birational map must be unique. Two quasi varieties are said to be \textbf{birational equivalent} if there exists a birational map between them. 
\begin{theorem}
\textbf{(Birational equivalence implies isomorphism of function field as $k$-algebra)} Let $X$ and  $Y$ be two quasi varieties. 
\begin{align*}
X\text{ and }Y\text{ are birational equivalent }\implies K(X)\cong  K(Y)\text{ as $k$-algebra. }
\end{align*}
\end{theorem}
\begin{proof}
Let dominant rational $\phi : X\DashedArrow Y$ and $\psi:Y \DashedArrow X$ be inverse to each other, consider $(U,\phi_U)\in \phi$  and $(V,\psi_V)\in \psi$, and consider $E\triangleq  \phi^{-1}_U(\psi^{-1}_V(U))$ and $F \triangleq \psi^{-1}_V (\phi_U^{-1}(V))$. Clearly, $E\subseteq U$ and $F\subseteq V$ are open, and a routine check shows that $\phi_E$ maps $E$ isomorphically to $F$ with inverse being  $\psi_F$. A routine check now shows that $K(X)\rightarrow K(Y)$ defined by 
\begin{align*}
[(T,f)]\longmapsto [(\psi^{-1}_F(T), f \circ \psi)] 
\end{align*}
and $K(Y)\rightarrow K(X)$ defined by 
\begin{align*}
[(H,g)]\longmapsto [(\phi^{-1}_E(H), g \circ \phi)] 
\end{align*}
are two well-defined $k$-algebra homomorphism being inverse to each others\footnote{Therefore they are isomorphisms inverse to each other.}.  
\end{proof}
Let $\phi:X\DashedArrow Y$ be a dominant rational map and $(U,\phi_U)\in \phi$. Let $(V,f)\in K(Y)$. Clearly, $\phi_U^{-1}(V)$ is nonempty and open, and $f \circ \phi_U$ is a regular function on $\phi_U^{-1}(V)$. In other words, $(\phi_U^{-1}(V),f \circ \phi_U)\in K(X)$.

Verify this is 
\begin{enumerate}[label=(\roman*)]
  \item well-defined as a set map. 
  \item a $k$-algebra homomorphism.  
\end{enumerate}
\section{Dimension Theory (Planned)}
$X$ is a quasi variety iff  $X$ is irreducible and  $X$ is open in  $\overline{X}$. 

$X$ is irreducible iff $\overline{X}$ is irreducible. 
\chapter{Scheme}

Given some ring $R$, we may give $\operatorname{Spec}(R)$ its \textbf{Zariski topology} by defining $E\subseteq \operatorname{Spec}(R)$ to be closed if and only if $E=\set{J \in \operatorname{Spec}(R):I \subseteq J}$ for some ordinary ideal $I\subseteq R$. \\
\chapter{Not used yet}
\section{Maybe later}
\begin{theorem}
\textbf{(Algebraic structure of global ring, local ring, and function field of projective quasi variety)} Let $X\subseteq \P^n$ be a projective  quasi variety. We have 
\begin{enumerate}[label=(\roman*)]
  \item $\mathscr{O}(X)=k$. 
  \item $\mathscr{O}_{p,X}\cong  \Gamma (X)_{(\mathfrak{m}_p)}$ for all $p \in X$.  
  \item $K(X)\cong  \Gamma (X)_{(\langle x\rangle )}$. 
\end{enumerate}
\end{theorem}
\section{Some Fulton}


Given two affine varieties $V \subseteq \A^n,W\subseteq \A^m$, we say mapping $\phi:V\rightarrow W$ is a \textbf{polynomial map}\footnote{One may check that polynomial maps and affine varieties together form a category} if there are polynomials $T_1,\dots ,T_m \in k[x_1,\dots ,x_n]$ such that $\phi(a)=(T_1(a),\dots ,T_m (a))$ for all $a \in V$. Every mapping $\phi:V\rightarrow W$, polynomial or not, induce a ring homomorphism 
\begin{align*}
  \tilde{\phi}:\mathscr{F}(W,k)\rightarrow  \mathscr{F}(V,k)\quad  f \mapsto  f \circ \phi   
\end{align*}
Clearly, if $\phi$ is a polynomial map, then $\tilde{\phi}$ maps $\Gamma (W)$ into $\Gamma  (V)$ and is in fact an $\A$-algebra homomorphism.  By \myref{proposition}{un2}, there exists an obvious one-to-one correspondence between $(k[x_1,\dots ,x_n])^m$ and some subcollection of the space of polynomials map from $\A^n$ to  $\A^m$, so if polynomial map  $T:\A^n \rightarrow \A^m$ satisfies
\begin{align*}
  \forall  a \in \A^n,T(a)=(T_1(a),\dots ,T_m(a))\quad,\text{ for some }T_1,\dots ,T_m \in k[x_1,\dots ,x_n]
\end{align*}
it make sense for us to denote $T=(T_1,\dots ,T_m)$. 
\begin{theorem}
\label{un3}
  \textbf{(Natural one-to-one correspondence between $\operatorname{Hom}(\Gamma (W),\Gamma (V))$ and $\operatorname{Hom}(V,W)$)} Given two affine variety $V \subseteq \A^n,W \subseteq \A^m$, if we denote  
\begin{align*}
  \operatorname{Hom}(V,W)&\triangleq \set{\text{polynomial }\phi : V \rightarrow W} \\
  \operatorname{Hom}(\Gamma W, \Gamma  V)&\triangleq \set{\text{$\A$-algebra homomorphism  $\pfi : \Gamma  (W)\rightarrow \Gamma (V)$}}
\end{align*}
then the mapping $\phi \mapsto  \tilde{\phi}$ forms a bijection between them.  
\end{theorem}
\begin{proof}
It is easy to check the mapping $\phi \mapsto \tilde{\phi}$ is injective. We now prove that it is surjective. Fix $\alpha  \in \operatorname{Hom}(\Gamma W,\Gamma V)$. Let $T_i \in k[x_1,\dots ,x_n]$ satisfies $\alpha ([x_i])=[T_i]$ for each $i$, and define polynomial map $T\triangleq (T_1,\dots ,T_m): \A^n \rightarrow \A^m$. Note that $\Gamma  (A^n)\cong  k[x_1,\dots ,x_n]$. It is then easy to check $\tilde{T}: \Gamma (A^m)\longrightarrow \Gamma  (A^n)$ maps $I (W)$ into $I(V)$, which allow us to check $T(V) \subseteq W$. To finish the proof, just check $\tilde{T|_V}:\Gamma W \rightarrow \Gamma V$ is identical with $\alpha $. 
\end{proof}
A polynomial map $\phi : V\rightarrow W$ is an \textbf{$k$-affine variety isomorphism} if it's bijective with inverse being also a polynomial map. \myref{Theorem}{un3} shows that two affine varieties are isomorphic if and only if their coordinate rings are.\\

By an \textbf{affine change of coordinate} on $\A^n$, we mean a bijective polynomial map $T: \A^n \rightarrow  \A^n$ such that each of its component $T_i \in k[x_1,\dots ,x_n]$ is of degree $1$.  \\
 \section{Dimension Theory}
\label{DT}
\begin{theorem}
\textbf{(Equivalent definition of variety dimension: Krull dimension of coordinate ring)} Given variety $V\subseteq \A^n$, its dimension equals to the Krull dimension of its coordinate ring $\Gamma  (V) \cong k[x_1,\dots ,x_n]\quotient I(V)$.  
\end{theorem}
\begin{proof}
Let $Z_0 \subset \cdots \subset Z_m$ be a chain of distinct irreducible closed subset of $V$. As one may check with \customref{ctfr}{ring correspondence theorem},   
\begin{align*}
I(Z_m)+ I(V) \subset \cdots \subset I(Z_0)+I(V) \subseteq \Gamma (V)  
\end{align*}
forms a chain of distinct prime ideals of $\Gamma (V)$. We have shown $\operatorname{dim}(V)\leq  \operatorname{Krudim}(\Gamma V)$.\\

Let $\mathfrak{p}_0 \subset \cdots \subset \mathfrak{p}_m $ be a chain of distinct prime ideals of $\Gamma (V)$, so again by \customref{ctfr}{ring correspondence theorem}, there exists a chain $I(V)\subseteq I_0 \subset \cdots \subset I_m $ of distinct prime ideals of $k[x_1,\dots,x_n]$. It is easy to check that $V(I_m)\subset \cdots \subset V(I_0)$ indeed forms a distinct irreducible closed subset of $V$ by corollary of Nullstellensatz.  
\end{proof}
Let $V\subseteq \A^n$ be an nonempty affine variety. We use the notation $k(V)\triangleq \operatorname{Frac}(\Gamma V)$ to denote the \textbf{field of rational function on $V$}. Given rational function $f$ on $V$, we say $f \in k(V)$ is \textbf{defined} at $a  \in V$ if there exists $g,h \in \Gamma  V$ such that $f=gh^{-1}$ and $h(a)\neq 0$. Given $a \in V$, we use the notation $\mathscr{O}_a(V)$ to denote the ring of rational functions on $V$ that are defined at $a$. We have 
\begin{align*}
 k \subseteq \Gamma (V)\subseteq \mathscr{O}_a (V) \subseteq k(V) 
\end{align*}
Clearly, for each $f \in \mathscr{O}_a(V)$, we may well-define a \textbf{value of $f$ at $a$} by saying $f(a)\triangleq g(a)h(a)^{-1}$, and we see that indeed, $\mathscr{O}_a(V)$ is a local ring whose maximal ideal is
\begin{align*}
\mathfrak{m}_a(V)\triangleq \set{f\in \mathscr{O}_a(V):f(a)=0}
\end{align*}


\begin{lemma}
Suppose $B \subseteq A$, $A$ integral domain, and $B$ integrally closed. We have 
\begin{align*}
\operatorname{Krudim}(A_\mathfrak{m})=\operatorname{Krudim}(B_{B \cap \mathfrak{m}})
\end{align*}
\end{lemma}



\begin{theorem}
\textbf{(Equivalent Definition of variety dimension: Transcendence degree of field of rational function)} Given nonempty variety $V \subseteq \A^n$, its dimension equals $\operatorname{trdeg}_kk(V)$. 
\end{theorem}
\begin{proof}
According to \customref{NNL}{Noether normalization lemma}, there exists $x_1,\dots ,x_r \in \Gamma (V)$,  algebraically independent over $k$ with $r=\operatorname{Krudim}(\Gamma  V)$ such that $\Gamma (V)$  integral over $k[x_1,\dots ,x_r]$. This implies $k(V)$ algebraic over $k(x_1,\dots ,x_r)$ and thus  $\operatorname{trdeg}_kk(V)=r$\footnote{Clearly, $\operatorname{trdeg}_kk(x_1,\dots ,x_r)=r$}.  



\end{proof}



\section{Some Fulton 2}
For intuitively geometrical reason, we usually call locus of a single non-constant polynomial $F \in k[x_1,\dots ,x_n]$ a \textbf{hypersurface}, and a hypersurface in $\A^2$ an  \textbf{affine plane curve}. 
\begin{lemma}
\label{IL}
\textbf{(Intuitive Lemma)} If $F,G \in k[x,y]$ have no common factor, then $V(F,G)=V(F)\cap  V(G)$ is a finite set of points.
\end{lemma}
\begin{proof}

\end{proof}
Because algebraically closed field is always infinite, the following classification theorem particularly applies to affine varieties.   
\begin{theorem}
\textbf{(Classification of irreducible affine variety in $\A^2$)} If $k$ is infinite, every irreducible affine algebraic set $V \subseteq \A^2$ falls into one of the following class: 
\begin{enumerate}[label=(\alph*)]
  \item  $\A^2$. 
  \item Empty set.  
  \item A finite set. 
  \item $V(F)$ where $F \in k[x_1,x_2]$ is irreducible. 
\end{enumerate}
\end{theorem}
\begin{proof}
  Clearly, if $I(V)=0$\footnote{Zero ideal is prime in the integral domain $k[x_1,x_2]$.} then $V=\A^2$, class (a). Also, if $I(V)$ contains a nonzero constant, then $V$ is empty, class (b). We have shown that if $V$ is not in class  (a) nor class (b), then $I(V)$ contains some non-constant polynomial $F$.\\

Because $k[x_1,x_2]$ is a UFD, we may write $F=F_1\cdots F_n$ where $F_1,\dots ,F_n$ are all irreducible. It then follows from $I(V)$ being prime that $F_1 \in I(V)$, WLOG. If $I(V)=\langle F_1\rangle $, then $V$ is in class (d), so suppose there exists some $G \in I(V)- \langle F_1\rangle $. This immediately implies $V \subseteq V (F_1,G)$, and since  $F_1$ is irreducible and  $G \not\in \langle F_1\rangle $, we may apply \myref{Lemma}{IL} to see that $V$ is finite, class (c).
\end{proof}
\section{More Equivalent Definitions of DVR}
Let $u \in K^{\times}$. We sometimes denote the \textbf{fractional principal ideal} $Au$ by  $\langle u\rangle $. It is clear that $\langle u\rangle $ is invertible with inverse $\langle u^{-1}\rangle $. 
\begin{theorem}
\textbf{(Equivalent Definitions of DVR)} Given an integral domain $D$, the following are equivalent: 
\begin{enumerate}[label=(\roman*)]
  \item $D$ is a DVR with discrete valuation $\nu$.   
  \item $D$ is a local Euclidean domain and not a field.  
  \item $D$ is a local PID and not a field. 
  \item $D$ is local and every nonzero fractional ideal of $D$ is invertible. 
  \item $D$ is local and  
  \item $D$ is local, Noetherian and of Krull dimension $1$. 
\end{enumerate}
\end{theorem}
\begin{proof}
  For $(\text{i})\implies (\text{ii})$, note that $D$ is local because  \customref{EDovr}{ideals of $D$ are totally ordered by inclusion}, that  $\nu $ is the desired Euclidean function\footnote{Suppose $x,y \in D, y\neq 0$. If $\frac{x}{y}\in D$, then $x= y \cdot \frac{x}{y}+0$ suffices. If $\frac{x}{y}\not\in D$, then $x=y+(x-y)$ suffices.}, and $D$ is not a field because $\nu$ is nontrivial.\\

  For $(\text{ii})\implies (\text{iii})$, just recall  \customref{un1}{Euclidean domains are PID}.\\

For  $(\text{i})\implies (\text{iv})$, let $ \mathfrak{a}_1 = \langle x\rangle $ in \myref{Equation}{Da1}, and let $M$ be a nonzero fractional ideal. Let $y \in D$ satisfies $yM \subseteq D$, so $yM= \langle x^k\rangle $ for some $k\inn$. This implies $M$ is a fractional principal ideal $M= \langle x^{k- \frac{\nu  (y)}{p}}\rangle $, thus invertible.  \\

For $(\text{iv})\implies (\text{i})$, first note that because every integral ideal of $D$ is invertible, thus finitely generated, \customref{EDoN}{$D$ is Noetherian}.  
\end{proof}
\begin{theorem}
\textbf{(Sufficient conditions for valuation rings to be discrete)} If $D$ is a valuation ring of  $\nu :\operatorname{Frac}(D)\rightarrow \Gamma \cup \set{\infty}$, then the following are equivalent: 
\begin{enumerate}[label=(\alph*)]
  \item $\nu $ is discrete. 
  \item $D$ is Noetherian. 
  \item $D$ is a principal ideal domain.   
\end{enumerate}
\end{theorem}


\section{PID, UFD and Gauss Lemma}
Let $A$ be a ring and $a \in A$ be an non-unit nonzero element. We say $a$ is  \textbf{irreducible} if  $a=xy\implies x\text{ is a unit or $y$ is a unit}$. We say $a$ is \textbf{prime} if $\langle a\rangle $ is prime. We say an integral domain $D$ is a \textbf{UFD (Unique Factorization Domain)} if every nonzero non-unit element of $D$ can be written as some finite product of irreducible elements, up to units and change of order. We say an integral domain is a \textbf{PID (Principal Ideal Domain)} if every ideal is principal. We say an integral domain is a  \textbf{GCD domain} if there always exists a unique minimal principal ideal containing the ideal generated by two given elements. If $D$ is a GCD domain, and $x,y \in D$, we use $\operatorname{gcd}(x,y)$ to denote the unique principal ideal containing $\langle x,y\rangle $. Clearly, every PID is  Noetherian, and moreover: 
\begin{theorem}
\textbf{(Irreducibles are prime in PID)} If $D$ is a PID and $a \in D$  is irreducible, then $a$ is prime. 
\end{theorem}
\begin{proof}
Let  $bc \in \langle a\rangle$. From the premise, if we write 
\begin{align*}
\langle a,b\rangle = \langle d\rangle \text{ and }a=de
\end{align*}
We see that either $d$ or $e$ is a unit. If $e$ is a unit, then when we write $b=yd$ we see $b=yae^{-1} \in \langle a\rangle $. If $d$ is a unit, then $\langle a,b\rangle = \langle d\rangle =D$ implies existence of some $x,y \in D$ such that $xa+yb=1$ which implies $c=cxa+ybc \in \langle a\rangle $.  \footnote{Because $bc \in \langle a\rangle $}
\end{proof}
\begin{corollary}
\textbf{(PID are UFD)} If $D$ is a PID, then $D$ is an UFD. 
\end{corollary}
\begin{proof}
Let 
\begin{align*}
\mathscr{U}\triangleq \set{\langle x\rangle \subseteq D: x \in D\text{ can't be written as some finite product of irreducible elements.}}
\end{align*}
Assume for a contradiction that $\mathscr{U}$ is nonempty. \customref{EDoN}{Because $D$ is Noetherian, there exists maximal $\langle x\rangle  \in \mathscr{U}$}. By construction, $x$ is reducible and thus not prime, which implies the existence of some maximal ideal $\langle y\rangle$ that strictly include $\langle x\rangle $. Because $\langle y\rangle \not \in \mathscr{U}$, we have irreducible factorization $y=a_1\cdots a_n$. Let $x=sy$ and  $u\triangleq sa_2\cdots a_n$. We shall cause a contradiction from  $x=a_1u$. If $\langle u\rangle \not \in  \mathscr{U}$, then because $a_1$ is irreducible, we see $x$ can be written as a finite product of irreducible elements\footnote{You may check that in general, if and $\langle t\rangle = \langle t'\rangle $, then $t=u't'$ for some unit $u'$}, a contradiction. If $\langle u\rangle \in \mathscr{U}$, then by maximality of $\langle x\rangle $, we have $\langle u\rangle = \langle x\rangle $, which implies $a_1$ is a unit, a contradiction. \\

We now prove the uniqueness of factorization. Suppose 
\begin{align*}
a= p_1\cdots p_n= q_1 \cdots q_m
\end{align*}
are two factorization. Because $p_1$ is prime, for some $i$ we have $q_i \in \langle p_1\rangle $. WLOG suppose $i=1$. Because  $q_1$ is irreducible, we see that  $q_1=u_1p_1$ for some unit  $u_1$, which implies\footnote{Because $A$ is an integral domain.}
\begin{align*}
p_2\cdots p_n= u_1q_2 \cdots q_m
\end{align*}
Continuing this process, we have 
\begin{align*}
p_n=u_{n-1}q_n \cdots q_m
\end{align*}
The proof then follows from $p_n$ being irreducible.
\end{proof}
\begin{theorem}
\textbf{(UFD are GCD domain)} If $D$ is an UFD, then  $D$ is a GCD domain. 
\end{theorem}
\begin{proof}
Let $x,y \in D$. If any of $x,y$ is a unit, then $\langle 1\rangle $ is the unique minimal principal ideal containing $\langle x,y\rangle $, and if $y$ is zero, then $\langle x\rangle$ is the unique minimal principal ideal containing $\langle x,y\rangle $. Now suppose they have the irreducible decomposition: 
\begin{align}
\label{irxx}
x=(x_1\cdots x_t)x_{t+1}\cdots x_r \text{ and }y=(x_1 \cdots x_t)y_{t+1}\cdots y_s
\end{align}
where $ux_i \neq y_j$ for all unit $u$ and $i,j>t$. Define $d\triangleq x_1\cdots x_t$. Clearly, if $\langle d\rangle$ is the smallest principal ideal containing $\langle x,y\rangle $, then it is the unique minimal principal ideal containing $\langle x,y\rangle $. Therefore, it suffices to prove for any $\langle f\rangle $ containing $\langle x,y\rangle $, we have $\langle d\rangle \subseteq \langle f\rangle $.\\

If $f$ is a unit, then what we want to prove trivially holds true. Assume for a contradiction that $\langle d\rangle \not \subseteq \langle f\rangle $. Clearly, the irreducible decomposition of $f$ must always contain some $g$ that doesn't divide $d$ in the sense that $d \not\in gD$. This implies for some $i,j>t$, $g$ divides both $x_{i}$ and $y_{j}$. This cause a contradiction to how we construct \myref{Equation}{irxx}: $y_{j} \not\in D^{\times}x_i$ for all $i,j>t$.
\end{proof}
Let $A$ be a ring, and $f\in A[x_1,\dots ,x_n]$ a formal polynomial. Its \textbf{content} $\operatorname{cont}(f)$ is the ideal in $A$ generated by its coefficients, and we say $f$ is \textbf{primitive} if $\operatorname{cont}(f)=A$. Gauss show that a non-constant polynomial in $\Z[x]$ is irreducible in $\Z[x]$ if it is irreducible in $\Q[x]$ and primitive in $\Z[x]$. Here, we generalize his result to the case of commutative ring. 
\begin{theorem}
\textbf{(Gauss lemma over commutative ring)} For each pair of polynomials $f,g \in A[x_1,\dots ,x_n]$, we have 
\begin{align*}
\operatorname{cont}(fg)\subseteq \operatorname{cont}(f)\operatorname{cont}(g) \subseteq  \sqrt{\operatorname{cont}(fg)} 
\end{align*}
\end{theorem}
\begin{proof}
$\operatorname{cont}(fg)\subseteq \operatorname{cont}(f)\operatorname{cont}(g)$ is clear. By \customref{raed}{definition of radical}, to prove $\operatorname{cont}(f)\operatorname{cont}(g)\subseteq \sqrt{\operatorname{cont}(fg)} $, we only have to prove every prime ideal containing $\operatorname{cont}(fg)$ also contains $\operatorname{cont}(f)\operatorname{cont}(g)$. Let $\mathfrak{p}\subseteq A$ be a prime ideal containing $\operatorname{cont}(fg)$. Because 
\begin{align*}
\mathfrak{p}[x_1,\dots ,x_n]\triangleq \set{h \in A[x_1,\dots ,x_n]:\text{ All coefficients of $h$ lie in $\mathfrak{p}$.}}
\end{align*}
forms a prime ideal of $A[x_1,\dots ,x_n]$ as one can check and because $fg \in \mathfrak{p}[x_1,\dots ,x_n]$, we see that one of $f,g$ is an element of  $\mathfrak{p}[x_1,\dots ,x_n]$, i.e., one of $\operatorname{cont}(f),\operatorname{cont}(g)$ is a subset of $\mathfrak{p}$. This immediately implies $\operatorname{cont}(f)\operatorname{cont}(g)\subseteq \mathfrak{p}$. 
\end{proof}
Noting that in a GCD domain 
\begin{align*}
\operatorname{gcd}(x,y,z)\triangleq \operatorname{gcd}(d,z)\text{ where }\langle d\rangle =\operatorname{gcd}(x,y)
\end{align*}
and so 
\begin{align*}
\operatorname{gcd}(\operatorname{cont}(a_nx^n+\cdots +a_1x+a_0))\triangleq \operatorname{gcd}(a_0,\dots ,a_n)\text{ is well defined. }
\end{align*}
We may give the Gauss lemma for UFD, whose proof is obvious if one use the notion of "divisors".   
\begin{theorem}
\textbf{(Gauss lemma over UFD)} If $A$ is an UFD, then for each pair of polynomials $f,g \in A[x_1,\dots ,x_n]$, we have 
\begin{align*}
\operatorname{gcd}(\operatorname{cont}(fg))= \operatorname{gcd}(\operatorname{cont}(f))\operatorname{gcd}(\operatorname{cont}(g))
\end{align*}
\end{theorem}
\begin{corollary}
\textbf{(Gauss lemma over UFD)} Given UFD $A$ with $K\triangleq \operatorname{Frac}(A)$, if $f \in A[x_1,\dots ,x_n]$ is irreducible, then $f \in K[x_1,\dots ,x_n]$ is also irreducible.
\end{corollary}
\begin{proof}
If $f=gh \in K[x_1,\dots ,x_n]$ is reducible, then $f=g(rh)\in A[x_1,\dots ,x_n]$ is reducible, where $r$ is the product of all denominators of coefficients of $h$. 
\end{proof}
\begin{proposition}
\textbf{()} Every algebraically closed set is infinite. 
\end{proposition}
\begin{proposition}
\label{un2}
\textbf{()} If $k$ is an infinite filed, and $F\in k[x_1,\dots ,x_n]$ maps all $a \in \A^n$ to $0$, then  $F=0$. 
\end{proposition}
\section{Archived}
Moreover, clearly we have
\begin{align*}
I(\overline{X})=I(X),\quad\text{for all }X \subseteq \A^n
\end{align*}
and in summary, we have the (not commutative) diagram:  
\[\begin{tikzcd}
\label{di1}
  {\text{subsets of }\A^n} && {\text{ideals of }k[x_1,\dots,x_n]} \\
	\\
                           & {\text{ closed set of }\A^n}
	\arrow["I", from=1-1, to=1-3]
	\arrow["V", from=1-3, to=3-2]
	\arrow[hook', from=3-2, to=1-1]
\end{tikzcd}\]
Even thought not commutative at the top two nodes, indeed the diagram is commutative at the node below: 
\begin{align}
\label{VVIV}
V=V(I(V)),\quad \text{for all closed $V \subseteq \A^n$ }
\end{align}
  \item  By \customref{HBT}{Hilbert's basis theorem}, every closed set in $\A^1$, even if $k$ is not closed, must be either finite or the whole space. \label{CnD}
  \item Because of (B), if $k$ is infinite, then $\A^1$ is irreducible, which in particular apply to the usual case when $k$ is closed.\footnote{To see algebraically closed field is infinite, assume not and consider $1+ \prod (x-y_i)$ where $y_i$ runs through all elements.} 
  \item  $Y\subseteq \A^n$ is irreducible if and only if $I(Y)$ is prime, and in such case if $Y$ moreover is closed, we call $Y$ an \textbf{(affine) variety}. This in particular shows that $\A^n$ are irreducible, as  $I(\A^n)=0$, another proof of (D). 
 Because of \customref{CnD}{(C) ad (D)}, clearly $\A^1$ is $1$-dimensional as expected. We will show in the \customref{DT}{section on Dimension Theory} that indeed for all $n$, $\A^n$ is  $n$-dimensional.   

\chapter{The Great Theorems}
\section{Hilbert's Nullstellensatz and basis theorem}
\label{FGN}
\begin{theorem}
\label{HBT}
\textbf{(Hilbert's Basis Theorem)} If $A$ is Noetherian, than the polynomial ring $A[x]$ is also Noetherian. 
\end{theorem}
\begin{proof}
Let $X$ be an ideal in  $A[x]$. We are required to show that $X$ is finitely generated. Let $I$ be the ideal in $A$  that contains exactly the leading coefficients of elements of  $X$. Because $A$ is Noetherian, we may let $I=  \langle a_1,\dots ,a_n\rangle $ and let $f_1,\dots ,f_n \in X$ have leading coefficients $a_1,\dots ,a_n$. Let $X'\triangleq \langle f_1,\dots ,f_n\rangle \subseteq X$ and let $r\triangleq  \max \set{\operatorname{deg}(f_1),\dots ,\operatorname{deg}(f_n)}$.\\

We first show 
\begin{align}
\label{23X}
X= \Big(X \cap \langle 1,x,\dots ,x^{r-1}\rangle \Big) + X'
\end{align}
Let $f\in X$ with $\operatorname{deg}(f)=m$ and leading coefficients $a$. We wish to show $f \in (X \cap \langle 1,x,\dots ,x^{r-1}\rangle )+X'$. Because $a \in I$, we may find some $u_i \in A$ such that $a= \sum u_i a_i$. Clearly, these $u_i$ satisfy
\begin{align*}
f- \sum u_if_ix^{m-\operatorname{deg}(f_i)} \in X,\quad \text{and }\sum u_i f_ix^{m-\operatorname{deg}(f_i)}\in X'
\end{align*}
and satisfy
\begin{align*}
\operatorname{deg}\Big(f- \sum u_i f_i x^{m-\operatorname{deg}(f_i)}\Big)<m
\end{align*}
Proceeding this way, we end up with $f-g=h$ where  $g\in X'$ and $h \in X \cap \langle 1,x,\dots ,x^{r-1}\rangle $. We have proved \myref{Equation}{23X}. Now, because $X'$ is finitely generated, to show  $X$ is finitely generated, it only remains to show the ideal $X \cap \langle 1,x,\dots ,x^{r-1}\rangle $  is finitely generated, which follows immediately from noting $\langle 1,x,\dots ,x^{r-1}\rangle $ as a module is Noetherian.    
\end{proof}
\begin{theorem}
\label{WfoN}
\textbf{(Weak form of Nullstellensatz)} Given field $k$ and finitely generated  $k$-algebra  $B$, if  $B$ is a field then it is a finite algebraic extension of $k$.  
\end{theorem}
\begin{proof}
A proof can be found in the end of Chapter 5 of Atiyah-MacDonald. Another proof can be found in Chapter 7 of Atiyah-MacDonald, at page 82.
\end{proof}
\begin{theorem}
\label{HN}
\textbf{(Hilbert's Nullstellensatz)} Given algebraically closed field $k$ and ideal  $I\subseteq k[x_1,\dots ,x_n]$. If we let $V$ be the locus of $I$: 
\begin{align*}
V\triangleq   \set{x\in k^n : F(x)=0\text{ for all }F \in I}
\end{align*}
and let $J$ be the defining ideal of $V$: 
 \begin{align*}
J\triangleq  \set{F \in k[x_1,\dots ,x_n]: F(x)=0\text{ for all }x \in V}
\end{align*}
then $J = \sqrt{I}$. 
\end{theorem}
\begin{proof}
  $\sqrt{I}\subseteq J$ is clear. Assume for a contradiction that $F \in J - \sqrt{I}$. \customref{raed}{Because $F \not\in \sqrt{I}$, there exists some prime $\mathfrak{p}\subseteq k[x_1,\dots ,x_n]$ that contains $\sqrt{I}$ but does not contain $F$}. Denote 
\begin{align*}
B \triangleq k[x_1,\dots ,x_n]\quotient  \mathfrak{p} \text{ and }g\triangleq [F] \in B\text{ and }C\triangleq B_g
\end{align*}
Let $\mathfrak{m}$ be some maximal ideal of $C$. Because of the $k$-algebra homomorphism diagram: 
 \begin{align}
\label{kdm}
k[x_1,\dots ,x_n]\xrightarrow{\text{ring quotient}}  B\xrightarrow{\text{localization}} C\xrightarrow{\text{ring quotient}} C \quotient \mathfrak{m}
\end{align}
We see that  by  \customref{HBT}{Hilbert Basis Theorem}, \myref{theorem}{cpoN}, and \customref{EDoN}{equivalent definition of Noetherian},  $C\quotient \mathfrak{m}$ is finitely generated over $k$, thus a finite algebraic extension of $k$ by  \customref{WfoN}{weak form of Nullstellensatz}. Because $k$ is algebraically closed, this implies $C\quotient \mathfrak{m}\cong  k$. \\

Now, for each  $1\leq i\leq n$, let $t_i\in k\cong C\quotient \mathfrak{m}$ be the image of $x_i\in k[x_1,\dots ,x_n]$ under the $k$-module homomorphism in \myref{diagram}{kdm}.  Letting $t\triangleq (t_1,\dots ,t_n)\in k^n$, it is easy to check\footnote{Recall $k[x_1,\dots ,x_n]=\langle x_1,\dots ,x_n\rangle $.} by direct computation that \myref{diagram}{kdm} have action $G \in k[x_1,\dots ,x_n]\mapsto G(t)\in k$. Because  $I \subseteq \mathfrak{p}$, by construction of $B$ we see \myref{diagram}{kdm} maps every element of $I$ to $0\in k$. Yet, at the same time the image of $F$ in $C$ is a unit by construction of  $C$, which implies the image of $F$ in the quotient ring $C\quotient \mathfrak{m}$ is nonzero. We have shown $t \in V$ and $F(t)\neq 0$, a contradiction. 
\end{proof}
\section{Noether Normalization Lemma (Half way there)}
Let $k$ be a field and $A$ a $k$-algebra. If we say $E\subseteq A$ is \textbf{algebraically independent over $k$}, we mean that there exists no $\set{y_1,\dots ,y_n}\subseteq E$ and polynomial $F\neq 0 \in k[x_1,\dots ,x_n]$ such that $F(y_1,\dots ,y_n)=0$. Before stating our version of \customref{NNL}{Noether Normalization Lemma}, we should prove what we should have proved in \customref{Id}{the previous section on Integral Dependence}, so one can see the equivalency between our version and others. 
\begin{theorem}
\label{IaFT1}
\textbf{(Integral and Finite Type)} Given rings $B\subseteq A$, if $x_1,\dots ,x_n \in A$ are integral over $B$, then  $B[x_1,\dots ,x_n]$ as a $B$-module finitely generated. 
\end{theorem}
\begin{proof}
We shall prove by induction on $n$.  Base case $n=1$ follows from \customref{EDfid}{the second definition of integral dependence}. Let $n> 1$.  Trivially, $x_n$ is integral over $B[x_1,\dots ,x_{n-1}]$, so it follows from  \customref{EDfid}{the second definition of integral dependence} that $B[x_1,\dots ,x_n]=(B[x_1,\dots,x_{n-1}])[x_n]$ is finitely generated as a $B[x_1,\dots ,x_{n-1}]$-module. Now, because inductive hypothesis said that $B[x_1,\dots ,x_{n-1}]$ is finitely generated as a $B$-module, we see from \myref{theorem}{Fgas}\footnote{You may check that the module structures here all agree with scalar extension.} that indeed $B[x_1,\dots ,x_n]$ is finitely generated as a $B$-module.
\end{proof}
\begin{corollary}
\textbf{(Integral and Finite Type)} Let $k$ be a field, and $A$ a finitely generated a $k$-algebra. Given any $y_1,\dots ,y_r \in A$, we have
\begin{align*}
A\text{ as a $k[y_1,\dots ,y_r]$-module is finitely generated }\iff A\text{ is integral over }k[y_1,\dots ,y_r] 
\end{align*}
\end{corollary}
\begin{proof}
$(\implies):$ This follows from  \customref{EDfid}{the third definition of integral dependence}. \\

$(\impliedby):$ Because $A$ is finitely generated as a $k$-algebra, there exists some $m$ and $y_1',\dots ,y_m'\in A$ such that $A=k[y_1',\dots,y_m']$. The proof then follows from  $A=(k[y_1,\dots ,y_r])[y_1',\dots ,y_m']$ and \myref{Theorem}{IaFT1}. 
\end{proof}
\begin{theorem}
\label{NNL}
\textbf{(Noether Normalization Lemma)} Let $k$ be a field. If $A$ is a finitely generated $k$-algebra, says, 
\begin{align*}
A= k[y_1',\dots ,y_m']\text{ for smallest }m,
\end{align*}
then there exists $y_1,\dots ,y_r \in A$ algebraically independent over $k$ such that  $A$ as a $k[y_1,\dots ,y_r]$-module is finitely generated. 
\end{theorem}
\begin{proof}
We shall prove by induction on $m$.  Consider the base case $m=1$. If $y_1'$ is algebraic independent over  $k$, then $y_1 \triangleq y_1'$ suffices trivially. If not, then clearly $A$ as a $k$-algebra is isomorphic to the quotient  $k[y]\quotient I$, where $k[y]$ is the formal polynomial ring and $I$ is the (clearly nonzero) ideal of polynomials vanishing at $y_1'$. Let $f$ be the generator of $I$.\footnote{$k[y]$ is a PID (To see this, just consider smallest degree element and division algorithm.). Its nonzero prime ideals are exactly those whose generator is irreducible (To see irreducible polynomials generate prime ideals, prove that they generate maximal ideal.).} The proof then follows from noting $A$ as a $k$-module is generated by $1,y,\dots ,y^{\operatorname{deg}f-1}$. \\

Let $m\geq 2$. If $y_i'$ are algebraically independent, then $y_i\triangleq y_i'$ suffices trivially. Suppose not.

(Remains to show Krudim)  \\





\end{proof}

(So $\operatorname{Krudim}(A)=0$. HOW? Because $A=k[y]\quotient I$ and $I$ nonzero  $\operatorname{Krudim}(k[y])=1$) 
 If $A$ is itself a field and the algebra-defining ring homomorphism $k \longrightarrow A$ forms an injective field homomorphism, then we can talk about the \textbf{transcendence degree $\operatorname{trdeg}_k A$ of $A$ over  $k$}. By Zorn's Lemma, there exists some maximal algebraically independent subset $E \subseteq A$, and by an argument similar to that for vector space, two maximal algebraically independent subsets $E_1,E_2 \subseteq A$ must have the same cardinality. It thus make sense for us to talk about the transcendence degree $\operatorname{trdeg}_k A$. 

\end{document}
